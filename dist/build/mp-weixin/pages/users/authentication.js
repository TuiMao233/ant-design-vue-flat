(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/users/authentication"],{"49ac":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return o}));var o={uTabs:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-tabs/u-tabs")]).then(n.bind(null,"5d62"))},uUpload:function(){return n.e("node-modules/uview-ui/components/u-upload/u-upload").then(n.bind(null,"eea8"))},uIcon:function(){return n.e("node-modules/uview-ui/components/u-icon/u-icon").then(n.bind(null,"f86b"))},customBlank:function(){return Promise.all([n.e("common/vendor"),n.e("components/customs/custom-blank")]).then(n.bind(null,"2305"))},uField:function(){return n.e("node-modules/uview-ui/components/u-field/u-field").then(n.bind(null,"c732"))},uButton:function(){return n.e("node-modules/uview-ui/components/u-button/u-button").then(n.bind(null,"d9ad"))}},a=function(){var t=this,e=t.$createElement,n=(t._self._c,{costoken:t.upload.multipart.costoken}),o=0===t.current?{costoken:t.upload.multipart.costoken}:null;t.$mp.data=Object.assign({},{$root:{a0:n,a1:o}})},u=[]},"4e6c":function(t,e,n){"use strict";var o=n("e11e"),a=n.n(o);a.a},"64c6":function(t,e,n){"use strict";n.r(e);var o=n("49ac"),a=n("c8d1");for(var u in a)["default"].indexOf(u)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(u);n("4e6c");var r,i=n("f0c5"),c=Object(i["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);e["default"]=c.exports},c8d1:function(t,e,n){"use strict";n.r(e);var o=n("cc4b"),a=n.n(o);for(var u in o)["default"].indexOf(u)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(u);e["default"]=a.a},cc4b:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=d(n("a34a")),a=n("79f6"),u=n("dd73"),r=n("d257"),i=d(n("0613")),c=d(n("66fd"));function d(t){return t&&t.__esModule?t:{default:t}}function f(t,e,n,o,a,u,r){try{var i=t[u](r),c=i.value}catch(d){return void n(d)}i.done?e(c):Promise.resolve(c).then(o,a)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var u=t.apply(e,n);function r(t){f(u,o,a,r,i,"next",t)}function i(t){f(u,o,a,r,i,"throw",t)}r(void 0)}))}}var s=c.default.extend({components:{},data:function(){return{$siteinfo:c.default.prototype.$siteinfo,tabs:[{name:"个人认证",id:1},{name:"企业认证",id:2}],current:0,form:{type:1,front_image:"",back_image:"",name:"",idcard:""},edit:!0,frontImages:[],backImages:[],typeTexts:{1:{title:"上传身份证",imageText:"身份证正面照片",formText:"填写个人信息",nameLabelText:"真实姓名",codeLabelText:"身份证号码"},2:{title:"上传营业执照",imageText:"营业执照照片",formText:"填写企业信息",nameLabelText:"企业名称",codeLabelText:"统一社会信用代码"}}}},computed:{upload:function(){return i.default.state.common.upload}},methods:{onAfterEachUpload:function(t,e){var n=t.map((function(t){var e,n;return null===(e=t.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.url})).filter((function(t){return t})),o=n.join(",").trim();this.form[e]=o},onSubmitAuth:function(){var t=this;return l(o.default.mark((function e(){var n,c,d,f;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=t.current){e.next=12;break}if(n=u.plotForm.validateAll(["empty",t.form.front_image,"身份证正面"],["empty",t.form.back_image,"身份证反面"],["chineseName",t.form.name],["identityId",t.form.idcard]),c=n.validate,c){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,(0,a.reqIdCardSave)(t.form);case 6:return e.next=8,(0,r.showToast)({title:"提交成功!"});case 8:i.default.dispatch("getAuthentication"),t.$navigateBack(),e.next=21;break;case 12:if(d=u.plotForm.validateAll(["empty",t.form.front_image,"身份证正面"],["empty",t.form.name,"企业名称"],["empty",t.form.idcard,"信用代码"]),f=d.validate,f){e.next=15;break}return e.abrupt("return",!1);case 15:return e.next=17,(0,a.reqIdCardSave)(t.form);case 17:return e.next=19,(0,r.showToast)({title:"提交成功!"});case 19:i.default.dispatch("getAuthentication"),t.$navigateBack();case 21:case"end":return e.stop()}}),e)})))()},initAuthDetail:function(){var t=this;return l(o.default.mark((function e(){var n,a;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=i.default.state.user.authentication,a=i.default.getters.isAuthentication,a){e.next=4;break}return e.abrupt("return",!1);case 4:t.edit=!1,t.form.type=n.type,t.current=1==n.type?0:1,t.frontImages=[{url:n.front_image_text}],t.backImages=[{url:n.back_image_text}],t.form.name=n.name,t.form.idcard=n.idcard;case 11:case"end":return e.stop()}}),e)})))()},onChange:function(t){if(!this.edit){var e=1==this.form.type?"已认证个人无法进行企业认证":"已认证企业无法进行个人认证";return(0,r.showToast)({title:e,icon:"none"}),!1}this.current=t,this.form.type=this.tabs[this.current].id}},watch:{},onLoad:function(){i.default.dispatch("getCommonConfig"),this.initAuthDetail()},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){t.stopPullDownRefresh()},onReachBottom:function(){}});e.default=s}).call(this,n("543d")["default"])},da35:function(t,e,n){"use strict";(function(t){n("6cdc"),n("921b");var e=o(n("64c6"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},e11e:function(t,e,n){}},[["da35","common/runtime","common/vendor"]]]);