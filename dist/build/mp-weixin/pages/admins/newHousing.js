require('common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/admins/newHousing"],{"430c":function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return u})),t.d(n,"a",(function(){return r}));var r={uForm:function(){return t.e("node-modules/uview-ui/components/u-form/u-form").then(t.bind(null,"aa8f"))},uFormItem:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-form-item/u-form-item")]).then(t.bind(null,"e0a3"))},uInput:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-input/u-input")]).then(t.bind(null,"d5da"))},uRadioGroup:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-radio-group/u-radio-group")]).then(t.bind(null,"bb8e"))},uRadio:function(){return t.e("node-modules/uview-ui/components/u-radio/u-radio").then(t.bind(null,"1e88"))},uButton:function(){return t.e("node-modules/uview-ui/components/u-button/u-button").then(t.bind(null,"d9ad"))}},o=function(){var e=this,n=e.$createElement;e._self._c},u=[]},"5e12":function(e,n,t){"use strict";var r=t("67f7"),o=t.n(r);o.a},"67f7":function(e,n,t){},7459:function(e,n,t){"use strict";t.r(n);var r=t("c3c8"),o=t.n(r);for(var u in r)["default"].indexOf(u)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(u);n["default"]=o.a},"8e80":function(e,n,t){"use strict";(function(e){t("6cdc"),t("921b");var n=r(t("fe54"));function r(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("543d")["createPage"])},c3c8:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(t("a34a")),o=a(t("66fd")),u=t("79f6"),i=t("d257");function a(e){return e&&e.__esModule?e:{default:e}}function c(e,n,t,r,o,u,i){try{var a=e[u](i),c=a.value}catch(m){return void t(m)}a.done?n(c):Promise.resolve(c).then(r,o)}function m(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var u=e.apply(n,t);function i(e){c(u,r,o,i,a,"next",e)}function a(e){c(u,r,o,i,a,"throw",e)}i(void 0)}))}}var f=o.default.extend({components:{},data:function(){return{form:{name:"",type:"1",num:"",price:"",weight:"",time:""},meal_id:"",rules:{name:[{required:!0,message:"请输入套餐名称",trigger:["change","blur"]}],type:[{required:!0,message:"请选择套餐种类",trigger:["change","blur"]}],num:[{required:!0,message:"请输入套餐房源数",trigger:["change","blur"]}],price:[{required:!0,message:"请输入套餐价格",trigger:["change","blur"]}],weight:[{required:!0,message:"请输入套餐权重",trigger:["change","blur"]}],time:[{required:!0,message:"请输入套餐天数",trigger:["change","blur"]}]}}},computed:{},methods:{submit:function(e){var n=this;this.$refs.uForm.validate(function(){var t=m(r.default.mark((function t(o){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!o){t.next=16;break}if(!n.meal_id){t.next=9;break}return t.next=4,(0,u.reqNewSetmeal)({meal_id:n.meal_id,title:n.form.name,num:n.form.num,price:n.form.price,status:e,validtime:"1"==n.form.type?-1:n.form.time,weight:n.form.weight});case 4:return t.next=6,(0,i.showToast)({title:"编辑成功!"});case 6:(0,i.navigateBack)(),t.next=14;break;case 9:return t.next=11,(0,u.reqNewSetmeal)({title:n.form.name,num:n.form.num,price:n.form.price,status:e,validtime:"1"==n.form.type?-1:n.form.time,weight:n.form.weight});case 11:return t.next=13,(0,i.showToast)({title:"新增成功!"});case 13:(0,i.navigateBack)();case 14:t.next=17;break;case 16:console.log("验证失败");case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getDetails:function(e){var n=this;return m(r.default.mark((function t(){var o,i;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,u.reqMealDetail)({meal_id:e});case 2:o=t.sent,i=o.data,console.log(i),n.form.name=i.title,n.form.num=i.num,n.form.price=i.price,n.form.weight=i.weight,n.form.type=-1==i.validtime?"1":"2",n.form.time=i.validtime,n.form.num=n.form.num.toString(),n.form.weight=n.form.weight.toString(),n.form.time=n.form.time.toString(),console.log(n.form);case 15:case"end":return t.stop()}}),t)})))()},checkPrice:function(e){var n=this;console.log(e),e=e.match(/^\d*(\.?\d{0,2})/g)[0]||null,this.$nextTick((function(){n.form.price=e}))}},watch:{},onLoad:function(e){e.meal_id&&(this.meal_id=e.meal_id,this.getDetails(e.meal_id))},onReady:function(){this.$refs.uForm.setRules(this.rules)},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){e.stopPullDownRefresh()},onReachBottom:function(){}});n.default=f}).call(this,t("543d")["default"])},fe54:function(e,n,t){"use strict";t.r(n);var r=t("430c"),o=t("7459");for(var u in o)["default"].indexOf(u)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(u);t("5e12");var i,a=t("f0c5"),c=Object(a["a"])(o["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],i);n["default"]=c.exports}},[["8e80","common/runtime","common/vendor"]]]);