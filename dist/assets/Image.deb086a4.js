import{a as e,e as l,l as o,w as t,b as a,o as i,c as s,I as n,g as d,F as u,P as p,t as c,s as m,G as r,u as f,f as g,X as v,k as h,p as b,h as k}from"./vendor.71e19cde.js";import{_ as y}from"./ImageItem.b647d306.js";import{_ as x}from"./LinkItem.c2fdbd3b.js";import{l as _,L as w,c as V,M as C}from"./index.a53c91c6.js";import"./Decoration.4ca538d6.js";import{l as j,x as U}from"./options.119c0fd3.js";import{_ as I}from"./EditHeader.67fbf51f.js";import{_ as T}from"./EditCardForm.eb8b3b86.js";import{_ as X}from"./ColorGroup.vue_vue&type=script&setup=true&lang.dc9fb82e.js";import{_ as D}from"./SliderGroup.vue_vue&type=script&setup=true&lang.84a8a9b8.js";import{_ as H}from"./SliderInput.27251042.js";import{_ as z}from"./ColorInput.60244a44.js";const M={class:"hot-drag-container"},W={class:"hot-drag-cotnent",style:{position:"relative"}},Y={class:"tips oe-text-center"},$={key:0,class:"oe-m-b-5"},q=d("i",{class:"el-icon-close"},null,-1),G={class:"dialog-footer"},L=v("添加热区"),P=v("保存");var R=e({expose:[],props:{show:{type:Boolean},image:{type:Object,required:!0}},setup(e,{emit:v}){const h=e,b=l({get:()=>h.show,set:e=>v("update:show",e)}),k=o(_.cloneDeep(h.image));t((()=>h.show),(e=>{e&&(k.value=_.cloneDeep(h.image))}));const y=l((()=>-1===k.value.hots.findIndex((e=>!e.link.value)))),x=()=>{const e=document.querySelector(".hot-drag-container");if(!e)return!1;const l=e.offsetWidth/2-100,o=e.offsetHeight/2+e.scrollTop-100;k.value.hots.push({top:o,left:l,width:200,height:200,link:_.clone(j)})};o(!1);const C=()=>{if(!y.value)return V.error("请添加链接");h.image.hots=k.value.hots,b.value=!1};return(e,l)=>{const o=a("el-step"),t=a("el-steps"),v=a("el-image"),h=a("el-button"),y=a("el-dialog");return i(),s(y,{title:"热区编辑器",width:800,modelValue:f(b),"onUpdate:modelValue":l[1]||(l[1]=e=>g(b)?b.value=e:null),"custom-class":"hot-edit-container"},{footer:n((()=>[d("span",G,[d(h,{onClick:x},{default:n((()=>[L])),_:1}),d(h,{type:"primary",onClick:C},{default:n((()=>[P])),_:1})])])),default:n((()=>{var e;return[d(t,{active:4,simple:"",class:"oe-m-t-10 oe-m-b-15"},{default:n((()=>[d(o,{title:"添加热区",icon:"ri-add-line"}),d(o,{title:"调整热区大小与位置",icon:"ri-fullscreen-line"}),d(o,{title:"设置热区链接",icon:"ri-link"}),d(o,{title:"保存设置",icon:"ri-save-line"})])),_:1}),d("div",M,[d("div",W,[d(v,{style:{width:"100%"},src:k.value.image||"/addons/weitshop_shop/weshop/public/home/backend/images/decorate/product-transverse.png"},null,8,["src"]),(i(!0),s(u,null,p(null==(e=k.value)?void 0:e.hots,((e,l)=>(i(),s("div",{class:"drag-item",key:l,style:{top:`${e.top}px`,left:`${e.left}px`,width:`${e.width}px`,height:`${e.height}px`,zIndex:l+1},onMousedown:e=>((e,l)=>{const o=e.target,t=o.offsetParent,a=t.offsetHeight,i=t.offsetWidth,s=o.offsetHeight,n=o.offsetWidth,d=e.clientX-o.offsetLeft,u=e.clientY-o.offsetTop;document.onmousemove=e=>{let t=e.clientX-d,p=e.clientY-u;const c=e.clientX+o.offsetWidth-d,m=e.clientY+o.offsetHeight-u;c>i&&(t=i-s),m>a&&(p=a-n),t<0&&(t=0),p<0&&(p=0),k.value.hots[l].left=t,k.value.hots[l].top=p},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}})(e,l),onDblclick:e=>(async e=>{k.value.hots[e].link=await w()})(l)},[d("div",Y,[e.link.label?(i(),s("div",$,c(e.link.label),1)):m("",!0),d("div",null,c(e.link.name||"双击添加链接"),1)]),d("div",{class:"delete",onClick:r((e=>(e=>{k.value.hots.splice(e,1),0===k.value.hots.length&&k.value.hots.push({top:0,left:0,width:200,height:200,link:_.clone(j)})})(l)),["stop"])},[q],8,["onClick"]),d("div",{class:"zoom",onMousedown:r((e=>((e,l)=>{const o=e.target.offsetParent,t=e.clientX,a=e.clientY,i=o.offsetWidth,s=o.offsetHeight;document.onmousemove=e=>{const o=e.clientX-t,n=e.clientY-a;let d=i+o,u=s+n;d<30&&(d=30),u<30&&(u=30),k.value.hots[l].width=d,k.value.hots[l].height=u},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}})(e,l)),["stop"])},null,40,["onMousedown"])],44,["onMousedown","onDblclick"])))),128))])])]})),_:1},8,["modelValue"])}}});const S=h();b("data-v-1d22b44c");const E={class:"image"},F=d("i",{class:"ad-single"},null,-1),O=d("i",{class:"ad-double"},null,-1),B=d("div",{class:"title"},"添加图片",-1),A={key:1,class:"image-list"},J={key:2,class:"hot-image-list"},K={class:"tips oe-text-center"},N={key:0,class:"oe-m-b-5"},Q={class:"oe-m-t-14 oe-m-b-14"},Z=v(" 设置热区 "),ee=v(" 替换图片 "),le=d("div",{class:"tips-text"},"建议图片尺寸为宽750px高100-400px",-1);k();var oe=e({expose:[],props:{option:{type:Object,required:!0}},setup(e){const l=e,t=o(!1),n=()=>{l.option.images.length<8&&l.option.images.push({image:"",link:_.clone(j),hots:_.cloneDeep(U.images[0].hots)})},f=e=>{1!==l.option.images.length?l.option.images.splice(e,1):t.value=!t.value};l.option.images.length||n();const g=o(0),h=o(!1),b=e=>{g.value=e,h.value=!0};return S(((o,k)=>{const _=a("el-radio-button"),w=a("el-radio-group"),V=a("el-form-item"),j=a("el-radio"),U=a("el-popover"),M=a("el-image"),W=a("el-link"),Y=a("el-button");return i(),s("div",E,[d(I,{icon:"ad-image",title:"图片"}),d(T,{title:"图片设置"},{default:S((()=>[d(V,{label:"风格类型"},{default:S((()=>[d(w,{modelValue:e.option.styleType,"onUpdate:modelValue":k[1]||(k[1]=l=>e.option.styleType=l),size:"small"},{default:S((()=>[d(_,{label:"single"},{default:S((()=>[F])),_:1}),d(_,{label:"double"},{default:S((()=>[O])),_:1})])),_:1},8,["modelValue"])])),_:1}),"single"===e.option.styleType?(i(),s(V,{key:0,label:"图片"},{default:S((()=>[d(w,{modelValue:e.option.type,"onUpdate:modelValue":k[2]||(k[2]=l=>e.option.type=l)},{default:S((()=>[(i(),s(u,null,p(["标准","高级（热区）"],(e=>d(j,{label:e,key:e},null,8,["label"]))),64))])),_:1},8,["modelValue"])])),_:1})):m("",!0),B,"标准"==e.option.type||"double"===e.option.styleType?(i(),s("div",A,[(i(!0),s(u,null,p(e.option.images,((e,l)=>(i(),s("div",{class:"image-item oe-flex",key:l},[d(y,{modelValue:e.image,"onUpdate:modelValue":l=>e.image=l},null,8,["modelValue","onUpdate:modelValue"]),d(x,{class:"oe-m-l-15 oe-flex-1",modelValue:e.link,"onUpdate:modelValue":l=>e.link=l},{default:S((()=>[d(U,{placement:"bottom",trigger:"manual",content:"最少保留一个",visible:t.value,"onUpdate:visible":k[3]||(k[3]=e=>t.value=e)},{reference:S((()=>[d("span",{class:"clear-text",onClick:e=>f(l)}," 清除 ",8,["onClick"])])),_:2},1032,["visible"])])),_:2},1032,["modelValue","onUpdate:modelValue"])])))),128))])):(i(),s("div",J,[(i(!0),s(u,null,p(e.option.images,((e,o)=>(i(),s("div",{class:"hot-image-item",key:o},[d("div",{class:"hot-image-content",onClick:e=>b(o)},[d(M,{src:e.image||"/addons/weitshop_shop/weshop/public/home/backend/images/decorate/product-transverse.png",fit:"cover",style:{width:"100%",height:"100%"}},null,8,["src"]),(i(!0),s(u,null,p(null==e?void 0:e.hots,((e,l)=>(i(),s("div",{class:"drag-item",key:l,style:{top:e.top/(750/458)+"px",left:e.left/(750/458)+"px",width:e.width/(750/458)+"px",height:e.height/(750/458)+"px",zIndex:l+1}},[d("div",K,[e.link.label?(i(),s("div",N,c(e.link.label),1)):m("",!0),d("div",null,c(e.link.name||"设置热区"),1)])],4)))),128)),d(U,{placement:"bottom",trigger:"manual",content:"最少保留一个",visible:t.value,"onUpdate:visible":k[4]||(k[4]=e=>t.value=e)},{reference:S((()=>[d("i",{onClick:r((e=>f(o)),["stop"]),class:"el-icon-close"},null,8,["onClick"])])),_:2},1032,["visible"])],8,["onClick"]),d("div",Q,[d(W,{href:"javascript:;",type:"primary",class:"oe-m-r-30",onClick:e=>b(o)},{default:S((()=>[Z])),_:2},1032,["onClick"]),d(W,{href:"javascript:;",type:"primary",onClick:e=>(async e=>{const[o]=await C({multiple:!1});l.option.images[e].image=o.path})(o)},{default:S((()=>[ee])),_:2},1032,["onClick"])])])))),128))])),le,d(Y,{size:"mini",icon:"el-icon-plus",onClick:n},{default:S((()=>[v(" 添加 "+c(e.option.images.length)+" / 8 张图片 ",1)])),_:1}),d(R,{show:h.value,"onUpdate:show":k[5]||(k[5]=e=>h.value=e),image:l.option.images[g.value],"onUpdate:image":k[6]||(k[6]=e=>l.option.images[g.value]=e)},null,8,["show","image"])])),_:1}),d(T,{title:"组件样式"},{default:S((()=>[d(V,{label:"组件背景"},{default:S((()=>[d(w,{modelValue:e.option.backgroundType,"onUpdate:modelValue":k[7]||(k[7]=l=>e.option.backgroundType=l)},{default:S((()=>[(i(),s(u,null,p(["透明","颜色","背景图片"],(e=>d(j,{label:e,key:e},null,8,["label"]))),64))])),_:1},8,["modelValue"])])),_:1}),"颜色"==e.option.backgroundType?(i(),s(X,{key:0,modelValue:e.option.color,"onUpdate:modelValue":k[8]||(k[8]=l=>e.option.color=l)},{default:S((()=>[d(z,{keyword:"background",label:"背景颜色"})])),_:1},8,["modelValue"])):m("",!0),"背景图片"==e.option.backgroundType?(i(),s(V,{key:1,label:"图片"},{default:S((()=>[d(y,{modelValue:e.option.image,"onUpdate:modelValue":k[9]||(k[9]=l=>e.option.image=l),tips:"建议图片尺寸为76X76px"},null,8,["modelValue"])])),_:1})):m("",!0)])),_:1}),d(T,{title:"边距设置"},{default:S((()=>[d(D,{modelValue:e.option.padding,"onUpdate:modelValue":k[10]||(k[10]=l=>e.option.padding=l)},{default:S((()=>[d(H,{keyword:"image",label:"图片边距",tips:"px"}),d(H,{keyword:"top",label:"上边距",max:50,tips:"px"}),d(H,{keyword:"bottom",label:"下边距",max:20,tips:"px"}),d(H,{keyword:"leftRight",label:"左右边距",max:20,tips:"px"}),d(H,{keyword:"topRadius",label:"上圆角",max:20,tips:"px"}),d(H,{keyword:"bottomRadius",label:"下圆角",max:20,tips:"px"})])),_:1},8,["modelValue"])])),_:1})])}))}});oe.__scopeId="data-v-1d22b44c";export default oe;
