import{a as e,l as a,w as l,m as t,b as s,o,c as i,g as u,Z as n,u as d,X as c,t as r,F as v,s as p,k as m,p as g,h as f}from"./vendor.71e19cde.js";import{u as h,a as b,aF as y,aG as _,c as k,aH as w}from"./index.a53c91c6.js";const C=m();g("data-v-a3a8bc7c");const x={class:"notice-manage"},z={class:"card-header"},S=c("新增公告"),V={class:"header-right"},F=u("div",null,"https://www.baidu.com",-1),j={key:0,class:"start-up"},A={key:1},P={class:"oe-flex"},U=c("查看 "),E=c("编辑"),K=c("删除"),q={class:"oe-flex oe-row-between e-grid"},D={class:"operation-text"},G=c("全选当前页"),H=c("删除"),I={class:"delete-box"},L={class:"oe-flex"},X=u("i",{class:"el-icon-warning"},null,-1),Z={class:"card-header"},B=u("div",{class:"card-header-title"},"提示",-1),J={key:0,class:"card-header-text"},M={key:1,class:"card-header-text"},N={class:"footer-right"},O=c("取消"),Q=c("确定"),R={class:"announcement-box"},T={key:1},W={key:0},Y={key:1},$={class:"footer-right"},ee=c("取消"),ae=c("确定");f();var le=e({expose:[],setup(e){const m=a(),g=h(),{pagination:f,handleSizeChange:le,handleCurrentChange:te}=b(),se=a([]),oe=a(""),ie=a(""),ue=a(!1),ne=a(0),de=a([]),ce=a(!1),re=a(""),ve=a({}),pe=a(!1),me=()=>{de.value.length?ce.value=!0:ce.value=!1},ge=e=>{de.value=e},fe=()=>{f.currentPage=1,we()},he=()=>{g.push({path:"/system/shopSet/newAnnouncement"})},be=(e,a)=>{a&&(re.value=a.id),ue.value=!0,ne.value=e},ye=e=>{"descending"==e.order?(ie.value="desc",we()):(ie.value="asc",we())},_e=e=>{var a,l;e&&de.value?1==e&&(null==(l=m.value)||l.toggleAllSelection()):null==(a=m.value)||a.clearSelection()},ke=async()=>{if(0==ne.value)await _({ids:[re.value]});else{const e=[];de.value.forEach((a=>e.push(a.id))),await _({ids:e})}ue.value=!1,k.success("操作成功!!"),we()},we=async()=>{const{data:e}=await w({page:f.currentPage,limit:f.pageSize,search:{title:oe.value},order:"id",sort:ie.value});se.value=e.data.data,f.total=e.data.total};return l([()=>f.currentPage,()=>f.pageSize],(()=>{we()})),t((()=>we())),C(((e,a)=>{const l=s("el-button"),t=s("el-input"),h=s("el-empty"),b=s("el-table-column"),_=s("custom-button"),k=s("el-table"),w=s("el-checkbox"),ie=s("el-link"),re=s("el-col"),we=s("el-pagination"),Ce=s("el-row"),xe=s("el-card"),ze=s("el-dialog"),Se=s("el-form-item"),Ve=s("el-image"),Fe=s("el-form");return o(),i(v,null,[u("div",x,[u(xe,{shadow:"never",class:"custom-crad-container custom-card-page"},{default:C((()=>[u("div",z,[u(l,{type:"primary",icon:"el-icon-plus",onClick:he},{default:C((()=>[S])),_:1}),u("div",V,[u(t,{onKeyup:n(fe,["enter"]),placeholder:"请输入公告标题",modelValue:oe.value,"onUpdate:modelValue":a[1]||(a[1]=e=>oe.value=e)},{suffix:C((()=>[u("i",{class:"el-icon-search el-input__icon",style:{cursor:"pointer"},onClick:fe})])),_:1},8,["onKeyup","modelValue"])])]),u(k,{ref:m,class:"custom-crad-container custom-card-page",data:se.value,style:{width:"100%"},onSortChange:ye,onSelectAll:me,onSelectionChange:ge},{empty:C((()=>[u(h,{class:"oe-m-t-30",description:"暂无公告"})])),default:C((()=>[u(b,{type:"selection",width:"55"}),u(b,{label:"序号",prop:"id",width:"90px",sortable:"custom"}),u(b,{prop:"title",label:"公告标题"}),u(b,{prop:"address",label:"公告链接"},{default:C((()=>[F])),_:1}),u(b,{prop:"address",label:"公告状态"},{default:C((e=>[1==e.row.status?(o(),i("div",j,"启动")):(o(),i("div",A,"禁用"))])),_:1}),u(b,{prop:"address",label:"操作"},{default:C((e=>[u("div",P,[u(_,{icon:"ad-see",color:"#FE6712",onClick:a=>(async e=>{const{data:a}=await y({id:e});ve.value=a.data,pe.value=!0})(e.row.id)},{default:C((()=>[U])),_:2},1032,["onClick"]),u(_,{class:"public-move-left",icon:"el-icon-edit-outline",color:"#FF9D28",onClick:a=>{return l=e.row.id,void g.push({path:"/system/shopSet/newAnnouncement",query:{id:l}});var l}},{default:C((()=>[E])),_:2},1032,["onClick"]),u(_,{icon:"el-icon-delete",color:"#FF0000",class:"public-move-left",onClick:a=>be(0,e.row)},{default:C((()=>[K])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),u(Ce,{gutter:24,style:{margin:"0"},class:"oe-flex oe-row-between order-bottom"},{default:C((()=>[u(re,{lg:12},{default:C((()=>[u("div",q,[u("div",D,[u(w,{modelValue:ce.value,"onUpdate:modelValue":a[2]||(a[2]=e=>ce.value=e),onChange:_e},{default:C((()=>[G])),_:1},8,["modelValue"]),u(ie,{href:"javascript:;",underline:!1,onClick:a[3]||(a[3]=e=>be(1)),class:[{"public-red":de.value.length},"public"],disabled:!de.value.length},{default:C((()=>[H])),_:1},8,["class","disabled"])])])])),_:1}),u(re,{lg:12},{default:C((()=>[u(we,{class:"e-grid","page-sizes":d(f).pageSizes,"page-size":d(f).pageSize,onSizeChange:d(le),onCurrentChange:d(te),background:"","current-page":d(f).currentPage,layout:"total, prev, pager, next,sizes, jumper",total:d(f).total},null,8,["page-sizes","page-size","onSizeChange","onCurrentChange","current-page","total"])])),_:1})])),_:1})])),_:1})]),u("div",I,[u(ze,{modelValue:ue.value,"onUpdate:modelValue":a[5]||(a[5]=e=>ue.value=e),width:"550px"},{title:C((()=>[u("div",L,[X,u("div",Z,[B,0==ne.value?(o(),i("div",J,"您确定删除该公告么？")):(o(),i("div",M,"您确定删除选中的公告么？"))])])])),footer:C((()=>[u("div",N,[u(l,{size:"mini",onClick:a[4]||(a[4]=e=>ue.value=!1)},{default:C((()=>[O])),_:1}),u(l,{size:"mini",type:"primary",onClick:ke},{default:C((()=>[Q])),_:1})])])),_:1},8,["modelValue"])]),u("div",R,[u(ze,{modelValue:pe.value,"onUpdate:modelValue":a[8]||(a[8]=e=>pe.value=e),width:"725px",title:"查看公告"},{footer:C((()=>[u("div",$,[u(l,{size:"mini",onClick:a[6]||(a[6]=e=>pe.value=!1)},{default:C((()=>[ee])),_:1}),u(l,{size:"mini",type:"primary",onClick:a[7]||(a[7]=e=>pe.value=!0)},{default:C((()=>[ae])),_:1})])])),default:C((()=>[u(Fe,{"label-width":"80px"},{default:C((()=>[u(Se,{label:"公告排序"},{default:C((()=>[c(r(ve.value.id),1)])),_:1}),u(Se,{label:"公告标题"},{default:C((()=>[c(r(ve.value.title),1)])),_:1}),u(Se,{label:"展示方式"},{default:C((()=>[c(r("1"==ve.value.type?"显示内容":"链接跳转"),1)])),_:1}),u(Se,{label:"公告状态"},{default:C((()=>[c(r("0"==ve.value.status?"禁用":"开启"),1)])),_:1}),"1"==ve.value.type?(o(),i(v,{key:0},[u(Se,{label:"公告图片"},{default:C((()=>[ve.value.image?(o(),i(Ve,{key:0,src:ve.value.image,fit:"cover"},null,8,["src"])):(o(),i("div",T,"无"))])),_:1}),u(Se,{label:"公告内容"},{default:C((()=>[ve.value.content.statusContent?(o(),i("div",W,r(ve.value.content.statusContent),1)):(o(),i("div",Y,"无"))])),_:1})],64)):p("",!0),"2"==ve.value.type?(o(),i(Se,{key:1,label:"公告链接"},{default:C((()=>[c(r(ve.value.content.shareLinks),1)])),_:1})):p("",!0)])),_:1})])),_:1},8,["modelValue"])])],64)}))}});le.__scopeId="data-v-a3a8bc7c";export default le;
