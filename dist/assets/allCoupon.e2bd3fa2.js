import{a as e,e as a,l,b as t,o as s,c as o,g as i,t as d,s as u,F as n,P as c,u as r,X as p,f as m,k as v,p as _,h as f,r as g,w as y,Z as b,d as k}from"./vendor.71e19cde.js";import{f as x,a as h,_ as w,c as D}from"./index.a53c91c6.js";import{r as V,a as C,b as z,c as j,d as S}from"./marketing.64a7433e.js";const L=v();_("data-v-46cb439c");const U={class:"all-coupon-see"},F={class:"items"},P={class:"item"},q=i("div",{class:"left"},"优惠券名称",-1),G={class:"right"},B={class:"item"},I=i("div",{class:"left"},"优惠券类型",-1),K={class:"right"},O=p("折扣券"),T=p("满减券"),A={class:"item"},E=i("div",{class:"left"},"使用范围",-1),X={class:"right"},Z={key:0},$={key:1},H={class:"commodity-item-son"},J={class:"item-left"},M={class:"item-right"},N={class:"commodity-name"},Q={class:"commodity-price"},R=i("span",{class:"text"},"价格",-1),W={class:"price"},Y={key:2},ee={key:3},ae={class:"item"},le=i("div",{class:"left"},"优惠券面额",-1),te={class:"right"},se={key:0},oe={key:1},ie={class:"item"},de=i("div",{class:"left"},"优惠券总数",-1),ue={class:"right"},ne={key:0},ce={key:1},re={class:"item"},pe=i("div",{class:"left"},"单人可领取",-1),me={class:"right"},ve={key:0},_e={key:1},fe={class:"item"},ge=i("div",{class:"left"},"开始/结束发放时间",-1),ye={class:"right"},be={class:"item"},ke=i("div",{class:"left"}," 使用时间限制",-1),xe={class:"right"},he={class:"item"},we=i("div",{class:"left"}," 是否公开",-1),De={class:"right"},Ve={key:0},Ce={key:1},ze={class:"item"},je=i("div",{class:"left"}," 领取限制",-1),Se={class:"right"},Le={key:0},Ue={key:1},Fe={class:"item"},Pe=i("div",{class:"left"}," 优惠券说明",-1),qe={class:"right"},Ge={class:"dialog-footer"},Be=p("取 消"),Ie=p("确 定");f();var Ke=e({expose:[],props:{modelValue:{type:Boolean,required:!0},productDetail:{type:Object,required:!0},tableList:{type:Array,required:!0},tableGroupingList:{type:Object,required:!0}},emits:["update:modelValue"],setup(e,{emit:v}){const _=e,f=a({get:()=>_.modelValue,set:e=>v("update:modelValue",e)});_.productDetail.user_limit_level=l([]);const g=l([{name:"普通",value:"0"},{name:"一级",value:"1"},{name:"二级",value:"2"},{name:"三级",value:"3"},{name:"四级",value:"4"},{name:"五级",value:"5"},{name:"六级",value:"6"},{name:"七级",value:"7"},{name:"八级",value:"8"}]);return L(((a,l)=>{const v=t("el-tag"),_=t("el-image"),y=t("el-col"),b=t("el-row"),k=t("el-checkbox"),h=t("el-checkbox-group"),w=t("el-button"),D=t("el-dialog");return s(),o("div",U,[i(D,{title:"查看优惠券",modelValue:r(f),"onUpdate:modelValue":l[4]||(l[4]=e=>m(f)?f.value=e:null),width:"50%"},{footer:L((()=>[i("span",Ge,[i(w,{onClick:l[2]||(l[2]=e=>f.value=!1)},{default:L((()=>[Be])),_:1}),i(w,{type:"primary",onClick:l[3]||(l[3]=e=>f.value=!1)},{default:L((()=>[Ie])),_:1})])])),default:L((()=>[i("div",F,[i("div",P,[q,i("div",G,d(e.productDetail.name),1)]),i("div",B,[I,i("div",K,[2==e.productDetail.type?(s(),o(v,{key:0,type:"success"},{default:L((()=>[O])),_:1})):(s(),o(v,{key:1,type:"danger"},{default:L((()=>[T])),_:1}))])]),i("div",A,[E,i("div",X,[1==e.productDetail.to_obj?(s(),o("span",Z,"不限制")):u("",!0),2==e.productDetail.to_obj?(s(),o("div",$,[i(b,{gutter:10},{default:L((()=>[(s(!0),o(n,null,c(e.tableList,((e,a)=>(s(),o(y,{key:a,xl:{span:"4_8"},sm:{span:"4_8"},md:{span:"4_8"},lg:{span:"4_8"},class:"commodity-item"},{default:L((()=>[i("div",H,[i("div",J,[i(_,{src:e.main_picture},null,8,["src"])]),i("div",M,[i("div",N,d(e.title),1),i("div",Q,[R,i("span",W,d(e.price),1)])])])])),_:2},1024)))),128))])),_:1})])):u("",!0),3==e.productDetail.to_obj?(s(),o("div",Y,"分组名称: "+d(e.tableGroupingList.name),1)):u("",!0),4==e.productDetail.to_obj?(s(),o("div",ee,"我是分类名称")):u("",!0)])]),i("div",ae,[le,i("div",te,[2==e.productDetail.type?(s(),o("span",se,"满"+d(e.productDetail.condition_order_amount)+"享"+d(e.productDetail.money)+"折",1)):(s(),o("span",oe,"满"+d(e.productDetail.condition_order_amount)+"减"+d(e.productDetail.money),1))])]),i("div",ie,[de,i("div",ue,[-1==e.productDetail.stock?(s(),o("span",ne,"不限制")):(s(),o("span",ce,d(e.productDetail.stock)+"张",1))])]),i("div",re,[pe,i("div",me,[-1==e.productDetail.get_max_one_person?(s(),o("span",ve,"不限制")):(s(),o("span",_e,d(e.productDetail.get_max_one_person)+"张",1))])]),i("div",fe,[ge,i("div",ye,[i("span",null,d(r(x)(e.productDetail.start_time))+" 至 "+d(r(x)(e.productDetail.end_time)),1)])]),i("div",be,[ke,i("div",xe,[i("span",null,d(r(x)(e.productDetail.use_start_time))+" 至 "+d(r(x)(e.productDetail.use_end_time)),1)])]),i("div",he,[we,i("div",De,[1==e.productDetail.is_open?(s(),o("span",Ve,"公开")):(s(),o("span",Ce,"不公开"))])]),i("div",ze,[je,i("div",Se,[1==e.productDetail.user_limit?(s(),o("span",Le,"不限制")):(s(),o("div",Ue,[i(h,{modelValue:e.productDetail.user_limit_level,"onUpdate:modelValue":l[1]||(l[1]=a=>e.productDetail.user_limit_level=a)},{default:L((()=>[(s(!0),o(n,null,c(g.value,(e=>(s(),o(k,{label:e.value,key:e.value},{default:L((()=>[p(d(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])]))])]),i("div",Fe,[Pe,i("div",qe,d(e.productDetail.explain),1)])])])),_:1},8,["modelValue"])])}))}});Ke.__scopeId="data-v-46cb439c";const Oe=v();_("data-v-24bc246f");const Te={class:"all-coupon-box"},Ae={class:"oe-flex is-grid"},Ee=i("div",{class:"screen-text"},"优惠券名称",-1),Xe={class:"oe-flex is-grid"},Ze=i("div",{class:"screen-text"},"优惠券类型",-1),$e={class:"oe-flex is-grid"},He=i("div",{class:"screen-text"},"是否过期",-1),Je={class:"oe-flex is-grid"},Me=i("div",{class:"screen-text"},"新增时间",-1),Ne={class:"oe-flex is-grid"},Qe=p("搜索"),Re={class:"card-header"},We=i("div",{class:"add-button-box"},[i("i",{class:"ad-shapePlus"}),i("span",{class:"text"},"新增优惠券")],-1),Ye={key:0},ea={key:1},aa={key:0},la={key:1},ta={key:0},sa={key:1},oa={key:0},ia={key:1},da={key:0,style:{color:"#1ad370"}},ua={key:1,style:{color:"#ff0000"}},na={class:"edit oe-flex"},ca=p("查看"),ra=p("删除");f();var pa=e({expose:[],setup(e){const a=l(!1),{pagination:m,handleSizeChange:v,handleCurrentChange:_}=h(),f=l([]),L=l({}),U=l({}),F=l([]),P=g([{value:"1",label:"满减券"},{value:"2",label:"折扣券"}]),q=g([{value:"0",label:"停用"},{value:"1",label:"启用"},{value:"2",label:"已过期/发放完毕"}]),G=l(""),B=()=>{I.value.name="",I.value.type="",I.value.status="",I.value.createtime=""},I=l({name:"",type:"",status:"",createtime:""}),K=async()=>{""!=G.value&&null!=G.value?I.value.createtime=k(G.value).unix():null==G.value&&(I.value.createtime="");const e={search:I.value,page:m.currentPage,limit:m.pageSize},{data:a}=await S(e);m.total=a.data.total,F.value=a.data.data};return y([()=>m.currentPage,()=>m.pageSize],(()=>K()),{immediate:!0}),Oe(((e,l)=>{const g=t("el-input"),y=t("el-col"),k=t("el-option"),h=t("el-select"),S=t("el-date-picker"),O=t("el-button"),T=t("el-row"),A=t("el-card"),E=t("el-empty"),X=t("el-table-column"),Z=t("custom-button"),$=t("el-table"),H=t("el-pagination");return s(),o("div",Te,[i(A,{shadow:"never",class:"screen-box"},{default:Oe((()=>[i(T,{gutter:24},{default:Oe((()=>[i(y,{xl:{span:"4_8"},md:8,sm:12,class:"oe-flex"},{default:Oe((()=>[i("div",Ae,[Ee,i(g,{onKeyup:b(K,["enter"]),class:"oe-flex-1",modelValue:I.value.name,"onUpdate:modelValue":l[1]||(l[1]=e=>I.value.name=e),placeholder:"优惠券名称"},null,8,["onKeyup","modelValue"])])])),_:1}),i(y,{xl:{span:"4_8"},md:8,sm:12,class:"oe-flex"},{default:Oe((()=>[i("div",Xe,[Ze,i(h,{modelValue:I.value.type,"onUpdate:modelValue":l[2]||(l[2]=e=>I.value.type=e),placeholder:"全部",class:"oe-flex-1",clearable:""},{default:Oe((()=>[(s(!0),o(n,null,c(r(P),(e=>(s(),o(k,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])])),_:1}),i(y,{xl:{span:"4_8"},md:8,sm:12,class:"oe-flex"},{default:Oe((()=>[i("div",$e,[He,i(h,{modelValue:I.value.status,"onUpdate:modelValue":l[3]||(l[3]=e=>I.value.status=e),placeholder:"全部",class:"oe-flex-1",clearable:""},{default:Oe((()=>[(s(!0),o(n,null,c(r(q),(e=>(s(),o(k,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])])),_:1}),i(y,{xl:{span:"4_8"},md:8,sm:12,class:"oe-flex"},{default:Oe((()=>[i("div",Je,[Me,i(S,{class:"oe-flex-1",modelValue:G.value,"onUpdate:modelValue":l[4]||(l[4]=e=>G.value=e),type:"date",placeholder:"优惠券新增时间"},null,8,["modelValue"])])])),_:1}),i(y,{xl:{span:"4_8"},md:8,sm:12,class:"oe-flex"},{default:Oe((()=>[i("div",Ne,[i(O,{onClick:l[5]||(l[5]=e=>K()),type:"primary",size:"small"},{default:Oe((()=>[Qe])),_:1}),i("div",{class:"reset-text",onClick:B},"重置条件")])])),_:1})])),_:1})])),_:1}),i(A,{shadow:"never",class:"refund-list custom-crad-container custom-card-page"},{header:Oe((()=>[i("div",Re,[i(O,{type:"primary",class:"add-goods",size:"small",onClick:l[6]||(l[6]=a=>e.$router.push("/marke/coupon/newDiscount"))},{default:Oe((()=>[We])),_:1})])])),default:Oe((()=>[i($,{class:"revenue-list",data:F.value,style:{width:"100%"}},{empty:Oe((()=>[i(E,{class:"oe-m-t-30",description:"暂无优惠券"})])),default:Oe((()=>[i(X,{prop:"name",label:"优惠券名称","min-width":"150"}),i(X,{prop:"explain",label:"优惠内容","min-width":"150"},{default:Oe((e=>[2==e.row.type?(s(),o("span",Ye,"满"+d(e.row.condition_order_amount)+"享"+d(e.row.money)+"折",1)):(s(),o("span",ea,"满"+d(e.row.condition_order_amount)+"减"+d(e.row.money),1))])),_:1}),i(X,{prop:"type",label:"优惠券类型","min-width":"150"},{default:Oe((e=>[1==e.row.type?(s(),o("span",aa,"满减券")):u("",!0),2==e.row.type?(s(),o("span",la,"折扣券")):u("",!0)])),_:1}),i(X,{prop:"stock",label:"发放总量","min-width":"150"},{default:Oe((e=>[-1==e.row.stock?(s(),o("span",ta,"不限制")):(s(),o("span",sa,d(e.row.stock),1))])),_:1}),i(X,{prop:"get_num",label:"已领取"}),i(X,{prop:"get_max_one_person",label:"剩余数量","min-width":"150"},{default:Oe((e=>[-1==e.row.get_max_one_person?(s(),o("span",oa,"不限制")):(s(),o("span",ia,d(e.row.get_max_one_person),1))])),_:1}),i(X,{prop:"createtime",label:"新增时间","min-width":"160"},{default:Oe((e=>[p(d(r(x)(e.row.createtime)),1)])),_:1}),i(X,{prop:"name",label:"状态"},{default:Oe((e=>[1==e.row.status?(s(),o("span",da,"正在发放")):u("",!0),2==e.row.status?(s(),o("span",ua,"发放完毕")):u("",!0)])),_:1}),i(X,{prop:"date",label:"使用率","min-width":"150"},{default:Oe((e=>{return[p(d((a=e.row.use_percent,l=100,(a/l*100).toFixed(2)))+"% ",1)];var a,l})),_:1}),i(X,{label:"操作",width:"200"},{default:Oe((e=>[i("div",na,[i(Z,{icon:"ad-see",onClick:l=>{return t=e.row.id,V({id:t}).then((e=>{U.value=e.data.data,2==U.value.to_obj&&C({page:1,limit:2e3}).then((e=>{const a=e.data.data.data;f.value=a.filter((e=>U.value.appoint_content.includes(e.id.toString())))})),3==U.value.to_obj&&z({page:1,limit:2e3}).then((e=>{const a=e.data.data.data;L.value=a.find((e=>U.value.appoint_content.includes(e.id.toString())))}))})),void(a.value=!0);var t},color:"#FE6712",class:"public-move-left oe-m-l-0"},{default:Oe((()=>[ca])),_:2},1032,["onClick"]),1!=e.row.status?(s(),o(Z,{key:0,icon:"ad-delete",onClick:a=>{return l=e.row.id,void w.confirm("您确定删除该商品么？确定后该商品将会放入回收站","删除商品",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{j({ids:l}).then((e=>{0==e.data.code&&(D({type:"success",message:"删除成功!"}),K())}))}));var l},color:"#FF0000",class:"public-move-left"},{default:Oe((()=>[ra])),_:2},1032,["onClick"])):u("",!0)])])),_:1})])),_:1},8,["data"]),i(y,{lg:24,class:"paging-box"},{default:Oe((()=>[i(H,{background:"",onSizeChange:r(v),onCurrentChange:r(_),"current-page":r(m).currentPage,"page-sizes":r(m).pageSizes,"page-size":r(m).pageSize,total:r(m).total,layout:"total, sizes, prev, pager, next, jumper"},null,8,["onSizeChange","onCurrentChange","current-page","page-sizes","page-size","total"])])),_:1})])),_:1}),i(Ke,{modelValue:a.value,"onUpdate:modelValue":l[7]||(l[7]=e=>a.value=e),tableList:f.value,tableGroupingList:L.value,productDetail:U.value},null,8,["modelValue","tableList","tableGroupingList","productDetail"])])}))}});pa.__scopeId="data-v-24bc246f";export default pa;
