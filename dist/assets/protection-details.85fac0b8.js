import{c as e,u as s,j as a,az as t,f as l,aB as o}from"./index.a53c91c6.js";import{j as i,p as r,q as d,s as u,t as n,u as c,h as v,v as p,w as f,x as m,b as y}from"./order.28ff7f57.js";import{a as _,l as h,r as x,e as k,b,o as g,c as S,g as w,t as $,u as D,X as V,f as C,k as I,p as M,h as F,F as N,P as U,s as j,w as q,i as z,y as Y,x as E,d as P,m as O}from"./vendor.71e19cde.js";import{_ as G}from"./logistics-data.45ba351c.js";const T=I();M("data-v-0722b6c4");const B={class:"refund-closed-box"},H={class:"confirm-receipt-tips"},A={class:"dialog-footer"},R=V("取消"),L=V("确定");F();var J=_({expose:[],props:{show:{type:Boolean,required:!0},operationNum:{type:Number,required:!0},option:{type:Object,required:!0}},setup(s,{emit:a}){const t=s,l=h(),o=x({maskPassword:""}),d=x({maskPassword:[{required:!0,validator:async(e,s,a)=>{if(s)try{await i({confirmPwd:s}),a()}catch(t){a(new Error("密码不正确,请重新输入密码"))}else a(new Error("请输入密码"))}}]}),u=()=>{l.value.validate((e=>{e&&n()}))},n=async()=>{const s={order_id:t.option.id,order_item_id:t.option.orderGoods[0].id,order_after_sale_id:t.option.afterSales.id,type:t.option.type};await r(s),e.success("操作成功!!"),a("updateData"),c.value=!1},c=k({get:()=>t.show,set:()=>a("update:show")});return h(""),T(((e,a)=>{const t=b("el-form-item"),i=b("el-input"),r=b("el-form"),n=b("el-button"),v=b("el-dialog");return g(),S("div",B,[w(v,{title:1==s.operationNum?"同意退款":"同意换货",modelValue:D(c),"onUpdate:modelValue":a[3]||(a[3]=e=>C(c)?c.value=e:null),width:"554px","custom-class":"confirm-receipt"},{footer:T((()=>[w("span",A,[w(n,{onClick:a[2]||(a[2]=e=>c.value=!1)},{default:T((()=>[R])),_:1}),w(n,{type:"primary",onClick:u},{default:T((()=>[L])),_:1})])])),default:T((()=>[w("div",H,$(1==s.operationNum?"同意退款：确认后，相关款项将会自动退回至会员付款账户。":"同意换货：确认后同意换货，需要将退货地址发给会员，会员将货退回后再重新发会员指定的商品"),1),w(r,{model:D(o),ref:l,rules:D(d),"label-width":"110px"},{default:T((()=>[w(t,{label:"维权类型"},{default:T((()=>[V($(1==s.operationNum?"仅退款":"换货"),1)])),_:1}),w(t,{label:"退款金额"},{default:T((()=>[V(" ¥"+$(s.option.afterSales.refund_money),1)])),_:1}),w(t,{label:"系统登录密码",prop:"maskPassword"},{default:T((()=>[w(i,{placeholder:"请输入系统登录密码",class:"oe-flex-1","show-password":"","validate-event":!1,modelValue:D(o).maskPassword,"onUpdate:modelValue":a[1]||(a[1]=e=>D(o).maskPassword=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])}))}});J.__scopeId="data-v-0722b6c4";const W=I();M("data-v-edea3a62");const X={class:"return-address-box"},Z={class:"roll-box"},K={class:"adderess-box-right"},Q=w("span",null,"收货人",-1),ee={class:"e-right"},se={class:"middle"},ae=w("span",null,"联系电话",-1),te={class:"e-right"},le=w("span",null,"退货地址",-1),oe={class:"e-right"},ie={key:0},re=V("请先设置退货地址，"),de={class:"dialog-footer"},ue=V("取消"),ne=V("确定");F();var ce=_({expose:[],props:{show:{type:Boolean,required:!0},option:{type:Object,required:!0}},setup(a,{emit:t}){const l=a,o=s(),i=h([]),r=h({});d({page:1,limit:100}).then((e=>{i.value=e.data.data.data,i.value.forEach((e=>{1==e.is_default?(e.selsect=!0,r.value=e):e.selsect=!1}))}));const n=async()=>{const s={shopAddresId:r.value.id,order_id:l.option.id,order_item_id:l.option.orderGoods[0].id,order_after_sale_id:l.option.afterSales.id};await u(s),t("updateData"),e.success("操作成功!!"),c.value=!1},c=k({get:()=>l.show,set:()=>t("update:show")});return W(((e,s)=>{const a=b("el-checkbox"),t=b("el-empty"),l=b("el-button"),d=b("el-dialog");return g(),S("div",X,[w(d,{title:"确认退货地址",modelValue:D(c),"onUpdate:modelValue":s[4]||(s[4]=e=>C(c)?c.value=e:null),width:"680px","custom-class":"return-address"},{footer:W((()=>[w("span",de,[w(l,{onClick:s[3]||(s[3]=e=>c.value=!1)},{default:W((()=>[ue])),_:1}),w(l,{type:"primary",onClick:n},{default:W((()=>[ne])),_:1})])])),default:W((()=>[w("div",Z,[(g(!0),S(N,null,U(i.value,((e,s)=>(g(),S("div",{class:["address-box oe-flex",[e.selsect?"default":""]],key:s},[w(a,{modelValue:e.selsect,"onUpdate:modelValue":s=>e.selsect=s,onChange:a=>((e,s)=>{i.value.forEach((e=>{e.selsect=!1})),i.value[s].selsect=!0,r.value=e})(e,s),class:"selection-single"},null,8,["modelValue","onUpdate:modelValue","onChange"]),w("div",K,[w("div",null,[Q,w("span",ee,$(e.consignee),1)]),w("div",se,[ae,w("span",te,$(e.phone),1)]),w("div",null,[le,w("span",oe,$(e.province_name)+$(e.city_name)+$(e.area_name)+$(e.address),1)])])],2)))),128)),i.value.length?j("",!0):(g(),S("div",ie,[w(t,{class:"oe-m-t-30","image-size":200,description:" "},{default:W((()=>[re,w("span",{class:"tips-text",onClick:s[1]||(s[1]=e=>D(o).push("/system/logisticsDistribution/newAddress"))},"去设置")])),_:1})]))]),w("div",{class:"newly-added",onClick:s[2]||(s[2]=e=>D(o).push("/system/logisticsDistribution/newAddress"))},"新增退货地址")])),_:1},8,["modelValue"])])}))}});ce.__scopeId="data-v-edea3a62";const ve=I();M("data-v-51b5b34a");const pe={class:"reject-apply-box"},fe={class:"confirm-receipt-tips"},me={class:"dialog-footer"},ye=V("取消"),_e=V("确定");F();var he=_({expose:[],props:{show:{type:Boolean,required:!0},operationNum:{type:Number,required:!0},option:{type:Object,required:!0}},setup(s,{emit:a}){const t=s,l=h(),o=x({contentText:""}),i=h(""),r=x({contentText:[{required:!0,message:"请填写驳回申请原因",trigger:"blur"}]}),d=()=>{l.value.validate((async s=>{if(s){const s={order_id:t.option.id,order_item_id:t.option.orderGoods[0].id,order_after_sale_id:t.option.afterSales.id,remark:o.contentText};await n(s),e.success("操作成功!!"),a("updateData"),u.value=!1}}))};q(t,(()=>{i.value=["建议您先与会员沟通后，再决定是否驳回申请，驳回后，会员可再次发起申请","驳回退货退款：建议您先与会员沟通后，再决定是否驳回申请，驳回后，会员可再次发起申请","驳回换货申请：建议您先与会员沟通后，再决定是否驳回申请，驳回后，会员可再次发起申请"][t.operationNum-1]}));const u=k({get:()=>t.show,set:()=>a("update:show")});return h(""),ve(((e,a)=>{const t=b("el-form-item"),n=b("el-input"),c=b("el-form"),v=b("el-button"),p=b("el-dialog");return g(),S("div",pe,[w(p,{title:"驳回申请",modelValue:D(u),"onUpdate:modelValue":a[3]||(a[3]=e=>C(u)?u.value=e:null),width:"554px","custom-class":"confirm-receipt"},{footer:ve((()=>[w("span",me,[w(v,{onClick:a[2]||(a[2]=e=>u.value=!1)},{default:ve((()=>[ye])),_:1}),w(v,{type:"primary",onClick:d},{default:ve((()=>[_e])),_:1})])])),default:ve((()=>[w("div",fe,$(i.value),1),w(c,{model:D(o),ref:l,rules:D(r),"label-width":"110px"},{default:ve((()=>[w(t,{label:"维权类型"},{default:ve((()=>[V($(1==s.operationNum?"仅退款":2==s.operationNum?"退款退货":"换货"),1)])),_:1}),s.option?(g(),S(t,{key:0,label:"退款金额"},{default:ve((()=>[V($(s.option.afterSales.refund_money),1)])),_:1})):j("",!0),w(t,{label:"驳回原因",prop:"contentText"},{default:ve((()=>[w(n,{type:"textarea",placeholder:"买家将看到您写的发货备注",maxlength:"200",modelValue:D(o).contentText,"onUpdate:modelValue":a[1]||(a[1]=e=>D(o).contentText=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}))}});he.__scopeId="data-v-51b5b34a";const xe=I();M("data-v-40885803");const ke={class:"redelivery-box"},be={class:"oe-flex commodity-box"},ge={class:"commodity-box-right"},Se=V("虚拟"),we=V("卡密"),$e=V("实体"),De=V("计时/次"),Ve=V("预约"),Ce=V("批发"),Ie={class:"dialog-footer"},Me=V("取消"),Fe=V("确定");F();var Ne=_({expose:[],props:{show:{type:Boolean,required:!0},currentItem:{type:Object,required:!0}},setup(s,{emit:a}){const t=s,l=h(null),o=h([]),i=k({get:()=>t.show,set:()=>a("update:show")}),r=x({number:1,logisticsCompany:"",oddNumber:"",goodsRemarks:""}),d=x({logisticsCompany:[{required:!0,message:"请选择物流公司",trigger:"blur"}],oddNumber:[{required:!0,message:"请输入物流单号",trigger:"blur"}]}),u=h([]),n=e=>{o.value=e},p=()=>{l.value.validate((e=>{e&&f()}))},f=async()=>{const s={order_item_id:t.currentItem.orderGoods[0].id,order_id:t.currentItem.id,order_after_sale_id:t.currentItem.afterSales.id,send_express_company_code:r.logisticsCompany.code,send_express_company:r.logisticsCompany.company_name,send_express_sn:r.oddNumber,ext:r.goodsRemarks};await c(s),i.value=!1,e.success("操作成功!!"),a("updateData")};return q(t,(()=>{t.show&&v({page:1,limit:1500}).then((e=>{u.value=e.data.data.data}))})),z("resetOrderList"),xe(((e,a)=>{const t=b("el-table-column"),c=b("el-image"),v=b("el-tag"),f=b("el-input"),m=b("el-table"),y=b("el-form-item"),_=b("el-option"),h=b("el-select"),x=b("el-form"),k=b("el-button"),I=b("el-dialog");return g(),S("div",ke,[w(I,{title:"重新发货",modelValue:D(i),"onUpdate:modelValue":a[6]||(a[6]=e=>C(i)?i.value=e:null),width:"800px","custom-class":"immediate-delivery"},{footer:xe((()=>[w("span",Ie,[w(k,{onClick:a[5]||(a[5]=e=>i.value=!1)},{default:xe((()=>[Me])),_:1}),w(k,{type:"primary",onClick:p,disabled:!o.value.length},{default:xe((()=>[Fe])),_:1},8,["disabled"])])])),default:xe((()=>[w(m,{data:s.currentItem.orderGoods,"tooltip-effect":"dark",style:{width:"100%","margin-top":"20px"},onSelectionChange:n},{default:xe((()=>[w(t,{type:"selection",width:"45"}),w(t,{label:"商品名称"},{default:xe((e=>[w("div",be,[w(c,{src:e.row.goods_image,class:"order-information-img"},null,8,["src"]),w("div",ge,[w("div",null,$(e.row.goods_title),1),"2"==s.currentItem.type?(g(),S(v,{key:0,size:"mini",color:"#D4EBFF",style:{color:"#55adff"}},{default:xe((()=>[Se])),_:1})):j("",!0),"3"==s.currentItem.type?(g(),S(v,{key:1,size:"mini",color:"#FBDDD1",style:{color:"#ec672e"}},{default:xe((()=>[we])),_:1})):j("",!0),"1"==s.currentItem.type?(g(),S(v,{key:2,size:"mini",color:"#E4FFF8",style:{color:"#1ad370"}},{default:xe((()=>[$e])),_:1})):j("",!0),"4"==s.currentItem.type?(g(),S(v,{key:3,size:"mini",color:"#F4DFD3",style:{color:"#ef864c"}},{default:xe((()=>[De])),_:1})):j("",!0),"5"==s.currentItem.type?(g(),S(v,{key:4,size:"mini",color:"#F8E8CF",style:{color:"#dd8a0d"}},{default:xe((()=>[Ve])),_:1})):j("",!0),"6"==s.currentItem.type?(g(),S(v,{key:5,size:"mini",color:"#E9D4F9",style:{color:"#8f29df"}},{default:xe((()=>[Ce])),_:1})):j("",!0)])])])),_:1}),w(t,{label:"商品规格"},{default:xe((()=>[w("div",null,$(s.currentItem.afterSales.goods_sku_text),1)])),_:1}),w(t,{label:"发货数量",width:"120px"},{default:xe((()=>[w(f,{modelValue:s.currentItem.afterSales.refund_num,"onUpdate:modelValue":a[1]||(a[1]=e=>s.currentItem.afterSales.refund_num=e),disabled:!0},null,8,["modelValue"])])),_:1})])),_:1},8,["data"]),w(x,{ref:l,model:D(r),"label-width":"100px",rules:D(d)},{default:xe((()=>[w(y,{label:"收货地址"},{default:xe((()=>[V($(s.currentItem.province_name)+" "+$(s.currentItem.city_name)+" "+$(s.currentItem.area_name)+" "+$(s.currentItem.address),1)])),_:1}),w(y,{label:"物流公司",prop:"logisticsCompany"},{default:xe((()=>[w(h,{clearable:"","value-key":"company_name",modelValue:D(r).logisticsCompany,"onUpdate:modelValue":a[2]||(a[2]=e=>D(r).logisticsCompany=e),filterable:"",placeholder:"请选择"},{default:xe((()=>[(g(!0),S(N,null,U(u.value,(e=>(g(),S(_,{key:e.company_name,label:e.company_name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),w(y,{label:"物流单号",prop:"oddNumber"},{default:xe((()=>[w(f,{placeholder:"请输入物流单号",modelValue:D(r).oddNumber,"onUpdate:modelValue":a[3]||(a[3]=e=>D(r).oddNumber=e)},null,8,["modelValue"])])),_:1}),w(y,{label:"发货备注"},{default:xe((()=>[w(f,{type:"textarea",placeholder:"买家将看到您写的发货备注",maxlength:"200",modelValue:D(r).goodsRemarks,"onUpdate:modelValue":a[4]||(a[4]=e=>D(r).goodsRemarks=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}))}});Ne.__scopeId="data-v-40885803";var Ue=Y((function(e,s){var a,t,l,o,i,r,d,u,n,c,v,p;e.exports=(l=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,o=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,i={years:31536e6,months:2592e6,days:864e5,hours:36e5,minutes:6e4,seconds:1e3,milliseconds:1,weeks:6048e5},r=function(e){return e instanceof p},d=function(e,s,a){return new p(e,a,s.$l)},u=function(e){return t.p(e)+"s"},n=function(e){return e<0},c=function(e){return n(e)?Math.ceil(e):Math.floor(e)},v=function(e,s){return e?n(e)?{negative:!0,format:""+(a=e,Math.abs(a))+s}:{negative:!1,format:""+e+s}:{negative:!1,format:""};var a},p=function(){function e(e,s,a){var t=this;if(this.$d={},this.$l=a,s)return d(e*i[u(s)],this);if("number"==typeof e)return this.$ms=e,this.parseFromMilliseconds(),this;if("object"==typeof e)return Object.keys(e).forEach((function(s){t.$d[u(s)]=e[s]})),this.calMilliseconds(),this;if("string"==typeof e){var l=e.match(o);if(l)return this.$d.years=l[2],this.$d.months=l[3],this.$d.weeks=l[4],this.$d.days=l[5],this.$d.hours=l[6],this.$d.minutes=l[7],this.$d.seconds=l[8],this.calMilliseconds(),this}return this}var s=e.prototype;return s.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce((function(s,a){return s+(e.$d[a]||0)*i[a]}),0)},s.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=c(e/31536e6),e%=31536e6,this.$d.months=c(e/2592e6),e%=2592e6,this.$d.days=c(e/864e5),e%=864e5,this.$d.hours=c(e/36e5),e%=36e5,this.$d.minutes=c(e/6e4),e%=6e4,this.$d.seconds=c(e/1e3),e%=1e3,this.$d.milliseconds=e},s.toISOString=function(){var e=v(this.$d.years,"Y"),s=v(this.$d.months,"M"),a=+this.$d.days||0;this.$d.weeks&&(a+=7*this.$d.weeks);var t=v(a,"D"),l=v(this.$d.hours,"H"),o=v(this.$d.minutes,"M"),i=this.$d.seconds||0;this.$d.milliseconds&&(i+=this.$d.milliseconds/1e3);var r=v(i,"S"),d=e.negative||s.negative||t.negative||l.negative||o.negative||r.negative,u=l.format||o.format||r.format?"T":"",n=(d?"-":"")+"P"+e.format+s.format+t.format+u+l.format+o.format+r.format;return"P"===n||"-P"===n?"P0D":n},s.toJSON=function(){return this.toISOString()},s.format=function(e){var s=e||"YYYY-MM-DDTHH:mm:ss",a={Y:this.$d.years,YY:t.s(this.$d.years,2,"0"),YYYY:t.s(this.$d.years,4,"0"),M:this.$d.months,MM:t.s(this.$d.months,2,"0"),D:this.$d.days,DD:t.s(this.$d.days,2,"0"),H:this.$d.hours,HH:t.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:t.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:t.s(this.$d.seconds,2,"0"),SSS:t.s(this.$d.milliseconds,3,"0")};return s.replace(l,(function(e,s){return s||String(a[e])}))},s.as=function(e){return this.$ms/i[u(e)]},s.get=function(e){var s=this.$ms,a=u(e);return"milliseconds"===a?s%=1e3:s="weeks"===a?c(s/i[a]):this.$d[a],0===s?0:s},s.add=function(e,s,a){var t;return t=s?e*i[u(s)]:r(e)?e.$ms:d(e,this).$ms,d(this.$ms+t*(a?-1:1),this)},s.subtract=function(e,s){return this.add(e,s,!0)},s.locale=function(e){var s=this.clone();return s.$l=e,s},s.clone=function(){return d(this.$ms,this)},s.humanize=function(e){return a().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},s.milliseconds=function(){return this.get("milliseconds")},s.asMilliseconds=function(){return this.as("milliseconds")},s.seconds=function(){return this.get("seconds")},s.asSeconds=function(){return this.as("seconds")},s.minutes=function(){return this.get("minutes")},s.asMinutes=function(){return this.as("minutes")},s.hours=function(){return this.get("hours")},s.asHours=function(){return this.as("hours")},s.days=function(){return this.get("days")},s.asDays=function(){return this.as("days")},s.weeks=function(){return this.get("weeks")},s.asWeeks=function(){return this.as("weeks")},s.months=function(){return this.get("months")},s.asMonths=function(){return this.as("months")},s.years=function(){return this.get("years")},s.asYears=function(){return this.as("years")},e}(),function(e,s,l){a=l,t=l().$utils(),l.duration=function(e,s){var a=l.locale();return d(e,{$l:a},s)},l.isDuration=r;var o=s.prototype.add,i=s.prototype.subtract;s.prototype.add=function(e,s){return r(e)&&(e=e.asMilliseconds()),o.bind(this)(e,s)},s.prototype.subtract=function(e,s){return r(e)&&(e=e.asMilliseconds()),i.bind(this)(e,s)}})}));const je=I();M("data-v-176fa0bf");const qe={class:"oe-flex process-box"},ze={class:"oe-flex-col process-box-left"},Ye={class:"process oe-flex-1"},Ee=w("div",{class:"process-text"},"会员维权申请",-1),Pe={class:"process-date"},Oe={class:"process oe-flex-1"},Ge={key:0,class:"triangle"},Te={key:1,class:"process-date"},Be={key:0,class:"process oe-flex-1"},He={key:0,class:"process-date"},Ae={key:1,class:"triangle"},Re={key:1,class:"process oe-flex-1"},Le={key:0,class:"process-date"},Je={key:1,class:"triangle"},We={class:"process oe-flex-1"},Xe=w("div",{class:"process-text"},"维权完成",-1),Ze={key:0,class:"process-date"},Ke=w("div",{class:"triangle"},null,-1),Qe={class:"information-box"},es={class:"oe-flex-1 order-information"},ss=w("div",{class:"right-title"},"维权信息",-1),as={class:"information-list"},ts={class:"oe-flex oe-flex-wrap"},ls=w("div",{class:"e-right"},"维权状态",-1),os={key:0,class:"oe-flex-1"},is={key:1,class:"oe-flex-1"},rs={key:2,class:"oe-flex-1"},ds={key:3,class:"oe-flex-1"},us={key:4,class:"oe-flex-1"},ns={key:5,class:"oe-flex-1"},cs={class:"public-box oe-flex-wrap oe-flex"},vs=w("div",{class:"e-right"},"维权类型",-1),ps={key:0,class:"oe-flex-1"},fs={key:1,class:"oe-flex-1"},ms={key:2,class:"oe-flex-1"},ys={key:0,class:"public-box oe-flex-wrap oe-flex"},_s=w("div",{class:"e-right"},"换货规格",-1),hs={class:"oe-flex-1"},xs={class:"public-box oe-flex-wrap oe-flex"},ks=w("div",{class:"e-right"},"退款金额",-1),bs={class:"oe-flex-1"},gs={class:"public-box oe-flex-wrap oe-flex"},Ss=w("div",{class:"e-right"},"维权原因",-1),ws={class:"oe-flex-1"},$s={class:"public-box oe-flex-wrap oe-flex"},Ds=w("div",{class:"e-right"},"维权图片",-1),Vs={class:"oe-flex-1"},Cs=V("无"),Is={class:"public-box oe-flex-wrap oe-flex"},Ms=w("div",{class:"e-right"},"维权编号",-1),Fs={class:"oe-flex-1"},Ns=V(" 同意退款 "),Us=V("同意退货退款 "),js=V(" 同意换货 "),qs=V("驳回申请"),zs=V(" 已收到退货 同意退款 "),Ys=V(" 已收到退货，重新发货 "),Es={class:"oe-flex-1 receiving-address"},Ps=w("div",{class:"right-title"},"订单信息",-1),Os={class:"receiving-address-list"},Gs={class:"oe-flex oe-flex-wrap"},Ts=w("div",{class:"e-right"},"订单状态",-1),Bs={key:0,class:"oe-flex-1"},Hs={key:1,class:"oe-flex-1"},As={key:2,class:"oe-flex-1"},Rs={key:3,class:"oe-flex-1"},Ls={key:4,class:"oe-flex-1"},Js={class:"public-box oe-flex oe-flex-wrap"},Ws=w("div",{class:"e-right"},"订单编号",-1),Xs={class:"oe-flex-1"},Zs={class:"public-box oe-flex oe-flex-wrap"},Ks=w("div",{class:"e-right"},"支付方式",-1),Qs={key:0,class:"oe-flex-1"},ea={key:1,class:"oe-flex-1"},sa={class:"public-box oe-flex oe-flex-wrap"},aa=w("div",{class:"e-right"},"付款时间",-1),ta={class:"oe-flex-1"},la=V(" 查看重新发货物流信息 "),oa=V(" 查看退货物流信息 "),ia=w("div",{class:"product-title"},"商品信息",-1),ra=w("div",{class:"product-box oe-flex"},[w("div",{class:"oe-flex-2 list-box"},"商品"),w("div",{class:"oe-flex-1 list-box"},"售卖价"),w("div",{class:"oe-flex-1 list-box"},"数量"),w("div",{class:"oe-flex-1 list-box"},"商品规格"),w("div",{class:"oe-flex-1 list-box"},"优惠金额"),w("div",{class:"oe-flex-1 list-box"},"小计"),w("div",{class:"oe-flex-1 list-box"},"状态")],-1),da={class:"oe-flex-2 oe-flex list-box"},ua={class:"content-left oe-flex-1"},na={class:"content-left-text"},ca=V("虚拟"),va=V("卡密"),pa=V("实体"),fa=V("计时/次"),ma=V("预约"),ya=V("批发"),_a={class:"oe-flex-1 list-box"},ha={class:"oe-flex-1 list-box"},xa={class:"oe-flex-1 list-box"},ka={class:"oe-flex-1 list-box"},ba={class:"oe-flex-1 list-box"},ga={key:0,class:"oe-flex-1 list-box"},Sa={key:0,class:"oe-flex-1 list-box"},wa={key:1,class:"oe-flex-1 list-box"},$a={key:2,class:"oe-flex-1 list-box"},Da={key:3,class:"oe-flex-1 list-box"},Va={class:"total-box"},Ca={class:"total-box-text1"},Ia={class:"total-box-text1"},Ma=w("div",{class:"total-box-text1"},"余额抵扣：¥0.00",-1),Fa=w("div",{class:"total-box-text1"},"积分抵扣：¥0.00",-1),Na={class:"total-box-text2"},Ua=w("div",{class:"consult-box-title"},"协商记录",-1),ja={class:"list-date"},qa={class:"list-second"},za={class:"list-public"},Ya=V(" 处理方式： "),Ea={key:0},Pa={key:1},Oa={key:2},Ga={class:"list-public"},Ta={class:"list-public"},Ba={class:"list-public oe-flex"},Ha={key:1,class:"list-public"},Aa={key:2,class:"list-public"},Ra={class:"list-date"},La={key:0,class:"list-second"},Ja={key:1,class:"list-second"},Wa={class:"list-public"},Xa=V(" 处理方式： "),Za={key:0},Ka={key:1},Qa={key:2},et={class:"list-public"},st={class:"list-public"},at={class:"list-public oe-flex"},tt={key:3,class:"list-public"},lt={key:0,class:"list-public"},ot=V(" 会员在"),it={class:"refund-time"},rt=V("内未响应，退款退货申请 将自动撤销。 "),dt={class:"list-public"},ut={class:"list-public"},nt={class:"list-public"},ct={class:"list-public"},vt={class:"list-public"},pt={class:"list-public"},ft={key:6,class:"list-public"},mt={class:"list-date"},yt={key:0,class:"list-second"},_t={key:1,class:"list-second"},ht={class:"list-public"},xt=V(" 处理方式： "),kt={key:0},bt={key:1},gt={key:2},St={class:"list-public"},wt={class:"list-public"},$t={class:"list-public oe-flex"},Dt={key:3,class:"list-public"},Vt={key:0,class:"list-public"},Ct=V(" 会员在"),It={class:"refund-time"},Mt=V("内未响应，退款退货申请 将自动撤销。 "),Ft={class:"list-public"},Nt={class:"list-public"},Ut={class:"list-public"},jt={class:"list-public"},qt={class:"list-public"},zt={class:"list-public"},Yt={class:"list-public"},Et={class:"list-public"},Pt={key:0,class:"list-public"},Ot={key:1,class:"list-public"},Gt={key:7,class:"list-public"};F();var Tt=_({expose:[],setup(s){P.extend(Ue);const i=a(),r=h({}),d=h([]),u=h({reject:!1,returnGoods:!1,logisticsData:!1,application:!1,redelivery:!1}),n=h([]),c=h(0),v=h(1),_=h(3),x=h(""),k=h([]),V=h([]),C=async()=>{const{data:e}=await p({id:i.query.id,order_item_id:i.query.orderId});r.value=e.data;for(let s=0;s<n.value.length;s++)r.value.pay_type==n.value[s].key&&(r.value.payTypeName=n.value[s].name);r.value.afterSales.images&&(V.value=JSON.parse(r.value.afterSales.images)),I()};t().then((e=>{n.value=e.data.data}));const I=async()=>{const{data:e}=await f({order_id:r.value.afterSales.order_id,order_item_id:r.value.afterSales.order_item_id,order_after_sale_id:r.value.afterSales.id});k.value=e.data.data,k.value.reverse(),M(),1==r.value.afterSales.status&&1!=r.value.afterSales.type&&setInterval((()=>{M()}),1e3)},M=()=>{k.value.forEach((e=>{if(e.remark.province_name){const s=P(1e3*e.remark.start_time).add(c.value,"day").unix()-P().unix(),a=Math.floor(s/86400),t=Math.floor(s/3600%24),l=Math.floor(1e3*s/6e4%60),o=Math.floor(1e3*s/1e3%60);x.value=`${a}天${t}小时${l}分${o}秒`}}))},F=async()=>{await m({order_id:r.value.id,order_item_id:r.value.orderGoods[0].id,order_after_sale_id:r.value.afterSales.id}),e.success("操作成功!!"),C()},q=()=>{C()},z=()=>{u.value.redelivery=!0},Y=()=>{u.value.returnGoods=!0},E=async(e,s)=>{const{data:a}=await y({send_express_company_code:e,send_express_sn:s});d.value=a.data,u.value.logisticsData=!0};return O((()=>{(async()=>{const{data:e}=await o({key:"OrderBaseParam"});c.value=e.data.cancelSafeguard.value})(),C()})),je(((e,s)=>{const a=b("el-image"),t=b("el-button"),o=b("el-card"),i=b("el-col"),n=b("el-row"),c=b("el-tag");return g(),S(N,null,[r.value.afterSales?(g(),S(n,{key:0,gutter:24},{default:je((()=>[w(i,{xl:17,md:17,sm:17,xs:17},{default:je((()=>[w(n,null,{default:je((()=>[w(i,null,{default:je((()=>[w("div",qe,[w("div",ze,[w("div",Ye,[Ee,w("div",Pe,$(D(l)(r.value.afterSales.createtime)),1)]),w("div",Oe,[w("div",{class:["process-text",0==r.value.afterSales.status?"current-status":""]},$(r.value.afterSales.status>0?"处理维权申请":"待处理维权"),3),0==r.value.afterSales.status?(g(),S("div",Ge)):j("",!0),r.value.afterSales.status>0?(g(),S("div",Te,$(D(l)(r.value.afterSales.start_time)),1)):j("",!0)]),2==r.value.afterSales.type||3==r.value.afterSales.type?(g(),S("div",Be,[w("div",{class:["process-text",1==r.value.afterSales.status||3==r.value.afterSales.status?"current-status":""]},"会员退回商品 ",2),r.value.afterSales.status>1?(g(),S("div",He,$(D(l)(r.value.afterSales.user_shipments_time)),1)):j("",!0),1==r.value.afterSales.status?(g(),S("div",Ae)):j("",!0)])):j("",!0),3==r.value.afterSales.type?(g(),S("div",Re,[w("div",{class:["process-text",4==r.value.afterSales.status?"current-status":""]},"卖家发货 ",2),2==r.value.afterSales.status?(g(),S("div",Le,$(D(l)(r.value.afterSales.shop_shipments_time)),1)):j("",!0),4==r.value.afterSales.status?(g(),S("div",Je)):j("",!0)])):j("",!0),w("div",We,[Xe,2==r.value.afterSales.status?(g(),S(N,{key:0},[2==r.value.afterSales.status?(g(),S("div",Ze,$(D(l)(r.value.afterSales.protect_rights_time)),1)):j("",!0),Ke],64)):j("",!0)])]),w(o,{shadow:"never",class:"oe-flex-1 process-box-right"},{default:je((()=>[w("div",Qe,[w("div",es,[ss,w("div",as,[w("div",ts,[ls,0==r.value.afterSales.status?(g(),S("div",os," 店铺用户申请售后(维权) ")):j("",!0),1==r.value.afterSales.status?(g(),S("div",is," 店铺管理员通过申请(维权中) ")):j("",!0),2==r.value.afterSales.status?(g(),S("div",rs," 维权完成 ")):j("",!0),3==r.value.afterSales.status?(g(),S("div",ds," 用户发货 ")):j("",!0),-1==r.value.afterSales.status?(g(),S("div",us," 店铺管理员驳回申请(维权) ")):j("",!0),-2==r.value.afterSales.status?(g(),S("div",ns," 店铺用户关闭申请 ")):j("",!0)]),w("div",cs,[vs,1==r.value.afterSales.type?(g(),S("div",ps," 退款(仅退款不退货) ")):j("",!0),2==r.value.afterSales.type?(g(),S("div",fs," 退货退款 ")):j("",!0),3==r.value.afterSales.type?(g(),S("div",ms," 换货 ")):j("",!0)]),3==r.value.afterSales.type?(g(),S("div",ys,[_s,w("div",hs,$(r.value.afterSales.goods_sku_text?r.value.afterSales.goods_sku_text:"无"),1)])):j("",!0),w("div",xs,[ks,w("div",bs," ¥"+$(r.value.afterSales.refund_money),1)]),w("div",gs,[Ss,w("div",ws,$(r.value.afterSales.shop_user_apply_reason),1)]),w("div",$s,[Ds,w("div",Vs,[V.value.length?(g(!0),S(N,{key:0},U(V.value,((e,s)=>(g(),S(a,{key:s,class:"protection-img",fit:"cover",src:e},null,8,["src"])))),128)):(g(),S(N,{key:1},[Cs],64))])]),w("div",Is,[Ms,w("div",Fs,$(r.value.afterSales.sn),1)])]),"0"==r.value.afterSales.status&&"-1"!=r.value.afterSales.status?(g(),S(N,{key:0},["1"==r.value.afterSales.type?(g(),S(t,{key:0,type:"primary",onClick:s[1]||(s[1]=e=>{return s=1,v.value=s,void(u.value.reject=!0);var s})},{default:je((()=>[Ns])),_:1})):j("",!0),"2"==r.value.afterSales.type?(g(),S(t,{key:1,type:"primary",onClick:Y},{default:je((()=>[Us])),_:1})):j("",!0),"3"==r.value.afterSales.type?(g(),S(t,{key:2,type:"primary",onClick:Y},{default:je((()=>[js])),_:1})):j("",!0),w(t,{onClick:s[2]||(s[2]=e=>{return s=r.value.afterSales.type,_.value=s,void(u.value.application=!0);var s})},{default:je((()=>[qs])),_:1})],64)):j("",!0),"1"==r.value.afterSales.status||"3"==r.value.afterSales.status?(g(),S(N,{key:1},["2"==r.value.afterSales.type?(g(),S(t,{key:0,type:"primary",onClick:F},{default:je((()=>[zs])),_:1})):j("",!0),"3"==r.value.afterSales.type?(g(),S(t,{key:1,type:"primary",onClick:z},{default:je((()=>[Ys])),_:1})):j("",!0)],64)):j("",!0)]),w("div",Es,[Ps,w("div",Os,[w("div",Gs,[Ts,"1"==r.value.status?(g(),S("div",Bs,"等待发货")):j("",!0),"2"==r.value.status?(g(),S("div",Hs,"等待收货")):j("",!0),"0"==r.value.status?(g(),S("div",As,"等待付款")):j("",!0),"-1"==r.value.status?(g(),S("div",Rs,"已关闭")):j("",!0),"3"==r.value.status?(g(),S("div",Ls,"已完成")):j("",!0)]),w("div",Js,[Ws,w("div",Xs,$(r.value.order_sn),1)]),w("div",Zs,[Ks,r.value.pay_type?(g(),S("div",Qs,$(r.value.payTypeName),1)):(g(),S("div",ea,"无"))]),w("div",sa,[aa,w("div",ta,$(D(l)(r.value.paytime)),1)])]),"3"==r.value.afterSales.type||"2"==r.value.afterSales.type?(g(),S(N,{key:0},["4"==r.value.afterSales.status?(g(),S(t,{key:0,class:"e-color",onClick:s[3]||(s[3]=e=>E(r.value.afterSales.send_express_company_code,r.value.afterSales.send_express_sn))},{default:je((()=>[la])),_:1})):j("",!0),"3"==r.value.afterSales.status||"4"==r.value.afterSales.status?(g(),S(t,{key:1,class:"e-color",onClick:s[4]||(s[4]=e=>E(r.value.afterSales.express_company_code,r.value.afterSales.express_sn))},{default:je((()=>[oa])),_:1})):j("",!0)],64)):j("",!0)])])])),_:1})])])),_:1})])),_:1}),w(n,null,{default:je((()=>[w(i,null,{default:je((()=>[w(o,{shadow:"never",class:"product e-grid"},{default:je((()=>[ia,ra,(g(!0),S(N,null,U(r.value.orderGoods,((e,s)=>(g(),S("div",{class:"product-content oe-flex",key:Number(s)},[w("div",da,[w(a,{src:e.goods_image,fit:"cover",class:"content-img"},null,8,["src"]),w("div",ua,[w("div",na,$(e.goods_title),1),"2"==r.value.type?(g(),S(c,{key:0,size:"mini",color:"#D4EBFF",style:{color:"#55adff"}},{default:je((()=>[ca])),_:1})):j("",!0),"3"==r.value.type?(g(),S(c,{key:1,size:"mini",color:"#FBDDD1",style:{color:"#ec672e"}},{default:je((()=>[va])),_:1})):j("",!0),"1"==r.value.type?(g(),S(c,{key:2,size:"mini",color:"#E4FFF8",style:{color:"#1ad370"}},{default:je((()=>[pa])),_:1})):j("",!0),"4"==r.value.type?(g(),S(c,{key:3,size:"mini",color:"#F4DFD3",style:{color:"#ef864c"}},{default:je((()=>[fa])),_:1})):j("",!0),"5"==r.value.type?(g(),S(c,{key:4,size:"mini",color:"#F8E8CF",style:{color:"#dd8a0d"}},{default:je((()=>[ma])),_:1})):j("",!0),"6"==r.value.type?(g(),S(c,{key:5,size:"mini",color:"#E9D4F9",style:{color:"#8f29df"}},{default:je((()=>[ya])),_:1})):j("",!0)])]),w("div",_a,"¥"+$(e.goods_original_price),1),w("div",ha,"X"+$(e.goods_num),1),w("div",xa,$(0==e.goods_sku_text?"无":e.goods_sku_text),1),w("div",ka,"¥"+$(e.discount_fee),1),w("div",ba,"¥"+$((e.goods_price*e.goods_num).toFixed(2)),1),"0"==r.value.status?(g(),S("div",ga,"等待付款")):j("",!0),"0"!=r.value.status?(g(),S(N,{key:1},["1"==e.dispatch_status?(g(),S("div",Sa,"等待发货")):j("",!0),"2"==e.dispatch_status?(g(),S("div",wa,"等待收货")):j("",!0),"-1"==e.dispatch_status?(g(),S("div",$a,"已关闭")):j("",!0),"3"==e.dispatch_status?(g(),S("div",Da,"已完成")):j("",!0)],64)):j("",!0)])))),128)),w("div",Va,[w("div",Ca,"商品总计：¥"+$(r.value.goods_amount),1),w("div",Ia,"运费：¥"+$(r.value.dispatch_amount),1),Ma,Fa,w("div",Na,"实付款：¥"+$(r.value.pay_fee),1)])])),_:1})])),_:1})])),_:1})])),_:1}),w(i,{xl:7,md:7,sm:7,xs:7},{default:je((()=>[w(o,{shadow:"never",class:"consult-box"},{default:je((()=>[Ua,1==r.value.afterSales.type&&k.value.length?(g(!0),S(N,{key:0},U(k.value,((e,s)=>(g(),S("div",{class:"consult-box-list",key:s},[w("div",ja,$(D(l)(e.createtime)),1),w("div",qa,$(e.title),1),0==s?(g(),S(N,{key:0},[w("div",za,[Ya,1==r.value.afterSales.type?(g(),S("span",Ea," 退款(仅退款不退货) ")):j("",!0),2==r.value.afterSales.type?(g(),S("span",Pa," 退货退款 ")):j("",!0),3==r.value.afterSales.type?(g(),S("span",Oa," 换货 ")):j("",!0)]),w("div",Ga," 退款金额：¥"+$(r.value.afterSales.refund_money),1),w("div",Ta," 退款说明： "+$(r.value.afterSales.shop_user_apply_reason),1),w("div",Ba,[(g(!0),S(N,null,U(V.value,((e,s)=>(g(),S(a,{key:s,fit:"cover",src:e,class:"consult-img"},null,8,["src"])))),128))])],64)):j("",!0),e.remark.ext?(g(),S("div",Ha,"驳回原因： "+$(e.remark.ext),1)):j("",!0),e.remark.refund_money?(g(),S("div",Aa,"退款金额： ¥"+$(e.remark.refund_money),1)):j("",!0)])))),128)):j("",!0),2==r.value.afterSales.type&&k.value.length?(g(!0),S(N,{key:1},U(k.value,((e,s)=>(g(),S("div",{class:"consult-box-list",key:s},[w("div",Ra,$(D(l)(e.createtime)),1),e.remark.start_time?j("",!0):(g(),S("div",La,$(e.title),1)),e.remark.start_time?(g(),S("div",Ja," 商家 同意退货申请，请等待买家退货 ")):j("",!0),0==s?(g(),S(N,{key:2},[w("div",Wa,[Xa,1==r.value.afterSales.type?(g(),S("span",Za," 退款(仅退款不退货) ")):j("",!0),2==r.value.afterSales.type?(g(),S("span",Ka," 退货退款 ")):j("",!0),3==r.value.afterSales.type?(g(),S("span",Qa," 换货 ")):j("",!0)]),w("div",et," 退款金额："+$(r.value.afterSales.refund_money),1),w("div",st," 退款说明： "+$(r.value.afterSales.shop_user_apply_reason),1),w("div",at,[(g(!0),S(N,null,U(V.value,((e,s)=>(g(),S(a,{key:s,fit:"cover",class:"consult-img",src:e},null,8,["src"])))),128))])],64)):j("",!0),e.remark.ext?(g(),S("div",tt,"驳回原因： "+$(e.remark.ext),1)):j("",!0),e.remark.province_name?(g(),S(N,{key:4},[1==r.value.afterSales.status?(g(),S("div",lt,[ot,w("span",it,$(x.value),1),rt])):j("",!0),w("div",dt,"收货人："+$(e.remark.consignee),1),w("div",ut,"联系电话："+$(e.remark.phone),1),w("div",nt,"退货地址： "+$(e.remark.province_name)+$(e.remark.city_name)+$(e.remark.area_name)+$(e.remark.address),1)],64)):j("",!0),e.remark.express_company?(g(),S(N,{key:5},[w("div",ct,"快递公司："+$(e.remark.express_company),1),w("div",vt,"快递单号："+$(e.remark.express_sn),1),w("div",pt," 发货时间："+$(D(l)(e.remark.user_shipments_time)),1)],64)):j("",!0),e.remark.refund_money?(g(),S("div",ft,"退款金额： ¥"+$(e.remark.refund_money),1)):j("",!0)])))),128)):j("",!0),3==r.value.afterSales.type&&k.value.length?(g(!0),S(N,{key:2},U(k.value,((e,s)=>(g(),S("div",{class:"consult-box-list",key:s},[w("div",mt,$(D(l)(e.createtime)),1),e.remark.start_time?j("",!0):(g(),S("div",yt,$(e.title),1)),e.remark.start_time?(g(),S("div",_t," 商家 同意退货申请，请等待买家退货 ")):j("",!0),0==s?(g(),S(N,{key:2},[w("div",ht,[xt,1==r.value.afterSales.type?(g(),S("span",kt," 退款(仅退款不退货) ")):j("",!0),2==r.value.afterSales.type?(g(),S("span",bt," 退货退款 ")):j("",!0),3==r.value.afterSales.type?(g(),S("span",gt," 换货 ")):j("",!0)]),w("div",St," 退款金额：¥"+$(r.value.afterSales.refund_money),1),w("div",wt," 退款说明： "+$(r.value.afterSales.shop_user_apply_reason),1),w("div",$t,[(g(!0),S(N,null,U(V.value,((e,s)=>(g(),S(a,{key:s,fit:"cover",class:"consult-img",src:e},null,8,["src"])))),128))])],64)):j("",!0),e.remark.ext?(g(),S("div",Dt,"驳回原因： "+$(e.remark.ext),1)):j("",!0),e.remark.province_name?(g(),S(N,{key:4},[1==r.value.afterSales.status?(g(),S("div",Vt,[Ct,w("span",It,$(x.value),1),Mt])):j("",!0),w("div",Ft,"收货人："+$(e.remark.consignee),1),w("div",Nt,"联系电话："+$(e.remark.phone),1),w("div",Ut,"退货地址： "+$(e.remark.province_name)+$(e.remark.city_name)+$(e.remark.area_name)+$(e.remark.address),1)],64)):j("",!0),e.remark.express_company?(g(),S(N,{key:5},[w("div",jt,"快递公司："+$(e.remark.express_company),1),w("div",qt,"快递单号："+$(e.remark.express_sn),1),w("div",zt," 发货时间："+$(D(l)(e.remark.user_shipments_time)),1)],64)):j("",!0),e.remark.send_express_company?(g(),S(N,{key:6},[w("div",Yt,"快递公司："+$(e.remark.send_express_company),1),w("div",Et,"快递单号："+$(e.remark.send_express_sn),1),1==e.user_id?(g(),S("div",Pt," 发货时间："+$(D(l)(e.remark.shop_shipments_time)),1)):j("",!0),2==e.user_id?(g(),S("div",Ot," 发货时间："+$(D(l)(e.remark.user_shipments_time)),1)):j("",!0)],64)):j("",!0),e.remark.refund_money?(g(),S("div",Gt,"退款金额： ¥"+$(e.remark.refund_money),1)):j("",!0)])))),128)):j("",!0)])),_:1})])),_:1})])),_:1})):j("",!0),w(J,{show:u.value.reject,"onUpdate:show":s[5]||(s[5]=e=>u.value.reject=e),operationNum:v.value,option:r.value,onUpdateData:q},null,8,["show","operationNum","option"]),w(ce,{show:u.value.returnGoods,"onUpdate:show":s[6]||(s[6]=e=>u.value.returnGoods=e),option:r.value,onUpdateData:q},null,8,["show","option"]),w(he,{show:u.value.application,"onUpdate:show":s[7]||(s[7]=e=>u.value.application=e),operationNum:_.value,option:r.value,onUpdateData:q},null,8,["show","operationNum","option"]),w(Ne,{show:u.value.redelivery,"onUpdate:show":s[8]||(s[8]=e=>u.value.redelivery=e),currentItem:r.value,onUpdateData:q},null,8,["show","currentItem"]),w(G,{show:u.value.logisticsData,"onUpdate:show":s[9]||(s[9]=e=>u.value.logisticsData=e),logisticsList:d.value},null,8,["show","logisticsList"])],64)}))}});Tt.__scopeId="data-v-176fa0bf";export default Tt;
