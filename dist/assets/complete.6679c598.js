import{a as e,l,w as a,m as t,S as s,b as o,o as d,c as i,g as u,Z as r,F as n,P as c,X as m,t as v,u as p,f,s as y,k as x,p as g,h as _,d as h}from"./vendor.71e19cde.js";import{u as k,j as b,a as C,az as w,z as S,f as V,ay as z}from"./index.a53c91c6.js";import{c as T,a as U,b as F}from"./order.28ff7f57.js";import{r as j}from"./member.c7d788b5.js";import{_ as N,a as I}from"./journal.vue_vue&type=script&setup=true&lang.e59fd4d4.js";import{_ as D}from"./logistics-data.45ba351c.js";import{_ as E,a as G,b as P,c as q,d as K,e as R}from"./consignee-information.df2fa79c.js";import"./reset-time.7778decd.js";const L=x();g("data-v-46718f22");const M={class:"date-box e-grid oe-flex"},A=u("div",{class:"form-text"},"订单编号",-1),B={class:"date-box e-grid"},O={class:"date-box e-grid"},X=u("div",{class:"form-text"},"下单时间",-1),Z={class:"oe-flex e-grid"},H=u("div",{class:"form-text"},"维权状态",-1),J={class:"oe-flex e-grid"},Q=u("div",{class:"form-text"},"商品类型",-1),W={class:"oe-flex e-grid"},Y=u("div",{class:"form-text"},"支付方式",-1),$={class:"oe-flex e-grid"},ee=m("搜索"),le={class:"oe-flex oe-row-between box-title"},ae=u("span",{class:"title-all"},"已完成",-1),te={class:"title-text"},se=m("刷新"),oe=m(" （注：点击刷新后，将计算选中商品的实付金额，计算公式：所选商品实付金额*数量相加 ） "),de=m("导出"),ie={class:"order-list-box"},ue={class:"oe-flex list-title"},re=m(" 商品信息"),ne=m(" 数量/单价 "),ce=m(" 维权 "),me=m(" 订单状态 "),ve=m(" 配送方式 "),pe=m(" 实际付款 "),fe=m(" 收货人 "),ye=m(" 操作 "),xe={class:"oe-flex"},ge=u("span",null,"订单来源：",-1),_e={class:"oe-flex header-right"},he=m("日志"),ke=m("备注"),be={class:"oe-flex commodity-box oe-flex-8"},Ce={class:"commodity-right"},we={class:"commodity-right-text"},Se=m("虚拟"),Ve=m("卡密"),ze=m("实体"),Te=m("计时/次"),Ue=m("预约"),Fe=m("批发"),je={class:"quantity-price oe-flex-4 frame"},Ne={class:"list-bottom"},Ie={class:"oe-flex-4 frame"},De={key:0},Ee={key:1},Ge={key:2},Pe={class:"state-box oe-flex-4 frame"},qe={key:0,class:"state-text"},Ke={key:0,class:"state-text"},Re={key:1,class:"state-text"},Le={key:2},Me={key:3},Ae={class:"state-box oe-flex-4 frame"},Be={key:0},Oe={key:1},Xe={key:2},Ze=u("br",null,null,-1),He=u("br",null,null,-1),Je={key:0},Qe={class:"oe-flex oe-flex-wrap"},We=m("查看 "),Ye=m("立即发货"),$e={style:{"margin-top":"14px"},class:"oe-flex oe-flex-wrap"},el=m("退款 "),ll=m("修改地址"),al=m("查看 "),tl={key:2,class:"oe-flex oe-flex-wrap"},sl=m("查看 "),ol=m(" 确定收货 "),dl={key:3},il={class:"oe-flex oe-flex-wrap"},ul=m("查看 "),rl=m("确认付款"),nl={style:{"margin-top":"14px"},class:"oe-flex oe-flex-wrap"},cl=m("改价"),ml=m("关闭");_();var vl=e({expose:[],setup(e){const x=k(),g=b(),{pagination:_,handleSizeChange:vl,handleCurrentChange:pl}=C(),fl=l({orderSwitch:"订单编号",orderNumber:"",receivingType:"收货人姓名",consignee:"",timeType:"支付时间",time:"",merchantName:"",merchantTitle:"",safeguarding:"",commodityType:"",deliveryMode:"",payment:"",orderStatus:"",orderStore:"",region:"",orderType:""}),yl=l({orderSwitch:"订单编号",orderNumber:"",receivingType:"收货人姓名",consignee:"",timeType:"支付时间",time:"",merchantName:"",merchantTitle:"",safeguarding:"",commodityType:"",deliveryMode:"",payment:"",orderStatus:"",orderStore:"",region:"",orderType:""}),xl=l([]),gl=l([]),_l=async()=>{const e=["",""];fl.value.time.length&&(e[0]=h(fl.value.time[0]).unix().toString(),e[1]=h(fl.value.time[1]).unix().toString());const l={order_sn:fl.value.orderNumber,phone:"收货人手机号码"==fl.value.receivingType?fl.value.consignee:"",consignee:"收货人姓名"==fl.value.receivingType?fl.value.consignee:"",status:"3",pay_type:fl.value.payment,type:fl.value.commodityType,express_nos:"物流单号"==fl.value.orderSwitch?fl.value.orderNumber:"",page:_.currentPage,limit:_.pageSize,createtime:e};""!=jl.value&&(l.user_id=jl.value),yl.value=l;const{data:a}=await T(l);0==a.code&&(gl.value=a.data.data,gl.value.forEach((e=>{e.select=!1})),_.total=a.data.total);for(let t=0;t<gl.value.length;t++){for(let e=0;e<Cl.value.length;e++)gl.value[t].platform==Cl.value[e].code&&(gl.value[t].img_url=Cl.value[e].img_url,gl.value[t].sourceName=Cl.value[e].name);for(let e=0;e<xl.value.length;e++)gl.value[t].pay_type==xl.value[e].key&&(gl.value[t].payTypeName=xl.value[e].name)}};w().then((e=>{xl.value=e.data.data}));const hl=()=>{_.currentPage=1,_l()},kl=l([]);l(!1);const bl=()=>{fl.value.orderSwitch="订单编号",fl.value.orderNumber="",fl.value.receivingType="收货人姓名",fl.value.consignee="",fl.value.timeType="支付时间",fl.value.time=0,fl.value.merchantName="",fl.value.merchantTitle="",fl.value.safeguarding="",fl.value.commodityType="",fl.value.deliveryMode="",fl.value.payment="",fl.value.orderStatus="",fl.value.orderStore="",fl.value.region="",fl.value.orderType="",jl.value="",_.currentPage=1,_l()},Cl=l([]),wl=l({}),Sl=l([]),Vl=l([]),zl=l(0),Tl=l(0),Ul=l({remarksState:!1,refundState:!1,confirmReceipt:!1,deliverGoods:!1,priceChange:!1,logisticsData:!1,journal:!1,address:!1,export:!1}),Fl=l(0),jl=l(""),Nl=(e,l)=>{wl.value=l,zl.value=e,Ul.value.remarksState=!0},Il=(e,l)=>{wl.value=l,Tl.value=e,Ul.value.confirmReceipt=!0},Dl=e=>{x.push({path:"/order/management/orderDetails",query:{id:e.id}})},{isSelectAll:El,selectIds:Gl,selectItems:Pl}=S(gl);a(El,(()=>{kl.value=Pl.value})),a(Pl,(()=>{kl.value=Pl.value}));const ql=()=>{Fl.value=0,kl.value.forEach((e=>{Fl.value+=Number(e.goods_amount)}))};return j({page:1,limit:100}).then((e=>{Cl.value=e.data.data.data})),a([()=>_.currentPage,()=>_.pageSize],(()=>{_l()})),t((()=>{g.query.user_id&&(jl.value=g.query.user_id),_l()})),s("resetOrderList",_l),L(((e,l)=>{const a=o("el-input"),t=o("el-col"),s=o("el-option"),g=o("el-select"),h=o("el-date-picker"),k=o("el-button"),b=o("el-row"),C=o("el-card"),w=o("el-checkbox"),S=o("el-image"),T=o("el-tag"),j=o("custom-button"),_l=o("el-empty"),kl=o("el-pagination");return d(),i(n,null,[u(C,{shadow:"never",class:"order-head"},{default:L((()=>[u(b,{gutter:20},{default:L((()=>[u(t,{xl:{span:"4_8"},md:8,sm:12,xs:12},{default:L((()=>[u("div",M,[A,u(a,{onKeyup:r(hl,["enter"]),placeholder:"请输入",class:"oe-flex-1",modelValue:fl.value.orderNumber,"onUpdate:modelValue":l[1]||(l[1]=e=>fl.value.orderNumber=e)},null,8,["onKeyup","modelValue"])])])),_:1}),u(t,{xl:{span:"4_8"},md:8,sm:12,xs:12},{default:L((()=>[u("div",B,[u(g,{modelValue:fl.value.receivingType,"onUpdate:modelValue":l[2]||(l[2]=e=>fl.value.receivingType=e),placeholder:"请选择",class:"selectFrom",clearable:""},{default:L((()=>[u(s,{label:"收货人姓名",value:"收货人姓名"}),u(s,{label:"收货人手机号码",value:"收货人手机号码"})])),_:1},8,["modelValue"]),u(a,{onKeyup:r(hl,["enter"]),placeholder:"请输入",modelValue:fl.value.consignee,"onUpdate:modelValue":l[3]||(l[3]=e=>fl.value.consignee=e)},null,8,["onKeyup","modelValue"])])])),_:1}),u(t,{xl:{span:"9_6"},md:8,sm:12,xs:12},{default:L((()=>[u("div",O,[X,u(h,{modelValue:fl.value.time,"onUpdate:modelValue":l[4]||(l[4]=e=>fl.value.time=e),"value-format":"timestamp",type:"datetimerange",class:"oe-flex-1","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue"])])])),_:1}),u(t,{xl:{span:"4_8"},md:8,sm:12,xs:12},{default:L((()=>[u("div",Z,[H,u(g,{modelValue:fl.value.safeguarding,"onUpdate:modelValue":l[5]||(l[5]=e=>fl.value.safeguarding=e),placeholder:"全部",class:"oe-flex-1",clearable:""},{default:L((()=>[u(s,{label:"全部",value:"全部"}),u(s,{label:"未维权",value:"未维权"}),u(s,{label:"维权中",value:"维权中"}),u(s,{label:"维权完后",value:"维权完后"})])),_:1},8,["modelValue"])])])),_:1}),u(t,{xl:{span:"4_8"},md:8,sm:12,xs:12},{default:L((()=>[u("div",J,[Q,u(g,{modelValue:fl.value.commodityType,"onUpdate:modelValue":l[6]||(l[6]=e=>fl.value.commodityType=e),placeholder:"全部",class:"oe-flex-1",clearable:""},{default:L((()=>[u(s,{label:"全部",value:" "}),u(s,{label:"实体商品",value:"1"}),u(s,{label:"虚拟商品",value:"2"})])),_:1},8,["modelValue"])])])),_:1}),u(t,{xl:{span:"4_8"},md:8,sm:12,xs:12},{default:L((()=>[u("div",W,[Y,u(g,{modelValue:fl.value.payment,"onUpdate:modelValue":l[7]||(l[7]=e=>fl.value.payment=e),placeholder:"全部",class:"oe-flex-1",clearable:""},{default:L((()=>[(d(!0),i(n,null,c(xl.value,(e=>(d(),i(s,{label:e.name,value:e.key,key:e.key},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])])),_:1}),u(t,{xl:{span:"4_8"},md:8,sm:12,xs:12},{default:L((()=>[u("div",$,[u(k,{type:"primary",onClick:hl},{default:L((()=>[ee])),_:1}),u("div",{onClick:bl,class:"reset-text"},"重置条件")])])),_:1})])),_:1})])),_:1}),u(C,{shadow:"never",class:"order-box custom-crad-container custom-card-page"},{default:L((()=>[u(b,{gutter:24},{default:L((()=>[u(t,{lg:24},{default:L((()=>[u("div",le,[u("div",null,[ae,u("span",te,[m("总订单数："+v(p(_).total)+" 实付金额统计："+v(Fl.value.toFixed(2))+"元 ",1),u(k,{type:"text",onClick:ql},{default:L((()=>[se])),_:1}),oe])]),u(k,{type:"primary",class:"export-btn",onClick:l[8]||(l[8]=e=>Ul.value.export=!0)},{default:L((()=>[de])),_:1})])])),_:1}),u("div",ie,[u("div",ue,[u(w,{modelValue:p(El),"onUpdate:modelValue":l[9]||(l[9]=e=>f(El)?El.value=e:null),class:"selection-all"},null,8,["modelValue"]),u(b,{class:"list-title-right"},{default:L((()=>[u(t,{xl:15,md:15,sm:15,xs:15},{default:L((()=>[u(b,null,{default:L((()=>[u(t,{xl:8,md:8,sm:8,xs:8},{default:L((()=>[re])),_:1}),u(t,{xl:4,md:4,sm:4,xs:4},{default:L((()=>[ne])),_:1}),u(t,{xl:4,md:4,sm:4,xs:4},{default:L((()=>[ce])),_:1}),u(t,{xl:4,md:4,sm:4,xs:4},{default:L((()=>[me])),_:1}),u(t,{xl:4,md:4,sm:4,xs:4},{default:L((()=>[ve])),_:1})])),_:1})])),_:1}),u(t,{xl:3,md:3,sm:3,xs:3},{default:L((()=>[pe])),_:1}),u(t,{xl:3,md:3,sm:3,xs:3},{default:L((()=>[fe])),_:1}),u(t,{xl:3,md:3,sm:3,xs:3},{default:L((()=>[ye])),_:1})])),_:1})]),gl.value.length?(d(!0),i(n,{key:0},c(gl.value,((e,l)=>(d(),i("div",{class:"list-box",key:l},[u(b,{class:"list-header oe-flex"},{default:L((()=>[u(t,{xl:9,lg:15,md:15,sm:15,xs:15},{default:L((()=>[u("div",xe,[u(w,{modelValue:e.select,"onUpdate:modelValue":l=>e.select=l,class:"selection-single"},null,8,["modelValue","onUpdate:modelValue"]),m(" 订单编号："+v(e.order_sn),1),u("span",{class:"is-color copy-tetx",onClick:l=>(e=>{const l=document.createElement("input");document.body.appendChild(l),l.setAttribute("value",e),l.select(),document.execCommand("copy")&&document.execCommand("copy"),document.body.removeChild(l),z({title:"成功",message:"复制成功",type:"success",duration:2e3})})(e.order_sn)}," 复制 ",8,["onClick"]),ge,u(S,{src:e.img_url,alt:""},null,8,["src"])])])),_:2},1024),u(t,{xl:10,lg:5,md:5,sm:5,xs:5},{default:L((()=>[u("div",null,"下单时间："+v(p(V)(e.createtime)),1)])),_:2},1024),u(t,{xl:5,lg:4,md:4,sm:4,xs:4,class:"header-right-box"},{default:L((()=>[u("div",_e,[u(k,{type:"text",onClick:l=>(async e=>{const{data:l}=await U({order_id:e.id});Sl.value=l.data.data,Ul.value.journal=!0})(e)},{default:L((()=>[he])),_:2},1032,["onClick"]),u(k,{type:"text",class:"is-left",onClick:l=>Nl(0,e)},{default:L((()=>[ke])),_:2},1032,["onClick"])])])),_:2},1024)])),_:2},1024),u(b,{class:"box-content"},{default:L((()=>[u(t,{xl:15,md:15,sm:15,xs:15,class:"layer-content"},{default:L((()=>[(d(!0),i(n,null,c(e.orderGoods,((l,a)=>(d(),i("div",{key:Number(a),class:["loop-box",1==e.orderGoods.length?"completely":""]},[u("div",be,[u(S,{src:l.goods_image,fit:"cover",class:"order-information-img"},null,8,["src"]),u("div",Ce,[u("div",we,v(l.goods_title),1),"2"==e.type?(d(),i(T,{key:0,size:"mini",color:"#D4EBFF",style:{color:"#55adff"}},{default:L((()=>[Se])),_:1})):y("",!0),"3"==e.type?(d(),i(T,{key:1,size:"mini",color:"#FBDDD1",style:{color:"#ec672e"}},{default:L((()=>[Ve])),_:1})):y("",!0),"1"==e.type?(d(),i(T,{key:2,size:"mini",color:"#E4FFF8",style:{color:"#1ad370"}},{default:L((()=>[ze])),_:1})):y("",!0),"4"==e.type?(d(),i(T,{key:3,size:"mini",color:"#F4DFD3",style:{color:"#ef864c"}},{default:L((()=>[Te])),_:1})):y("",!0),"5"==e.type?(d(),i(T,{key:4,size:"mini",color:"#F8E8CF",style:{color:"#dd8a0d"}},{default:L((()=>[Ue])),_:1})):y("",!0),"6"==e.type?(d(),i(T,{key:5,size:"mini",color:"#E9D4F9",style:{color:"#8f29df"}},{default:L((()=>[Fe])),_:1})):y("",!0)])]),u("div",je,[u("div",null,[u("div",null,"¥"+v(l.goods_original_price),1),u("div",Ne,"x"+v(l.goods_num),1)])]),u("div",Ie,[u("div",null,["1"==l.after_sale_status?(d(),i("div",De,"维权中")):y("",!0),"0"==l.after_sale_status?(d(),i("div",Ee,"-")):y("",!0),"2"==l.after_sale_status?(d(),i("div",Ge,"维权完成")):y("",!0),"0"!=l.after_sale_status?(d(),i("div",{key:3,onClick:a=>{return t=e,s=l.id,void x.push({path:"/order/management/protection-details",query:{id:t.id,orderId:s}});var t,s},class:"is-color touch-text list-bottom"}," 维权详情 ",8,["onClick"])):y("",!0)])]),u("div",Pe,["0"==e.status?(d(),i("div",qe,"等待付款")):y("",!0),"0"!=e.status?(d(),i(n,{key:1},["1"==l.dispatch_status?(d(),i("div",Ke,"等待发货")):y("",!0),"2"==l.dispatch_status?(d(),i("div",Re,"等待收货")):y("",!0),"-1"==l.dispatch_status?(d(),i("div",Le,"已关闭")):y("",!0),"3"==l.dispatch_status?(d(),i("div",Me,"已完成")):y("",!0)],64)):y("",!0)]),u("div",Ae,[u("div",null,["1"==e.delivery_type?(d(),i("div",Be,"快递")):y("",!0),"3"==e.delivery_type?(d(),i("div",Oe,"自提")):y("",!0),"2"==e.delivery_type?(d(),i("div",Xe,"同城配送")):y("",!0),l.express_no?(d(),i("div",{key:3,class:"is-color list-bottom touch-text",onClick:e=>(async(e,l)=>{const{data:a}=await F({send_express_company_code:e,send_express_sn:l});Vl.value=a.data,Ul.value.logisticsData=!0})(l.express_code,l.express_no)},"物流信息 ",8,["onClick"])):y("",!0)])])],2)))),128))])),_:2},1024),u(t,{xl:3,md:3,sm:3,xs:3,class:"frame"},{default:L((()=>[u("div",null,[u("div",null,"¥"+v(e.pay_fee),1),Ze,u("div",null,v(e.payTypeName),1)])])),_:2},1024),u(t,{xl:3,md:3,sm:3,xs:3,class:"frame"},{default:L((()=>[u("div",null,[u("div",null,v(e.consignee),1),He,u("div",null,v(e.phone),1)])])),_:2},1024),u(t,{xl:3,md:3,sm:3,xs:3,class:"frame"},{default:L((()=>["1"==e.status?(d(),i("div",Je,[u("div",Qe,[u(j,{icon:"ad-see",color:"#FE6712",onClick:l=>Dl(e)},{default:L((()=>[We])),_:2},1032,["onClick"]),u(k,{size:"small",type:"primary",icon:"ad-immediately",class:"btn-deviation",onClick:l=>(e=>{wl.value=e,Ul.value.deliverGoods=!0})(e)},{default:L((()=>[Ye])),_:2},1032,["onClick"])]),u("div",$e,[u(j,{icon:"ad-refund",color:"#ff0000",onClick:l=>(e=>{wl.value=e,Ul.value.refundState=!0})(e)},{default:L((()=>[el])),_:2},1032,["onClick"]),u(j,{icon:"ad-change-address",color:"#2db6f5",class:"public-move-left btn-deviation",onClick:l=>(e=>{Ul.value.address=!0,wl.value=e})(e)},{default:L((()=>[ll])),_:2},1032,["onClick"])])])):y("",!0),"3"==e.status||"-1"==e.status?(d(),i(j,{key:1,icon:"ad-see",color:"#FE6712",onClick:l=>Dl(e)},{default:L((()=>[al])),_:2},1032,["onClick"])):y("",!0),"2"==e.status?(d(),i("div",tl,[u(j,{icon:"ad-see",color:"#FE6712",onClick:l=>Dl(e)},{default:L((()=>[sl])),_:2},1032,["onClick"]),u(k,{size:"small",type:"primary",class:"btn-deviation",icon:"ad-confirm-receipt",onClick:l=>Il(0,e)},{default:L((()=>[ol])),_:2},1032,["onClick"])])):y("",!0),"0"==e.status?(d(),i("div",dl,[u("div",il,[u(j,{icon:"ad-see",color:"#FE6712",onClick:l=>Dl(e)},{default:L((()=>[ul])),_:2},1032,["onClick"]),u(j,{class:"btn-deviation",icon:"ad-determine",color:"#2db6f5",onClick:l=>Il(1,e)},{default:L((()=>[rl])),_:2},1032,["onClick"])]),u("div",nl,[u(k,{size:"small",type:"primary",icon:"ad-price-change",onClick:l=>(e=>{wl.value=e,Ul.value.priceChange=!0})(e)},{default:L((()=>[cl])),_:2},1032,["onClick"]),u(j,{icon:"ad-close",color:"#ff0000",class:"btn-deviation",onClick:l=>Nl(1,e)},{default:L((()=>[ml])),_:2},1032,["onClick"])])])):y("",!0)])),_:2},1024)])),_:2},1024)])))),128)):(d(),i(_l,{key:1,class:"oe-m-t-30","image-size":200})),u(D,{show:Ul.value.logisticsData,"onUpdate:show":l[10]||(l[10]=e=>Ul.value.logisticsData=e),logisticsList:Vl.value},null,8,["show","logisticsList"]),u(E,{show:Ul.value.remarksState,"onUpdate:show":l[11]||(l[11]=e=>Ul.value.remarksState=e),close:zl.value,currentItem:wl.value},null,8,["show","close","currentItem"]),u(G,{show:Ul.value.deliverGoods,"onUpdate:show":l[12]||(l[12]=e=>Ul.value.deliverGoods=e),currentItem:wl.value},null,8,["show","currentItem"]),u(P,{show:Ul.value.refundState,"onUpdate:show":l[13]||(l[13]=e=>Ul.value.refundState=e),currentItem:wl.value},null,8,["show","currentItem"]),u(q,{show:Ul.value.confirmReceipt,"onUpdate:show":l[14]||(l[14]=e=>Ul.value.confirmReceipt=e),determine:Tl.value,currentItem:wl.value},null,8,["show","determine","currentItem"]),u(K,{show:Ul.value.priceChange,"onUpdate:show":l[15]||(l[15]=e=>Ul.value.priceChange=e),option:wl.value},null,8,["show","option"]),u(N,{show:Ul.value.journal,"onUpdate:show":l[16]||(l[16]=e=>Ul.value.journal=e),option:Sl.value},null,8,["show","option"]),u(R,{show:Ul.value.address,"onUpdate:show":l[17]||(l[17]=e=>Ul.value.address=e),currentItem:wl.value},null,8,["show","currentItem"]),u(I,{show:Ul.value.export,"onUpdate:show":l[18]||(l[18]=e=>Ul.value.export=e),option:yl.value},null,8,["show","option"])])])),_:1}),u(kl,{onSizeChange:p(vl),onCurrentChange:p(pl),class:"e-grid paging-box","page-sizes":p(_).pageSizes,"page-size":p(_).pageSize,background:"",layout:"total, prev, pager, next,sizes, jumper",total:p(_).total,"current-page":p(_).currentPage},null,8,["onSizeChange","onCurrentChange","page-sizes","page-size","total","current-page"])])),_:1})],64)}))}});vl.__scopeId="data-v-46718f22";export default vl;
