import{a as e,c as a}from"./index.a53c91c6.js";import{_ as l}from"./statistical-export.2f509173.js";import{r as t,a as s,b as n}from"./finance.2ba7f690.js";import{a as o,l as u,w as r,m as c,b as d,o as i,c as p,g as v,t as m,F as g,P as b,s as y,u as f,k as h,p as _,X as x,h as w}from"./vendor.71e19cde.js";const C=h();_("data-v-b98d9e82");const z=x(" 营收收入仅记录实际发生的交易，不包含维权期未满已购买的商品,每日的对账单会在“次日凌晨”进行更新，每月的对账单会在“次月首日凌晨”进行更新 "),k=x("导出报表"),P={class:"revenue"},V=v("span",{class:"revenue-text"},"营收总数：",-1),S={class:"red-socks"},j=v("span",{class:"grey-text"},"（营收总数=收入-支出）",-1),U={class:"oe-flex"},A=v("div",{class:"search-tetx"},"款项来源",-1),B={class:"income-text"},I={class:"expenditure-text"},W={class:"oe-flex source-box"},E=x("查看 ");w();var F=o({expose:[],setup(o){const{pagination:h,handleSizeChange:_,handleCurrentChange:x}=e(),w=u(),F=u(),L=u([]),R=u(),O=u([]),X=u([]),q=u(""),D=u(!1),G=u(""),H=u(""),J=e=>{N(e),T()},K=()=>{T()},M=e=>{h.currentPage=1,T()},N=async e=>{if(""!=e){const{data:a}=await t({date:e});L.value=a.data}else L.value=[],F.value=""},Q=async()=>{const{data:e}=await s({page:h.currentPage,limit:h.pageSize,search:{year:R.value,month:F.value,source_type:w.value},type:"revenue"});if(X.value.length){const a=new Blob([e]),l=window.URL.createObjectURL(a),t=document.createElement("a");t.style.display="none",t.href=l,t.setAttribute("download","营收报表.xlsx"),document.body.appendChild(t),t.click()}else a("暂无导出的数据！")},T=async()=>{const{data:e}=await n({search:{year:R.value,month:F.value,source_type:w.value},limit:h.pageSize,page:h.currentPage,type:"revenue",order:"",sort:""});q.value=e.data.income_sum,h.total=e.data.total,X.value=e.data.data,G.value=e.data.date};return r([()=>h.currentPage,()=>h.pageSize],(()=>{T()})),c((()=>{(async()=>{const{data:e}=await t({date:""});O.value=e.data})(),T()})),C(((e,a)=>{const t=d("el-col"),s=d("el-row"),n=d("el-button"),o=d("el-option"),u=d("el-select"),r=d("el-empty"),c=d("el-table-column"),N=d("el-image"),T=d("custom-button"),Y=d("el-table"),Z=d("el-pagination"),$=d("el-card");return i(),p(g,null,[v($,{shadow:"never",class:"revenue-box custom-card-page custom-crad-container"},{default:C((()=>[v(s,{class:"tips-box"},{default:C((()=>[v(t,{xl:24},{default:C((()=>[z])),_:1})])),_:1}),v(s,null,{default:C((()=>[v(t,{xl:24,class:"oe-flex oe-row-between"},{default:C((()=>[v("div",null,[v(n,{type:"primary",size:"small",onClick:Q},{default:C((()=>[k])),_:1}),v("span",P,[V,v("span",S,m(q.value?q.value:0)+"元",1),j])]),v("div",U,[A,v(u,{modelValue:w.value,"onUpdate:modelValue":a[1]||(a[1]=e=>w.value=e),placeholder:"全部",clearable:"",onChange:M},{default:C((()=>[v(o,{label:"微信支付",value:"WxPay"}),v(o,{label:"余额支付",value:"BalancePay"}),v(o,{label:"支付宝",value:"AliPay"})])),_:1},8,["modelValue"]),v(u,{modelValue:R.value,"onUpdate:modelValue":a[2]||(a[2]=e=>R.value=e),placeholder:"全部",clearable:"",onChange:J},{default:C((()=>[(i(!0),p(g,null,b(O.value,(e=>(i(),p(o,{key:e,label:e.name,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),v(u,{modelValue:F.value,"onUpdate:modelValue":a[3]||(a[3]=e=>F.value=e),placeholder:"全部",clearable:"",onChange:K},{default:C((()=>[(i(!0),p(g,null,b(L.value,(e=>(i(),p(o,{key:e,label:e.name,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])])),_:1})])),_:1}),v(Y,{class:"revenue-list",data:X.value,style:{width:"100%"}},{empty:C((()=>[v(r,{class:"oe-m-t-30",description:"暂无营收记录"})])),default:C((()=>[v(c,{prop:"belong_date",label:"日期"}),v(c,{prop:"name",label:"收入（元）"},{default:C((e=>[v("div",B,"+"+m(e.row.income),1)])),_:1}),v(c,{prop:"address",label:"支出（元）"},{default:C((e=>[v("div",I,m(0==e.row.outgo?"":"-")+m(e.row.outgo),1)])),_:1}),v(c,{prop:"revenue_sum",label:"总营收（元）"}),v(c,{prop:"revenue_sum",label:"款项来源"},{default:C((e=>[v("div",W,[(i(!0),p(g,null,b(e.row.source_type.split(","),((e,a)=>(i(),p(g,{key:a},["AliPay"==e?(i(),p(N,{key:0,src:"/addons/weitshop_shop/weshop/public/home/backend/images/finance/Alipay.png"})):y("",!0),"WxPay"==e?(i(),p(N,{key:1,src:"/addons/weitshop_shop/weshop/public/home/backend/images/finance/WeChat.png"})):y("",!0),"BalancePay"==e?(i(),p(N,{key:2,src:"/addons/weitshop_shop/weshop/public/home/backend/images/finance/balance.png"})):y("",!0)],64)))),128))])])),_:1}),v(c,{prop:"address",label:"操作"},{default:C((e=>[v(T,{icon:"ad-see",color:"#FE6712",onClick:a=>{return l=e.row.id,D.value=!0,void(H.value=l);var l}},{default:C((()=>[E])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),v(t,{lg:24,class:"paging-box"},{default:C((()=>[v(Z,{class:"e-grid","page-sizes":f(h).pageSizes,"page-size":f(h).pageSize,background:"","current-page":f(h).currentPage,layout:"total, prev, pager, next,sizes, jumper",total:f(h).total,onSizeChange:f(_),onCurrentChange:f(x)},null,8,["page-sizes","page-size","current-page","total","onSizeChange","onCurrentChange"])])),_:1})])),_:1}),v(l,{show:D.value,"onUpdate:show":a[4]||(a[4]=e=>D.value=e),currentId:H.value,type:"revenue",date_type:G.value},null,8,["show","currentId","date_type"])],64)}))}});F.__scopeId="data-v-b98d9e82";export default F;
