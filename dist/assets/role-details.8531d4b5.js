import{j as e,u as a,aN as l,aP as s,aV as t,c as u,i as r,aW as i}from"./index.a53c91c6.js";import{a as d,e as o,l as n,b as m,o as c,c as p,g as v,t as g,u as b,k as f,p as y,X as x,h as w}from"./vendor.71e19cde.js";const _=f();y("data-v-0b4e0014");const V={class:"title"},h={class:"oe-flex oe-row-center"},k=x("取消"),q=x("保存"),j=x("新增");w();var z=d({expose:[],setup(d){const f=e(),y=a(),x=o((()=>{var e;return void 0!==(null==(e=f.query)?void 0:e.id)})),w=n({name:"",explain:"",rules:[]}),z={name:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],explain:[{required:!0,message:"请输入角色描述",trigger:"blur"},{min:5,max:50,message:"长度在 5 到 50 个字符",trigger:"blur"}],rules:[{type:"array",required:!0,message:"请至少选择一个权限项",trigger:"change"}]},C=n([]);l().then((e=>C.value=e.data.data));x.value&&(async()=>{const{data:e}=await s(f.query.id);e.data.rules=e.data.rules.map((e=>Number(e))),w.value=e.data})();const U=n(),N=async()=>{await U.value.validate(),await t(w.value),u.success({type:"success",message:"添加成功!!",duration:1500}),await r(1500),y.back()},P=async()=>{await U.value.validate(),await i(w.value),u.success({type:"success",message:"修改成功!!",duration:1500}),await r(1500),y.back()};return _(((e,a)=>{const l=m("el-input"),s=m("el-form-item"),t=m("el-cascader-panel"),u=m("el-card"),r=m("el-button"),i=m("el-form");return c(),p(i,{model:w.value,rules:z,ref:U,"label-width":"79px","label-position":"right"},{default:_((()=>[v(u,{shadow:"never",class:"custom-crad-container"},{header:_((()=>[v("div",V,g(b(x)?"编辑":"新增")+"角色",1)])),default:_((()=>[v(s,{label:"角色名称",prop:"name"},{default:_((()=>[v(l,{modelValue:w.value.name,"onUpdate:modelValue":a[1]||(a[1]=e=>w.value.name=e)},null,8,["modelValue"])])),_:1}),v(s,{label:"角色描述",prop:"explain"},{default:_((()=>[v(l,{type:"textarea",modelValue:w.value.explain,"onUpdate:modelValue":a[2]||(a[2]=e=>w.value.explain=e)},null,8,["modelValue"])])),_:1}),v(s,{label:"权限",prop:"rules"},{default:_((()=>[v(t,{props:{multiple:!0,emitPath:!1,label:"title",value:"id"},modelValue:w.value.rules,"onUpdate:modelValue":a[3]||(a[3]=e=>w.value.rules=e),options:C.value},null,8,["modelValue","options"])])),_:1})])),_:1}),v(u,{shadow:"never",class:"oe-m-t-15"},{default:_((()=>[v("div",h,[v(r,{size:"medium",onClick:a[4]||(a[4]=e=>b(y).replace("roleManage"))},{default:_((()=>[k])),_:1}),b(x)?(c(),p(r,{key:0,size:"medium",type:"primary",onClick:P},{default:_((()=>[q])),_:1})):(c(),p(r,{key:1,size:"medium",type:"primary",onClick:N},{default:_((()=>[j])),_:1}))])])),_:1})])),_:1},8,["model"])}))}});z.__scopeId="data-v-0b4e0014";export default z;
