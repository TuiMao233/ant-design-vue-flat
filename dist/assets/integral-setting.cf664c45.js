import{aC as e,c as a,aB as l}from"./index.a53c91c6.js";import{i as t}from"./reset-time.7778decd.js";import{a as o,l as u,r,m as s,b as i,o as p,c as n,g as d,u as m,s as v,k as c,p as g,X as V,h as f}from"./vendor.71e19cde.js";const b=c();g("data-v-1d31e92f");const _={class:"integral-box"},x=d("div",{class:"integral-title"},"积分设置",-1),y=V("开启"),U=V("关闭"),T=V("%"),q=d("div",{class:"tips-text"},"返积分比例基数=商品实际付款金额",-1),k=V("不限制"),w=V("自定义"),C=V("积分"),h=d("div",{class:"tips-text"}," 会员积分大于等于此值时将无法继续增加，后台手动充值不限制，已持有积分不限制 ",-1),S=V("保存");f();var j=o({expose:[],setup(o){const c=u(),g=r({deductionProportion:[{required:!0,message:"请填写积分抵扣比例",trigger:"blur"}],open:[{required:!0,message:"请选择",trigger:"blur"}],integralTetx:[{required:!0,message:"请填写积分文字",trigger:"blur"}],proportion:[{required:!0,message:"请填写比例设置",trigger:"blur"}],deduction:[{required:!0,message:"请选择",trigger:"blur"}],amount:[{required:!0,message:"请填写最多抵扣",trigger:"blur"}]}),V=u({open:!0,integralTetx:"",inverse:"",proportion:"",upper:"",most:"",amount:"",deduction:"",deductionProportion:"",cumulative:!0}),f=()=>{c.value.validate((e=>{e&&j()}))},j=async()=>{const l={status:1==V.value.open?"1":"0",name:V.value.integralTetx,scale_status:V.value.inverse,scale:V.value.proportion,limit_status:V.value.upper,limit:V.value.most};await e("scoreSet",l),a.success("操作成功"),I()},I=async()=>{const{data:e}=await l({key:"scoreSet"}),a=e.data;V.value.open=1==a.status,V.value.integralTetx=a.name,V.value.inverse=a.scale_status,V.value.proportion=a.scale,V.value.upper=a.limit_status,V.value.most=a.limit,V.value.upper=V.value.upper.toString(),V.value.inverse=V.value.inverse.toString()};return s((()=>I())),b(((e,a)=>{const l=i("el-switch"),o=i("el-form-item"),u=i("el-input"),r=i("el-radio"),s=i("el-button"),j=i("el-card"),I=i("el-form");return p(),n("div",_,[d(I,{ref:c,class:"setting-from",rules:m(g),model:V.value,"label-width":"110px"},{default:b((()=>[d(j,{shadow:"never"},{default:b((()=>[x,d(o,{label:"积分",prop:"open"},{default:b((()=>[d(l,{modelValue:V.value.open,"onUpdate:modelValue":a[1]||(a[1]=e=>V.value.open=e),"active-color":"#13ce66","inactive-color":"#8C8C8C"},null,8,["modelValue"])])),_:1}),d(o,{label:"积分文字定义",prop:"integralTetx"},{default:b((()=>[d(u,{modelValue:V.value.integralTetx,"onUpdate:modelValue":a[2]||(a[2]=e=>V.value.integralTetx=e)},null,8,["modelValue"])])),_:1}),d(o,{label:"最按比例返积分"},{default:b((()=>[d(r,{modelValue:V.value.inverse,"onUpdate:modelValue":a[3]||(a[3]=e=>V.value.inverse=e),label:"1"},{default:b((()=>[y])),_:1},8,["modelValue"]),d(r,{modelValue:V.value.inverse,"onUpdate:modelValue":a[4]||(a[4]=e=>V.value.inverse=e),label:"0"},{default:b((()=>[U])),_:1},8,["modelValue"])])),_:1}),"1"==V.value.inverse?(p(),n(o,{key:0,label:"比例设置",prop:"proportion"},{default:b((()=>[d(u,{modelValue:V.value.proportion,"onUpdate:modelValue":a[5]||(a[5]=e=>V.value.proportion=e),class:"proportion-inp",type:"number",onInput:a[6]||(a[6]=e=>V.value.proportion=m(t)(V.value.proportion))},{append:b((()=>[T])),_:1},8,["modelValue"]),q])),_:1})):v("",!0),d(o,{label:"积分上限"},{default:b((()=>[d(r,{modelValue:V.value.upper,"onUpdate:modelValue":a[7]||(a[7]=e=>V.value.upper=e),label:"1"},{default:b((()=>[k])),_:1},8,["modelValue"]),d(r,{modelValue:V.value.upper,"onUpdate:modelValue":a[8]||(a[8]=e=>V.value.upper=e),label:"2"},{default:b((()=>[w])),_:1},8,["modelValue"])])),_:1}),"2"==V.value.upper?(p(),n(o,{key:1,label:"最多可获得"},{default:b((()=>[d(u,{modelValue:V.value.most,"onUpdate:modelValue":a[9]||(a[9]=e=>V.value.most=e),class:"most-inp",type:"number",onInput:a[10]||(a[10]=e=>V.value.most=m(t)(V.value.most))},{append:b((()=>[C])),_:1},8,["modelValue"]),h])),_:1})):v("",!0),d(s,{type:"primary",onClick:f},{default:b((()=>[S])),_:1})])),_:1})])),_:1},8,["rules","model"])])}))}});j.__scopeId="data-v-1d31e92f";export default j;
