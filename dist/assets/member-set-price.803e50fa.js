import{q as e,d as l,O as a}from"./member.c7d788b5.js";import{j as o,u as s,l as t,c as d}from"./index.a53c91c6.js";import{i}from"./reset-time.7778decd.js";import{a as u,l as r,m as c,b as m,o as p,c as v,F as n,g as f,t as _,s as y,u as g,P as x,X as b,k as h,p as k,h as w}from"./vendor.71e19cde.js";const F=h();k("data-v-cc5a2b6c");const E=f("span",{style:{color:"#000"}},"会员价商品",-1),D={class:"oe-flex commodity-box"},V={class:"oe-flex member-name oe-flex-1"},z={class:"member-right"},C={class:"member-name-text"},I=b("虚拟"),P=b("卡密"),U=b("实体"),j=b("计时/次"),B=b("预约"),A=b("批发"),H={class:"is-color oe-flex-1"},T={class:"oe-flex-1"},q={class:"oe-flex-1"},N={class:"oe-flex-1"},O=b(" 商品状态："),X=b("待出售"),G=b("出售中"),J=b("仓库中"),K={class:"oe-flex"},L=f("div",{class:"switch-text"},"会员价",-1),M=b(),Q=b("元"),R=f("span",{style:{color:"#000"}},"会员价商品",-1),S={class:"oe-flex commodity-box"},W={class:"oe-flex member-name"},Y={class:"member-right"},Z={class:"oe-flex"},$={class:"member-name-text"},ee=f("div",{class:"specification"},"多规格",-1),le=b("虚拟"),ae=b("卡密"),oe=b("实体"),se=b("计时/次"),te=b("预约"),de=b("批发"),ie={class:"commodity-status"},ue=b(" 商品状态："),re=b("待出售"),ce=b("出售中"),me=b("仓库中"),pe={class:"product-box"},ve={class:"oe-flex"},ne={class:"oe-flex-1 product-text"},fe={class:"oe-flex-1 product-text"},_e={class:"oe-flex"},ye=f("div",{class:"switch-text"},"会员价",-1),ge=b(),xe=b("元"),be={class:"oe-flex oe-row-center"},he=b("取消"),ke=b("保存");w();var we=u({expose:[],setup(u){const h=r(),k=o(),w=s(),we=r(),Fe=r(!0),Ee=r([]),De=r({}),Ve=r(),ze=r({}),Ce=async()=>{const{data:e}=await l({page:1,limit:100});if(Ee.value=e.data.data,De.value.vip_price.info&&0==De.value.norms_type){Ee.value.forEach((e=>e.price=""));for(let e=0;e<Ee.value.length;e++)for(let l=0;l<De.value.vip_price.info.length;l++)Ee.value[e].id==De.value.vip_price.info[l].level_id&&(Ee.value[e].price=De.value.vip_price.info[l].price)}else Ve.value=Ee.value[0].id,Ee.value.forEach((e=>{e.option=t.cloneDeep(De.value.option),e.option.forEach((e=>{e.membershipPrice=""}))})),De.value.sku_vip_price&&De.value.sku_vip_price.forEach((e=>{Ee.value.forEach((l=>{e.level_id==l.id&&l.option.forEach((l=>{e.list.forEach((e=>{e.sku_id==l.id&&(l.membershipPrice=e.price)}))}))}))})),ze.value=Ee.value[0]},Ie=e=>{Ee.value.forEach((l=>{e==l.id&&(ze.value=l)}))},Pe=async()=>{if(0==De.value.norms_type){const e=[];Ee.value.forEach((l=>{e.push({level_id:l.id,price:l.price})})),await a({goods_id:we.value,status:Fe.value?"1":"0",member_price:e}),d.success("操作成功"),w.go(-1)}else{const e=[];Ee.value.forEach((l=>{l.option.forEach((a=>{e.push({goods_sku_id:a.id,level_id:l.id,price:a.membershipPrice})}))})),await a({goods_id:we.value,status:Fe.value?"1":"0",member_price:e}),d.success("操作成功"),w.go(-1)}};return c((()=>{we.value=k.query.id,(async()=>{const{data:l}=await e({id:we.value});De.value=l.data.data[0],Fe.value=1==De.value.vip_price_type,Ce()})()})),F(((e,l)=>{const a=m("el-col"),o=m("el-row"),s=m("el-image"),t=m("el-tag"),d=m("el-card"),u=m("el-switch"),r=m("el-table-column"),c=m("el-input"),k=m("el-table"),we=m("el-form-item"),Ce=m("el-form"),Ue=m("el-radio-button"),je=m("el-radio-group"),Be=m("el-button");return p(),v(n,null,[0==De.value.norms_type?(p(),v(n,{key:0},[f(d,{shadow:"never",class:"price-head"},{default:F((()=>[f(o,{gutter:20},{default:F((()=>[f(a,{xl:24,lg:24,md:24,sm:24,xs:24},{default:F((()=>[E])),_:1})])),_:1}),f(o,{gutter:20},{default:F((()=>[f(a,{xl:24,lg:24,md:24,sm:24,xs:24},{default:F((()=>[f("div",D,[f("div",V,[f(s,{src:De.value.main_picture,class:"member-name-img"},null,8,["src"]),f("div",z,[f("div",C,_(De.value.title),1),"2"==De.value.goods_type?(p(),v(t,{key:0,size:"mini",color:"#D4EBFF",style:{color:"#55adff"}},{default:F((()=>[I])),_:1})):y("",!0),"3"==De.value.goods_type?(p(),v(t,{key:1,size:"mini",color:"#FBDDD1",style:{color:"#ec672e"}},{default:F((()=>[P])),_:1})):y("",!0),"1"==De.value.goods_type?(p(),v(t,{key:2,size:"mini",color:"#E4FFF8",style:{color:"#1ad370"}},{default:F((()=>[U])),_:1})):y("",!0),"4"==De.value.goods_type?(p(),v(t,{key:3,size:"mini",color:"#F4DFD3",style:{color:"#ef864c"}},{default:F((()=>[j])),_:1})):y("",!0),"5"==De.value.goods_type?(p(),v(t,{key:4,size:"mini",color:"#F8E8CF",style:{color:"#dd8a0d"}},{default:F((()=>[B])),_:1})):y("",!0),"6"==De.value.goods_type?(p(),v(t,{key:5,size:"mini",color:"#E9D4F9",style:{color:"#8f29df"}},{default:F((()=>[A])),_:1})):y("",!0)])]),f("div",H,"价格: ¥"+_(De.value.price),1),f("div",T,"销量: "+_(De.value.sales),1),f("div",q,"库存: "+_(De.value.stock),1),f("div",N,[O,1==De.value.goods_state?(p(),v(n,{key:0},[X],64)):y("",!0),2==De.value.goods_state?(p(),v(n,{key:1},[G],64)):y("",!0),5==De.value.goods_state?(p(),v(n,{key:2},[J],64)):y("",!0)])])])),_:1})])),_:1})])),_:1}),f(d,{shadow:"never",class:"custom-card-page"},{default:F((()=>[f(o,{gutter:20},{default:F((()=>[f(a,{xl:24,lg:24,md:24,sm:24,xs:24},{default:F((()=>[f("div",K,[L,M,f(u,{modelValue:Fe.value,"onUpdate:modelValue":l[1]||(l[1]=e=>Fe.value=e)},null,8,["modelValue"])])])),_:1})])),_:1}),Fe.value?(p(),v(k,{key:0,ref:h,data:Ee.value,style:{width:"70%"},class:"price-list"},{default:F((()=>[f(r,{prop:"name",label:"等级名称"}),f(r,{prop:"name",label:"等级"}),f(r,{prop:"shop_user_num",label:"会员数"}),f(r,{prop:"address",label:"价格"},{default:F((e=>[f(c,{class:"grade-form-width",type:"number",modelValue:e.row.price,"onUpdate:modelValue":l=>e.row.price=l,onInput:l=>e.row.price=g(i)(e.row.price)},{append:F((()=>[Q])),_:2},1032,["modelValue","onUpdate:modelValue","onInput"])])),_:1})])),_:1},8,["data"])):y("",!0)])),_:1})],64)):y("",!0),1==De.value.norms_type?(p(),v(n,{key:1},[f(d,{shadow:"never",class:"price-head"},{default:F((()=>[f(o,{gutter:20},{default:F((()=>[f(a,{xl:8,lg:8,md:8,sm:8,xs:8},{default:F((()=>[R])),_:1})])),_:1}),f(o,{gutter:20},{default:F((()=>[f(a,{xl:24,lg:24,md:24,sm:24,xs:24},{default:F((()=>[f("div",S,[f("div",W,[f(s,{src:De.value.main_picture,class:"member-name-img"},null,8,["src"]),f("div",Y,[f("div",Z,[f("div",$,_(De.value.title),1),ee]),"2"==De.value.goods_type?(p(),v(t,{key:0,size:"mini",color:"#D4EBFF",style:{color:"#55adff"}},{default:F((()=>[le])),_:1})):y("",!0),"3"==De.value.goods_type?(p(),v(t,{key:1,size:"mini",color:"#FBDDD1",style:{color:"#ec672e"}},{default:F((()=>[ae])),_:1})):y("",!0),"1"==De.value.goods_type?(p(),v(t,{key:2,size:"mini",color:"#E4FFF8",style:{color:"#1ad370"}},{default:F((()=>[oe])),_:1})):y("",!0),"4"==De.value.goods_type?(p(),v(t,{key:3,size:"mini",color:"#F4DFD3",style:{color:"#ef864c"}},{default:F((()=>[se])),_:1})):y("",!0),"5"==De.value.goods_type?(p(),v(t,{key:4,size:"mini",color:"#F8E8CF",style:{color:"#dd8a0d"}},{default:F((()=>[te])),_:1})):y("",!0),"6"==De.value.goods_type?(p(),v(t,{key:5,size:"mini",color:"#E9D4F9",style:{color:"#8f29df"}},{default:F((()=>[de])),_:1})):y("",!0)])]),f("div",ie,[ue,1==De.value.goods_state?(p(),v(n,{key:0},[re],64)):y("",!0),2==De.value.goods_state?(p(),v(n,{key:1},[ce],64)):y("",!0),5==De.value.goods_state?(p(),v(n,{key:2},[me],64)):y("",!0)])])])),_:1})])),_:1}),f(o,{gutter:20},{default:F((()=>[f(a,{xl:8,lg:8,md:8,sm:8,xs:8},{default:F((()=>[f("div",pe,[f(Ce,{"label-width":"120px"},{default:F((()=>[f(we,{label:"商品规格："},{default:F((()=>[f("div",ve,[(p(!0),v(n,null,x(De.value.option[0].titles,((e,l,a)=>(p(),v("div",null,_(l)+"  ",1)))),256))]),(p(!0),v(n,null,x(De.value.option,((e,l)=>(p(),v("div",{class:"oe-flex",key:Number(l)},[f("div",ne,_(e.title),1),f("div",fe,"￥"+_(e.price),1)])))),128))])),_:1})])),_:1})])])),_:1})])),_:1})])),_:1}),f(d,{shadow:"never",class:"custom-crad-container custom-card-page"},{default:F((()=>[f(o,{gutter:20},{default:F((()=>[f(a,{xl:8,lg:8,md:8,sm:8,xs:8},{default:F((()=>[f("div",_e,[ye,ge,f(u,{modelValue:Fe.value,"onUpdate:modelValue":l[2]||(l[2]=e=>Fe.value=e)},null,8,["modelValue"])])])),_:1})])),_:1}),Fe.value?(p(),v(n,{key:0},[f(o,{gutter:20},{default:F((()=>[f(je,{class:"grade-radio-consumption",modelValue:Ve.value,"onUpdate:modelValue":l[3]||(l[3]=e=>Ve.value=e),onChange:Ie},{default:F((()=>[(p(!0),v(n,null,x(Ee.value,(e=>(p(),v(Ue,{key:e.name,border:"",label:e.id},{default:F((()=>[b(_(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(o,{gutter:20},{default:F((()=>[f(a,{xl:24,lg:24,md:24,sm:24,xs:24},{default:F((()=>[f(k,{ref:h,data:[0],style:{width:"700px"},class:"specifications-box"},{default:F((()=>[f(r,{prop:"title",label:"商品规格"},{default:F((e=>[(p(!0),v(n,null,x(ze.value.option,(e=>(p(),v("div",{key:e.CATCH_ID},_(e.title),1)))),128))])),_:1}),f(r,{prop:"address",label:"价格","min-width":"100"},{default:F((e=>[(p(!0),v(n,null,x(ze.value.option,(e=>(p(),v("div",{key:e.CATCH_ID},_(e.price),1)))),128))])),_:1}),f(r,{prop:"name","min-width":"70",label:"会员等级"},{default:F((()=>[b(_(ze.value.name),1)])),_:1}),f(r,{prop:"address","min-width":"70",label:"会员价"},{default:F((e=>[(p(!0),v(n,null,x(ze.value.option,(e=>(p(),v("div",{key:e.CATCH_ID},[f(c,{modelValue:e.membershipPrice,"onUpdate:modelValue":l=>e.membershipPrice=l,onInput:l=>e.membershipPrice=g(i)(e.membershipPrice),type:"number"},{append:F((()=>[xe])),_:2},1032,["modelValue","onUpdate:modelValue","onInput"])])))),128))])),_:1})])),_:1},512)])),_:1})])),_:1})],64)):y("",!0)])),_:1})],64)):y("",!0),f(d,{shadow:"never",class:"member-price-card"},{default:F((()=>[f("div",be,[f(Be,{onClick:l[4]||(l[4]=e=>g(w).go(-1))},{default:F((()=>[he])),_:1}),f(Be,{type:"primary",onClick:Pe},{default:F((()=>[ke])),_:1})])])),_:1})],64)}))}});we.__scopeId="data-v-cc5a2b6c";export default we;
