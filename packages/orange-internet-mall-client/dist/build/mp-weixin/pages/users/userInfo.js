(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/users/userInfo"],{"5b2f":function(n,e,t){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=f(t("4795")),r=f(t("66fd")),u=f(t("0613")),i=t("79f6"),a=t("d257"),c=t("a6f4");function f(n){return n&&n.__esModule?n:{default:n}}function l(n,e,t,o,r,u,i){try{var a=n[u](i),c=a.value}catch(f){return void t(f)}a.done?e(c):Promise.resolve(c).then(o,r)}function d(n){return function(){var e=this,t=arguments;return new Promise((function(o,r){var u=n.apply(e,t);function i(n){l(u,o,r,i,a,"next",n)}function a(n){l(u,o,r,i,a,"throw",n)}i(void 0)}))}}var s=r.default.extend({components:{},data:function(){return{PLATFORM:a.PLATFORM,imagePath:"",form:{nickname:"",avatar:"",gender:3,birthday:""},birthdayDateSelectShow:!1,outEditWindowShow:!1,genderSelectShow:!1,genderList:[{value:"0",label:"女"},{value:"1",label:"男"}]}},computed:{isSetInfo:function(){return!(this.userInfo.nickname===this.form.nickname&&this.imagePath===this.form.avatar&&this.userInfo.gender===this.form.gender&&this.userInfo.birthday===this.form.birthday)},userInfo:function(){return u.default.state.user.info}},setup:function(){var n=(0,c.computed)((function(){return u.default.getters.hexColor}));return{$hexColor:n}},methods:{onGenderSelect:function(n){var e=n[0].value;this.form.gender=e,console.log(this.form)},onHandleTimeSelect:function(n){var e="".concat(n.year,"-").concat(n.month,"-").concat(n.day);this.form.birthday=e},onGetUploadImage:function(){this.$navigateTo("/libs/components/u-avatar-cropper",{destWidth:300,rectWidth:200,fileType:"jpg"})},onSubmitUserInfo:function(){var e=this;return d(o.default.mark((function t(){var r,c;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isSetInfo){t.next=3;break}return n.showToast({title:"请修改信息",icon:"none"}),t.abrupt("return",!1);case 3:if(e.imagePath===e.form.avatar){t.next=9;break}return t.next=6,(0,i.reqUpload)(e.imagePath);case 6:r=t.sent,c=r.data,e.form.avatar=c.data.path.show;case 9:return t.next=11,u.default.dispatch("editUserInfo",[e.form.nickname,e.form.avatar===e.imagePath?"":e.form.avatar,e.form.gender,e.form.birthday]);case 11:return t.next=13,(0,a.showToast)({icon:"none",title:"修改成功"});case 13:e.$navigateBack(1);case 14:case"end":return t.stop()}}),t)})))()},loginOut:function(){var n=this;return d(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.default.dispatch("outLogin");case 2:n.$navigateBack(2);case 3:case"end":return e.stop()}}),e)})))()}},watch:{userInfo:{immediate:!0,handler:function(n){if("undefined"===typeof n.id)return!1;this.form.nickname=n.nickname,this.form.avatar=n.avatar,this.form.birthday=this.userInfo.birthday,this.form.gender=this.userInfo.gender,this.imagePath=n.avatar}}},onLoad:function(){var e=this;n.$on("uAvatarCropper",(function(n){return e.imagePath=n}))},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){n.$off("uAvatarCropper")},onPullDownRefresh:function(){n.stopPullDownRefresh()},onReachBottom:function(){}});e.default=s}).call(this,t("543d")["default"])},be78:function(n,e,t){"use strict";t.d(e,"b",(function(){return r})),t.d(e,"c",(function(){return u})),t.d(e,"a",(function(){return o}));var o={viewController:function(){return Promise.all([t.e("common/vendor"),t.e("components/controllers/view-controller")]).then(t.bind(null,"cd6b"))},uCellGroup:function(){return t.e("node-modules/uview-ui/components/u-cell-group/u-cell-group").then(t.bind(null,"c149"))},uCellItem:function(){return t.e("node-modules/uview-ui/components/u-cell-item/u-cell-item").then(t.bind(null,"065d8"))},uImage:function(){return t.e("node-modules/uview-ui/components/u-image/u-image").then(t.bind(null,"9df5"))},uInput:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-input/u-input")]).then(t.bind(null,"d5da"))},uIcon:function(){return t.e("node-modules/uview-ui/components/u-icon/u-icon").then(t.bind(null,"f86b"))},uSelect:function(){return t.e("node-modules/uview-ui/components/u-select/u-select").then(t.bind(null,"4c05"))},uPicker:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-picker/u-picker")]).then(t.bind(null,"665d"))},customFixedFooter:function(){return t.e("components/customs/custom-fixed-footer").then(t.bind(null,"707a"))},uButton:function(){return t.e("node-modules/uview-ui/components/u-button/u-button").then(t.bind(null,"d9ad"))},unionBlank:function(){return t.e("components/unions/union-blank").then(t.bind(null,"2902"))}},r=function(){var n=this,e=n.$createElement,t=(n._self._c,{background:n.$hexColor["--color-primary"]}),o="mp-weixin"!==n.PLATFORM?{background:n.$hexColor["--color-primary"]}:null;n._isMounted||(n.e0=function(e){n.genderSelectShow=!0},n.e1=function(e){n.genderSelectShow=!0},n.e2=function(e){n.birthdayDateSelectShow=!0}),n.$mp.data=Object.assign({},{$root:{a0:t,a1:o}})},u=[]},cd7a:function(n,e,t){"use strict";(function(n){t("6cdc");var e=o(t("cf13"));function o(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,t("543d")["createPage"])},cf13:function(n,e,t){"use strict";t.r(e);var o=t("be78"),r=t("f38a");for(var u in r)["default"].indexOf(u)<0&&function(n){t.d(e,n,(function(){return r[n]}))}(u);var i,a=t("f0c5"),c=Object(a["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);e["default"]=c.exports},f38a:function(n,e,t){"use strict";t.r(e);var o=t("5b2f"),r=t.n(o);for(var u in o)["default"].indexOf(u)<0&&function(n){t.d(e,n,(function(){return o[n]}))}(u);e["default"]=r.a}},[["cd7a","common/runtime","common/vendor"]]]);