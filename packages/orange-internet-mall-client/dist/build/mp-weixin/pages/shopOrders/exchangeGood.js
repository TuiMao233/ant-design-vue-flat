(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shopOrders/exchangeGood"],{"0239":function(e,t,o){"use strict";o.r(t);var n=o("17e4"),r=o("88a3");for(var a in r)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return r[e]}))}(a);o("a1ab");var d,u=o("f0c5"),s=Object(u["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],d);t["default"]=s.exports},"17e4":function(e,t,o){"use strict";o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return a})),o.d(t,"a",(function(){return n}));var n={uCard:function(){return o.e("node-modules/uview-ui/components/u-card/u-card").then(o.bind(null,"d505"))},uImage:function(){return o.e("node-modules/uview-ui/components/u-image/u-image").then(o.bind(null,"9df5"))},uIcon:function(){return o.e("node-modules/uview-ui/components/u-icon/u-icon").then(o.bind(null,"f86b"))},customTextarea:function(){return o.e("components/customs/custom-textarea").then(o.bind(null,"9ff4"))},uUpload:function(){return o.e("node-modules/uview-ui/components/u-upload/u-upload").then(o.bind(null,"eea8"))},uButton:function(){return o.e("node-modules/uview-ui/components/u-button/u-button").then(o.bind(null,"d9ad"))},viewSkuSelect:function(){return Promise.all([o.e("common/vendor"),o.e("components/view/view-sku-select")]).then(o.bind(null,"f9d6"))}},r=function(){var e=this,t=e.$createElement,o=(e._self._c,{background:e.$hexColor["--color-primary"]});e.$mp.data=Object.assign({},{$root:{a0:o}})},a=[]},"5d5e":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(o("4795")),r=o("79f6"),a=c(o("0613")),d=o("d257"),u=o("a6f4"),s=o("e389"),i=o("1cc4");function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,o,n,r,a,d){try{var u=e[a](d),s=u.value}catch(i){return void o(i)}u.done?t(s):Promise.resolve(s).then(n,r)}function l(e){return function(){var t=this,o=arguments;return new Promise((function(n,r){var a=e.apply(t,o);function d(e){f(a,n,r,d,u,"next",e)}function u(e){f(a,n,r,d,u,"throw",e)}d(void 0)}))}}var p=(0,u.defineComponent)({setup:function(){var e=(0,u.ref)();(0,u.provide)("shopDetailsInfo",e),(0,i.onLoad)(l(n.default.mark((function t(){var o,a,d,u,s,i,c=arguments;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(d=c.length>0&&void 0!==c[0]?c[0]:{undefined:void 0},u=d.goodsId,void 0!==u){t.next=3;break}return t.abrupt("return",!1);case 3:return t.next=5,(0,r.reqGoodsDetail)(u);case 5:s=t.sent,i=s.data,e.value=null===i||void 0===i||null===(o=i.data)||void 0===o||null===(a=o.data)||void 0===a?void 0:a[0];case 8:case"end":return t.stop()}}),t)}))));var t=(0,u.computed)((function(){return"undefined"===typeof e.value})),o=(0,u.computed)((function(){return a.default.getters.hexColor}));return{shopDetailsInfo:e,empty:t,$hexColor:o}},components:{},data:function(){return{form:{images:[]},fileList:[],exchangeInstructions:"",goodsOrderInfo:{},type:0,goodsId:0,orderId:0,orderItemId:0,actionUrl:r.httpConfig.baseURL,requestHeader:r.httpConfig.header,addressInfo:{},afterSalesId:"",goodsData:{},wholeData:{},modify:!1}},computed:{},methods:{showSku:function(){return e.$emit("showSku")},onAfterEachUpload:function(e){console.log(e);var t=e.map((function(e){var t,o,n;return console.log(e.response),null===(t=e.response)||void 0===t||null===(o=t.data)||void 0===o||null===(n=o.path)||void 0===n?void 0:n.show}));-1===t.findIndex((function(e){return!e}))&&(this.form.images=t.filter((function(e){return e})))},onSendRight:function(){var e=this;return l(n.default.mark((function t(){var o;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.goodsData.purchaseNum){t.next=18;break}if(!e.modify){t.next=6;break}return t.next=4,(0,r.reqApplyRight)({id:e.afterSalesId,type:e.type,order_id:e.orderId,order_item_id:e.orderItemId,shop_user_apply_reason:e.exchangeInstructions,images:e.form.images,goods_id:e.goodsId,refund_num:e.goodsData.purchaseNum,goods_sku_id:e.goodsData.sku_id,protect_rights_goods_sku_text:e.goodsData.showData});case 4:t.next=13;break;case 6:if(!e.afterSalesId){t.next=11;break}return t.next=9,(0,r.reqApplyProtectionAgain)({id:e.afterSalesId,type:e.type,order_id:e.orderId,order_item_id:e.orderItemId,shop_user_apply_reason:e.exchangeInstructions,images:e.form.images,goods_id:e.goodsId,refund_num:e.goodsData.purchaseNum,goods_sku_id:e.goodsData.sku_id,protect_rights_goods_sku_text:e.goodsData.showData});case 9:t.next=13;break;case 11:return t.next=13,(0,r.reqApplyRight)({type:e.type,order_id:e.orderId,order_item_id:e.orderItemId,shop_user_apply_reason:e.exchangeInstructions,images:e.form.images,goods_id:e.goodsId,refund_num:e.goodsData.purchaseNum,goods_sku_id:e.goodsData.sku_id,protect_rights_goods_sku_text:e.goodsData.showData});case 13:return o=e,t.next=16,(0,d.showToast)({title:"提交成功!",mask:!0,success:function(){setTimeout((function(){(0,d.redirectTo)("/pages/shopOrders/refundReturnDetail",{orderId:o.orderId,shopId:o.orderItemId})}),1500)}});case 16:t.next=19;break;case 18:(0,d.showToast)({icon:"none",title:"请选择换货商品规格"});case 19:case"end":return t.stop()}}),t)})))()},exchangeData:function(e){this.goodsData=e},onCopyText:function(t){(0,s.setClipboardData)(t),e.hideToast(),e.showToast({title:"已复制联系方式!"})},getGoodsDetail:function(e,t){var o=this;return l(n.default.mark((function a(){var d,u,s,i;return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!o.modify){n.next=14;break}return n.next=3,(0,r.reqLegitimateDetail)(e,t);case 3:d=n.sent,u=d.data,o.goodsOrderInfo=u.data.orderGoods[0],o.wholeData=u.data,o.exchangeInstructions=u.data.afterSales.shop_user_apply_reason,o.goodsData.purchaseNum=u.data.afterSales.refund_num,o.goodsData.sku_id=u.data.afterSales.goods_sku_id,o.goodsData.showData=u.data.afterSales.protect_rights_goods_sku_text,JSON.parse(u.data.afterSales.images).forEach((function(e){o.fileList.push({url:e})})),n.next=20;break;case 14:return n.next=16,(0,r.reqGetOrderDetial)(e,t);case 16:s=n.sent,i=s.data,o.goodsOrderInfo=i.data.order[0].orderGoods[0],o.wholeData=i.data.order[0];case 20:case"end":return n.stop()}}),a)})))()}},watch:{},onLoad:function(e){this.modify=!!e.modify&&e.modify,this.type=e.type,this.orderId=e.orderId,this.orderItemId=e.goodsOrderId,this.goodsId=e.goodsId,this.afterSalesId=e.afterSalesId,this.getGoodsDetail(e.orderId,e.goodsOrderId)},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){e.stopPullDownRefresh()},onReachBottom:function(){}});t.default=p}).call(this,o("543d")["default"])},6909:function(e,t,o){"use strict";(function(e){o("6cdc");var t=n(o("0239"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},"88a3":function(e,t,o){"use strict";o.r(t);var n=o("5d5e"),r=o.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(a);t["default"]=r.a},a1ab:function(e,t,o){"use strict";var n=o("f93f"),r=o.n(n);r.a},f93f:function(e,t,o){}},[["6909","common/runtime","common/vendor"]]]);