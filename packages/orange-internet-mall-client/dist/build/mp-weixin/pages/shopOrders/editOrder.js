(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shopOrders/editOrder"],{"06ea":function(n,e,o){},"45ae":function(n,e,o){"use strict";o.d(e,"b",(function(){return u})),o.d(e,"c",(function(){return r})),o.d(e,"a",(function(){return t}));var t={uCard:function(){return o.e("node-modules/uview-ui/components/u-card/u-card").then(o.bind(null,"d505"))},uTag:function(){return o.e("node-modules/uview-ui/components/u-tag/u-tag").then(o.bind(null,"2ad6"))},uIcon:function(){return o.e("node-modules/uview-ui/components/u-icon/u-icon").then(o.bind(null,"f86b"))},uImage:function(){return o.e("node-modules/uview-ui/components/u-image/u-image").then(o.bind(null,"9df5"))},uNumberBox:function(){return o.e("node-modules/uview-ui/components/u-number-box/u-number-box").then(o.bind(null,"c20a"))},uInput:function(){return Promise.all([o.e("common/vendor"),o.e("node-modules/uview-ui/components/u-input/u-input")]).then(o.bind(null,"d5da"))},unionBlank:function(){return o.e("components/unions/union-blank").then(o.bind(null,"2902"))},customFixedFooter:function(){return o.e("components/customs/custom-fixed-footer").then(o.bind(null,"707a"))},uButton:function(){return o.e("node-modules/uview-ui/components/u-button/u-button").then(o.bind(null,"d9ad"))},commonCouponSelect:function(){return o.e("components/commons/common-coupon-select").then(o.bind(null,"a6f7"))}},u=function(){var n=this,e=n.$createElement,o=(n._self._c,JSON.stringify(n.goods)),t=n.isShow?(0-n.settlementInfo.coupons.current_fee).toFixed(2):null,u={padding:"0 72rpx",background:n.$hexColor["--color-primary"]};n._isMounted||(n.e0=function(e){n.showDiscounts=!0}),n.$mp.data=Object.assign({},{$root:{g0:o,g1:t,a0:u}})},r=[]},"4beb":function(n,e,o){"use strict";o.r(e);var t=o("ddfd"),u=o.n(t);for(var r in t)["default"].indexOf(r)<0&&function(n){o.d(e,n,(function(){return t[n]}))}(r);e["default"]=u.a},"4cd9":function(n,e,o){"use strict";(function(n){o("6cdc");var e=t(o("8100"));function t(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,o("543d")["createPage"])},"64fc":function(n,e,o){"use strict";var t=o("06ea"),u=o.n(t);u.a},8100:function(n,e,o){"use strict";o.r(e);var t=o("45ae"),u=o("4beb");for(var r in u)["default"].indexOf(r)<0&&function(n){o.d(e,n,(function(){return u[n]}))}(r);o("64fc");var s,i=o("f0c5"),c=Object(i["a"])(u["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],s);e["default"]=c.exports},ddfd:function(n,e,o){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=c(o("4795")),u=c(o("66fd")),r=o("79f6"),s=o("a6f4"),i=c(o("0613"));function c(n){return n&&n.__esModule?n:{default:n}}function d(n,e,o,t,u,r,s){try{var i=n[r](s),c=i.value}catch(d){return void o(d)}i.done?e(c):Promise.resolve(c).then(t,u)}function a(n){return function(){var e=this,o=arguments;return new Promise((function(t,u){var r=n.apply(e,o);function s(n){d(r,t,u,s,i,"next",n)}function i(n){d(r,t,u,s,i,"throw",n)}s(void 0)}))}}var f=u.default.extend({props:{},components:{},data:function(){return{showDiscounts:!1,isShowCoupon:!0,coupons:{},goods:[],shopList:[],addressDetail:{},couponInfo:{},settlementInfo:{},remark:"",source:"",isShow:!1}},computed:{completeAddress:function(){var n=[this.addressDetail.province_name,this.addressDetail.city_name,this.addressDetail.area_name].filter((function(n){return n}));return n.join(" ")},priceTotal:function(){var n=Number(this.settlementInfo.totalPrice)+Number(this.settlementInfo.totalExpressFee)-Number(this.settlementInfo.reducePrice);return n?n.toFixed(2):0}},setup:function(){var n=(0,s.computed)((function(){return i.default.getters.hexColor}));return{$hexColor:n}},methods:{resetGoods:function(n){this.goods=n.map((function(n){return{goodsId:n.id,buynum:n.buynum,skuId:n.skuId}}))},selectCouponEvent:function(){var n=this;return a(t.default.mark((function e(){var o,u;return t.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.shopList.length&&n.resetGoods(n.shopList),e.next=3,(0,r.reqSettleAccounts)({addresId:n.addressDetail.id,discountsID:n.couponInfo.id,goods:n.goods});case 3:o=e.sent,u=o.data,n.settlementInfo=u.data,n.shopList=n.settlementInfo.goods||[],n.coupons=n.settlementInfo.coupons,n.couponInfo=n.settlementInfo.coupons.current||{},n.addressDetail=n.settlementInfo.expressFeeAddress||{},n.resetGoods(n.shopList);case 11:case"end":return e.stop()}}),e)})))()},onPlaceAnOrder:function(){var n=this;return a(t.default.mark((function e(){var o,u;return t.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.resetGoods(n.shopList),e.next=3,(0,r.reqPlaceOrder)({addresId:n.addressDetail.id,discountsID:n.couponInfo.id,goods:n.goods,source:n.source,remark:n.remark});case 3:o=e.sent,u=o.data,n.$redirectTo("/pages/shopOrders/cashier",{orderInfo:encodeURIComponent(JSON.stringify(u.data))});case 6:case"end":return e.stop()}}),e)})))()}},watch:{},onLoad:function(e){var o=this;this.source=e.source,this.goods=JSON.parse(e.placeAnRrders),this.selectCouponEvent(),n.$on("address-select",(function(n){o.addressDetail=n,o.selectCouponEvent()})),n.$on("use-now",(function(n){o.couponInfo=n,o.selectCouponEvent(),o.showDiscounts=!1,o.isShowCoupon=!1,o.isShow=!0}))},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){n.$off("address-select"),n.$off("use-now")},onPullDownRefresh:function(){n.stopPullDownRefresh()},onReachBottom:function(){}});e.default=f}).call(this,o("543d")["default"])}},[["4cd9","common/runtime","common/vendor"]]]);