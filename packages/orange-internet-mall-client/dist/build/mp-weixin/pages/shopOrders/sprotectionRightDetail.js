(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shopOrders/sprotectionRightDetail"],{2446:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=l(t("4795")),u=l(t("66fd")),a=l(t("5a0c")),r=t("79f6"),i=t("d257"),s=t("a6f4"),d=l(t("0613")),c=t("e389");function l(e){return e&&e.__esModule?e:{default:e}}function f(e,n,t,o,u,a,r){try{var i=e[a](r),s=i.value}catch(d){return void t(d)}i.done?n(s):Promise.resolve(s).then(o,u)}function m(e){return function(){var n=this,t=arguments;return new Promise((function(o,u){var a=e.apply(n,t);function r(e){f(a,o,u,r,i,"next",e)}function i(e){f(a,o,u,r,i,"throw",e)}r(void 0)}))}}var p=u.default.extend({components:{},props:{id:Number},data:function(){return{addressInfo:{},numList:[{name:"提交申请"},{name:"商家处理"},{name:"寄回商品"},{name:"商家退款"},{name:"退款成功"}],curStatus:0,revokeApplyContent:"您将撤销本次申请，如果问题未解决，您还可以再次发起，确定继续吗？",isRevokeApply:!1,createtime:0,totalRefundMoney:"",logisticsInfo:[],automaticTime:0,agreedTime:0,businessTime:0,orderId:"",shopId:""}},computed:{},setup:function(){var e=(0,s.computed)((function(){return d.default.getters.hexColor}));return{$hexColor:e}},methods:{getRightDetail:function(e,n){var t=this;return m(o.default.mark((function u(){var i,s,d,c;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,(0,r.reqLegitimateDetail)(e,n);case 2:if(i=o.sent,s=i.data,t.addressInfo=s.data,0!=t.addressInfo.afterSales.status){o.next=10;break}t.curStatus=1,t.automaticTime=(0,a.default)(1e3*s.data.afterSales.createtime).add(t.addressInfo.OrderBaseParam.toApplyForRightsOvertime.value,"day").unix()-(0,a.default)().unix(),o.next=28;break;case 10:if(1!=t.addressInfo.afterSales.status){o.next=15;break}t.curStatus=2,t.agreedTime=(0,a.default)(1e3*s.data.afterSales.start_time).add(t.addressInfo.OrderBaseParam.cancelSafeguard.value,"day").unix()-(0,a.default)().unix(),o.next=28;break;case 15:if(3!=t.addressInfo.afterSales.status){o.next=21;break}t.curStatus=3,t.businessTime=(0,a.default)(1e3*s.data.afterSales.user_shipments_time).add(t.addressInfo.OrderBaseParam.safeguardAutomation.value,"day").unix()-(0,a.default)().unix(),t.getlogisticsData(),o.next=28;break;case 21:if(2!=t.addressInfo.afterSales.status){o.next=28;break}return t.curStatus=3,o.next=25,(0,r.reqRefundStatus)(e,n);case 25:d=o.sent,c=d.data,1==c.data.status&&(t.curStatus=4,t.createtime=c.data.createtime,t.totalRefundMoney=c.data.total_refund_money);case 28:case"end":return o.stop()}}),u)})))()},applyAgain:function(){(0,i.navigateTo)("/pages/shopOrders/selectAfterSaleType",{goodsId:this.addressInfo.orderGoods[0].goods_id,goodsOrderId:this.addressInfo.orderGoods[0].id,orderId:this.addressInfo.id,afterSalesId:this.addressInfo.afterSales.id})},getlogisticsData:function(){var e=this;return m(o.default.mark((function n(){var t,u;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,r.reqCheckLogistics)(e.addressInfo.afterSales.express_company_code,e.addressInfo.afterSales.express_sn);case 2:t=n.sent,u=t.data,e.logisticsInfo=u.data;case 5:case"end":return n.stop()}}),n)})))()},revokeApply:function(){var e=this;return m(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.isRevokeApply=!0;case 1:case"end":return n.stop()}}),n)})))()},onCopyText:function(n){(0,c.setClipboardData)(n),e.hideToast(),e.showToast({title:"已复制联系方式!"})},revokeApplyConfirm:function(){var e=this;return m(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,r.reqCancelLegitimate)(e.addressInfo.afterSales.order_id,e.addressInfo.afterSales.order_item_id,e.addressInfo.afterSales.id);case 2:return n.next=4,(0,i.showToast)({title:"撤销申请成功!",mask:!0,success:function(){setTimeout((function(){(0,i.redirectTo)("/pages/shopOrders/afterSales")}),1500)}});case 4:case"end":return n.stop()}}),n)})))()},jumpEvent:function(){this.$navigateTo("/pages/shopOrders/fillLogistics",{legitimateInfo:encodeURIComponent(JSON.stringify(this.addressInfo))})}},watch:{},onLoad:function(e){this.orderId=e.orderId,this.shopId=e.shopId,this.getRightDetail(e.orderId,e.shopId)},onReady:function(){},onShow:function(){this.getRightDetail(this.orderId,this.shopId)},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){e.stopPullDownRefresh()},onReachBottom:function(){}});n.default=p}).call(this,t("543d")["default"])},5890:function(e,n,t){},"7c62":function(e,n,t){"use strict";t.d(n,"b",(function(){return u})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){return o}));var o={uIcon:function(){return t.e("node-modules/uview-ui/components/u-icon/u-icon").then(t.bind(null,"f86b"))},uCountDown:function(){return t.e("node-modules/uview-ui/components/u-count-down/u-count-down").then(t.bind(null,"e387"))},viewIcon:function(){return Promise.all([t.e("common/vendor"),t.e("components/view/view-icon")]).then(t.bind(null,"2807"))},uSteps:function(){return t.e("node-modules/uview-ui/components/u-steps/u-steps").then(t.bind(null,"be74"))},customCardContainer:function(){return t.e("components/customs/custom-card-container").then(t.bind(null,"6d4c"))},uCellItem:function(){return t.e("node-modules/uview-ui/components/u-cell-item/u-cell-item").then(t.bind(null,"065d8"))},uRow:function(){return t.e("node-modules/uview-ui/components/u-row/u-row").then(t.bind(null,"d67a"))},uCol:function(){return t.e("node-modules/uview-ui/components/u-col/u-col").then(t.bind(null,"b408"))},uButton:function(){return t.e("node-modules/uview-ui/components/u-button/u-button").then(t.bind(null,"d9ad"))},uTimeLine:function(){return t.e("node-modules/uview-ui/components/u-time-line/u-time-line").then(t.bind(null,"34f4"))},uTimeLineItem:function(){return t.e("node-modules/uview-ui/components/u-time-line-item/u-time-line-item").then(t.bind(null,"87b7"))},commonLegitimateInfo:function(){return Promise.all([t.e("common/vendor"),t.e("components/commons/common-legitimate-info")]).then(t.bind(null,"6d6b"))},unionBlank:function(){return t.e("components/unions/union-blank").then(t.bind(null,"2902"))},linkController:function(){return t.e("components/controllers/link-controller").then(t.bind(null,"d887"))},uModal:function(){return t.e("node-modules/uview-ui/components/u-modal/u-modal").then(t.bind(null,"078c"))}},u=function(){var e=this,n=e.$createElement,t=(e._self._c,e.addressInfo.afterSales&&4==e.curStatus?e.$formatUnix(e.createtime):null);e._isMounted||(e.e0=function(n){e.isRevokeApply=!1}),e.$mp.data=Object.assign({},{$root:{m0:t}})},a=[]},"8ee5":function(e,n,t){"use strict";(function(e){t("6cdc");var n=o(t("8f50"));function o(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("543d")["createPage"])},"8f50":function(e,n,t){"use strict";t.r(n);var o=t("7c62"),u=t("9d74");for(var a in u)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return u[e]}))}(a);t("f9ecd");var r,i=t("f0c5"),s=Object(i["a"])(u["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);n["default"]=s.exports},"9d74":function(e,n,t){"use strict";t.r(n);var o=t("2446"),u=t.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(a);n["default"]=u.a},f9ecd:function(e,n,t){"use strict";var o=t("5890"),u=t.n(o);u.a}},[["8ee5","common/runtime","common/vendor"]]]);