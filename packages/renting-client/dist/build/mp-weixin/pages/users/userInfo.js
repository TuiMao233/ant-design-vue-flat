(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/users/userInfo"],{"0595":function(n,e,t){"use strict";t.d(e,"b",(function(){return u})),t.d(e,"c",(function(){return r})),t.d(e,"a",(function(){return o}));var o={uNavbar:function(){return t.e("node-modules/uview-ui/components/u-navbar/u-navbar").then(t.bind(null,"87cd"))},uAvatar:function(){return t.e("node-modules/uview-ui/components/u-avatar/u-avatar").then(t.bind(null,"13a2"))},uIcon:function(){return t.e("node-modules/uview-ui/components/u-icon/u-icon").then(t.bind(null,"f86b"))},uField:function(){return t.e("node-modules/uview-ui/components/u-field/u-field").then(t.bind(null,"c732"))},uSelect:function(){return t.e("node-modules/uview-ui/components/u-select/u-select").then(t.bind(null,"4c05"))},uPicker:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-picker/u-picker")]).then(t.bind(null,"665d"))},uModal:function(){return t.e("node-modules/uview-ui/components/u-modal/u-modal").then(t.bind(null,"078c"))},commonFixedFooter:function(){return t.e("components/commons/common-fixed-footer").then(t.bind(null,"90d2"))},uButton:function(){return t.e("node-modules/uview-ui/components/u-button/u-button").then(t.bind(null,"d9ad"))}},u=function(){var n=this,e=n.$createElement;n._self._c;n._isMounted||(n.e0=function(e){n.genderSelectShow=!0},n.e1=function(e){n.birthdayDateSelectShow=!0})},r=[]},"5b2f":function(n,e,t){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=c(t("a34a")),u=t("79f6"),r=t("d257"),i=c(t("0613")),a=c(t("66fd"));function c(n){return n&&n.__esModule?n:{default:n}}function f(n,e,t,o,u,r,i){try{var a=n[r](i),c=a.value}catch(f){return void t(f)}a.done?e(c):Promise.resolve(c).then(o,u)}function d(n){return function(){var e=this,t=arguments;return new Promise((function(o,u){var r=n.apply(e,t);function i(n){f(r,o,u,i,a,"next",n)}function a(n){f(r,o,u,i,a,"throw",n)}i(void 0)}))}}var s=a.default.extend({components:{},data:function(){return{imagePath:"",form:{nickname:"",avatar:"",gender:"",birthday:""},birthdayDateSelectShow:!1,outEditWindowShow:!1,genderSelectShow:!1,genderList:[{value:0,label:"女"},{value:1,label:"男"}]}},computed:{userInfo:function(){return i.default.state.user.info},isSetInfo:function(){return!(this.userInfo.nickname===this.form.nickname&&this.imagePath===this.form.avatar&&this.userInfo.gender===this.form.gender&&this.userInfo.birthday===this.form.birthday)},isAuthentication:function(){return i.default.getters.isAuthentication}},methods:{onGenderSelect:function(n){var e=n[0].value;this.form.gender=e},onHandleTimeSelect:function(n){var e="".concat(n.year,"-").concat(n.month,"-").concat(n.day);this.form.birthday=e},onGetUploadImage:function(){this.$navigateTo("/libs/components/u-avatar-cropper",{destWidth:300,rectWidth:200,fileType:"jpg"})},onSubmitUserInfo:function(){var e=this;return d(o.default.mark((function t(){var a,c;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isSetInfo){t.next=3;break}return n.showToast({title:"请修改信息",icon:"none"}),t.abrupt("return",!1);case 3:if(e.imagePath===e.form.avatar){t.next=9;break}return t.next=6,(0,u.reqUpload)(e.imagePath);case 6:a=t.sent,c=a.data,e.form.avatar=c.url;case 9:return t.next=11,i.default.dispatch("editUserInfo",[e.form.nickname,e.form.avatar===e.imagePath?"":e.form.avatar,e.form.gender,e.form.birthday]);case 11:(0,r.showToast)({title:"修改成功!"});case 12:case"end":return t.stop()}}),t)})))()},onClickOutEdit:function(){this.isSetInfo?this.outEditWindowShow=!0:this.$navigateBack()}},watch:{userInfo:{immediate:!0,handler:function(n){if("undefined"===typeof n.user_id)return!1;this.form.nickname=n.nickname,this.form.gender=n.gender,this.form.avatar=n.avatar,this.form.birthday=this.userInfo.birthday,this.imagePath=n.avatar}}},onLoad:function(){var e=this;n.$on("uAvatarCropper",(function(n){return e.imagePath=n}))},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){n.$off("uAvatarCropper")},onPullDownRefresh:function(){n.stopPullDownRefresh()},onReachBottom:function(){}});e.default=s}).call(this,t("543d")["default"])},b84a:function(n,e,t){"use strict";var o=t("de13"),u=t.n(o);u.a},cd7a:function(n,e,t){"use strict";(function(n){t("6cdc"),t("921b");var e=o(t("cf13"));function o(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,t("543d")["createPage"])},cf13:function(n,e,t){"use strict";t.r(e);var o=t("0595"),u=t("f38a");for(var r in u)["default"].indexOf(r)<0&&function(n){t.d(e,n,(function(){return u[n]}))}(r);t("b84a");var i,a=t("f0c5"),c=Object(a["a"])(u["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);e["default"]=c.exports},de13:function(n,e,t){},f38a:function(n,e,t){"use strict";t.r(e);var o=t("5b2f"),u=t.n(o);for(var r in o)["default"].indexOf(r)<0&&function(n){t.d(e,n,(function(){return o[n]}))}(r);e["default"]=u.a}},[["cd7a","common/runtime","common/vendor"]]]);