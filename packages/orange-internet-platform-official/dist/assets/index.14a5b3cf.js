var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{_ as u}from"./index.vue_vue&type=style&index=0&lang.a28079a5.js";import{h as i}from"./index.30f0effc.js";import{C as n,z as c,d as o,n as p,r as v,o as m,c as y,w as b,e as x,g as f,L as h,m as _,t as g,A as w}from"./vendor.61326bd2.js";import{u as k}from"./use-antd-form.8a2682c7.js";const j=e=>{return(e=>{const a=new FormData;return c.exports.forIn(e,((e,l)=>a.append(l,e))),n.post("/api/UserClientUpload/add",a,{headers:{"Content-Type":"multipart/form-data"}})})((u=((e,a)=>{for(var l in a||(a={}))s.call(a,l)&&r(e,l,a[l]);if(t)for(var l of t(a))d.call(a,l)&&r(e,l,a[l]);return e})({},e),a(u,l({group_type:"1"}))));var u},U=x("div",{class:"text-base mb-24"},"认证类型",-1),C=_("企业认证"),q=_("个人认证"),O=x("div",{style:{height:"1px",width:"800px","background-color":"#c4c4c4","margin-bottom":"28px"}},null,-1),P={key:0},I={class:"flex"},A=x("i",{class:"pf-add-image text-4xl text-primary"},null,-1),z=x("div",{class:"text-xs mt-10",style:{color:"#999"}}," 提示: 仅支持JPeg、jpg、png、bmp格式，不超过2M ",-1),D={class:"flex"},E={key:1},J={class:"flex"},M={class:"flex"},F=x("i",{class:"pf-add-image text-4xl text-primary"},null,-1),H=x("div",{class:"text-xs mt-10",style:{color:"#999"}}," ① 正面（人头照） ",-1),L=x("i",{class:"pf-add-image text-4xl text-primary"},null,-1),S=x("div",{class:"text-xs mt-10",style:{color:"#999"}}," ② 反面 ( 国徽照 ) ",-1),T=x("div",{class:"text-xs mb-24",style:{color:"#999"}}," 提示: 仅支持JPeg、jpg、png、bmp格式，不超过2M ",-1),$={class:"flex"},B=_(" 提交认证 "),G=x("i",{class:"pf-error-alert text-2xl"},null,-1),K=x("i",{class:"pf-error-alert text-2xl"},null,-1),N={key:0},Q={style:{width:"100px",height:"134px"}},R={key:1},V={class:"flex"},W={style:{width:"134px",height:"85px","margin-right":"30px"}},X={style:{width:"134px",height:"85px"}},Y=_(" 重新认证 ");var Z=o({expose:[],setup(e){const a=p({type:1,company_name:"",company_code:"",business_license:"",name:"",idcard:"",phone:"",address:"",idcard_front:"",idcard_back:"",reason:""}),l=p(null),{rules:t,validate:s}=k(l,{company_name:[{required:!0,message:"请输入企业名称",trigger:"blur"}],company_code:[{required:!0,message:"请输入信用代码",trigger:"blur"}],business_license:[{required:!0,message:"请选择营业执照图片",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],idcard:[{required:!0,message:"请输入身份证号码",trigger:"blur"}],idcard_front:[{required:!0,message:"请输入身份证正面照",trigger:"blur"}],idcard_back:[{required:!0,message:"请输入身份证反面照",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号码",trigger:"blur"}],address:[{required:!0,message:"请输入联系地址",trigger:"blur"}]}),d=async(e,l)=>{const t=await i(!1),s=t.some((e=>-1!==e.type.search("image"))),d=t.some((e=>e.size/1e3/1024<2));if(!s)return w.warning("请选择图片!");if(!d)return w.warning("图片超出大小!");w.info("上传中..",1.5);const{data:r}=await j({file:t[0],type:e});w.success("上传成功",1.5),a.value[l]=r.data.path.show},r=p(!0),c=p(2),o=()=>{n.get("/api/Auth/identity",{custom:{preventHandleError:!0}}).then((({data:e})=>{var l,t,s,d,u;r.value=!1,a.value=e.data,c.value=void 0===(null==(l=e.data)?void 0:l.status)?2:null==(t=e.data)?void 0:t.status,1===e.data.type?a.value.business_license=null==(s=e.data)?void 0:s.business_license.url:2===e.data.type&&(a.value.idcard_back=null==(d=e.data)?void 0:d.idcard_back.url,a.value.idcard_front=null==(u=e.data)?void 0:u.idcard_front.url)})).catch((e=>r.value=4===e.data.code))},Z=async()=>{var e;await s(),await(e=a.value,n.post("api/Auth/apply",e)),o()};return o(),(e,s)=>{const i=v("a-radio"),n=v("a-radio-group"),o=v("a-form-item"),p=v("a-input"),w=u,k=v("a-button"),j=v("a-form"),ee=v("a-card"),ae=v("a-alert");return r.value?(m(),y(ee,{key:0,style:{width:"1200px"}},{default:b((()=>[U,x(j,{layout:"vertical",model:a.value,ref:l,rules:f(t)},{default:b((()=>[x(o,null,{default:b((()=>[x(n,{value:a.value.type,"onUpdate:value":s[1]||(s[1]=e=>a.value.type=e)},{default:b((()=>[x(i,{class:"mr-20",value:1},{default:b((()=>[C])),_:1}),x(i,{value:2},{default:b((()=>[q])),_:1})])),_:1},8,["value"])])),_:1}),O,1==a.value.type?(m(),y("div",P,[x("div",I,[x(o,{label:"企业名称",name:"company_name",style:{"margin-right":"70px"}},{default:b((()=>[x(p,{value:a.value.company_name,"onUpdate:value":s[2]||(s[2]=e=>a.value.company_name=e),placeholder:"请输入企业名称",style:{width:"272px"}},null,8,["value"])])),_:1}),x(o,{label:"社会统一信用代码",name:"company_code"},{default:b((()=>[x(p,{value:a.value.company_code,"onUpdate:value":s[3]||(s[3]=e=>a.value.company_code=e),placeholder:"请输入信用代码",style:{width:"272px"}},null,8,["value"])])),_:1})]),x(o,{label:"营业执照",name:"business_license"},{default:b((()=>[a.value.business_license?(m(),y("div",{key:1,onClick:s[5]||(s[5]=e=>d("3","business_license")),style:{height:"134px"},class:"w-100"},[x(w,{src:a.value.business_license},null,8,["src"])])):(m(),y("div",{key:0,class:"w-100 flex justify-center items-center",style:{"border-radius":"10px",border:"1px dashed #d9d9d9",height:"134px"},onClick:s[4]||(s[4]=e=>d("3","business_license"))},[A])),z])),_:1}),x(o,{label:"法人姓名",name:"name"},{default:b((()=>[x(p,{value:a.value.name,"onUpdate:value":s[6]||(s[6]=e=>a.value.name=e),placeholder:"请输入法人姓名",style:{width:"272px"}},null,8,["value"])])),_:1}),x("div",D,[x(o,{label:"法人身份证号码",name:"idcard",style:{"margin-right":"70px"}},{default:b((()=>[x(p,{value:a.value.idcard,"onUpdate:value":s[7]||(s[7]=e=>a.value.idcard=e),placeholder:"请输入法人身份证号码",style:{width:"272px"}},null,8,["value"])])),_:1}),x(o,{label:"法人联系手机号",name:"phone"},{default:b((()=>[x(p,{value:a.value.phone,"onUpdate:value":s[8]||(s[8]=e=>a.value.phone=e),placeholder:"请输入法人联系方式",style:{width:"272px"}},null,8,["value"])])),_:1})]),x(o,{label:"办公地址",name:"address"},{default:b((()=>[x(p,{value:a.value.address,"onUpdate:value":s[9]||(s[9]=e=>a.value.address=e),placeholder:"请输入办公地址",style:{width:"614px"}},null,8,["value"])])),_:1})])):(m(),y("div",E,[x("div",J,[x(o,{label:"姓名",name:"name",style:{"margin-right":"70px"}},{default:b((()=>[x(p,{value:a.value.name,"onUpdate:value":s[10]||(s[10]=e=>a.value.name=e),placeholder:"请输入姓名",style:{width:"272px"}},null,8,["value"])])),_:1}),x(o,{label:"身份证号码",name:"idcard"},{default:b((()=>[x(p,{value:a.value.idcard,"onUpdate:value":s[11]||(s[11]=e=>a.value.idcard=e),placeholder:"请输入身份证号码",style:{width:"272px"}},null,8,["value"])])),_:1})]),x("div",M,[x(o,{class:"mb-0",label:"身份证证件照",name:"idcard_front",style:{"margin-right":"70px"}},{default:b((()=>[a.value.idcard_front?(m(),y("div",{key:1,onClick:s[13]||(s[13]=e=>d("2","idcard_front")),style:{width:"134px",height:"85px"}},[x(w,{src:a.value.idcard_front},null,8,["src"])])):(m(),y("div",{key:0,class:"flex justify-center items-center",style:{"border-radius":"10px",border:"1px dashed #d9d9d9",width:"134px",height:"85px"},onClick:s[12]||(s[12]=e=>d("2","idcard_front"))},[F])),H])),_:1}),x(o,{class:"mb-0",name:"idcard_back",style:{"margin-top":"30px"}},{default:b((()=>[a.value.idcard_back?(m(),y("div",{key:1,onClick:s[15]||(s[15]=e=>d("2","idcard_back")),style:{width:"134px",height:"85px"}},[x(w,{src:a.value.idcard_back},null,8,["src"])])):(m(),y("div",{key:0,class:"flex justify-center items-center",style:{"border-radius":"10px",border:"1px dashed #d9d9d9",width:"134px",height:"85px"},onClick:s[14]||(s[14]=e=>d("2","idcard_back"))},[L])),S])),_:1})]),T,x("div",$,[x(o,{label:"联系手机号",name:"phone",style:{"margin-right":"70px"}},{default:b((()=>[x(p,{value:a.value.phone,"onUpdate:value":s[16]||(s[16]=e=>a.value.phone=e),placeholder:"请输入手机号码",style:{width:"272px"}},null,8,["value"])])),_:1}),x(o,{label:"联系地址",name:"address"},{default:b((()=>[x(p,{value:a.value.address,"onUpdate:value":s[17]||(s[17]=e=>a.value.address=e),placeholder:"请输入联系地址(详细到门牌号)",style:{width:"272px"}},null,8,["value"])])),_:1})])])),x(k,{class:"mt-6",type:"primary",shape:"round",style:{width:"150px"},onClick:Z},{default:b((()=>[B])),_:1})])),_:1},8,["model","rules"])])),_:1})):(m(),y(ee,{key:1,style:{width:"1200px"}},{default:b((()=>{var e;return[0===c.value?(m(),y(ae,{key:0,style:{width:"max-content","margin-bottom":"17px"},class:"rounded-3xl border-none text-base px-16",message:"审核状态：审核中   请耐心等待审核",showIcon:"",type:"warning"},{icon:b((()=>[G])),_:1})):h("",!0),2===c.value?(m(),y(ae,{key:1,style:{width:"max-content","margin-bottom":"17px"},class:"rounded-3xl border-none text-base px-16",message:`审核状态：已拒绝    拒绝原因：${null==(e=a.value)?void 0:e.reason}`,showIcon:"",type:"error"},{icon:b((()=>[K])),_:1},8,["message"])):h("",!0),x(j,{model:a.value,"label-col":{span:3},"wrapper-col":{span:14}},{default:b((()=>[x(o,{label:"认证类型",class:"mb-6"},{default:b((()=>[_(g(1==a.value.type?"企业认证":"个人认证"),1)])),_:1}),1==a.value.type?(m(),y("div",N,[x(o,{label:"企业名称",class:"mb-6"},{default:b((()=>[_(g(a.value.company_name),1)])),_:1}),x(o,{label:"社会统一信息代码",class:"mb-6"},{default:b((()=>[_(g(a.value.company_code),1)])),_:1}),x(o,{label:"营业执照",class:"mb-6"},{default:b((()=>[x("div",Q,[x(w,{src:a.value.business_license},null,8,["src"])])])),_:1}),x(o,{label:"办公地址",class:"mb-6"},{default:b((()=>[_(g(a.value.address),1)])),_:1}),x(o,{label:"法人姓名",class:"mb-6"},{default:b((()=>[_(g(a.value.name),1)])),_:1}),x(o,{label:"法人身份证号码",class:"mb-6"},{default:b((()=>[_(g(a.value.idcard),1)])),_:1}),x(o,{label:"法人联系手机号",class:"mb-6"},{default:b((()=>[_(g(a.value.phone),1)])),_:1})])):(m(),y("div",R,[x(o,{label:"身份照证件号码",class:"mb-6"},{default:b((()=>[_(g(a.value.idcard),1)])),_:1}),x(o,{label:"营业执照",class:"mb-6"},{default:b((()=>[x("div",V,[x("div",W,[x(w,{src:a.value.idcard_front},null,8,["src"])]),x("div",X,[x(w,{src:a.value.idcard_back},null,8,["src"])])])])),_:1}),x(o,{label:"联系手机号",class:"mb-6"},{default:b((()=>[_(g(a.value.phone),1)])),_:1}),x(o,{label:"联系地址",class:"mb-6"},{default:b((()=>[_(g(a.value.address),1)])),_:1})]))])),_:1},8,["model"]),2===c.value?(m(),y(k,{key:2,class:"mt-16",type:"primary",shape:"round",style:{width:"150px"},onClick:s[18]||(s[18]=e=>r.value=!0)},{default:b((()=>[Y])),_:1})):h("",!0)]})),_:1}))}}});export default Z;
