import{n as e,b as a,M as o,N as n,O as t}from"./vendor.61326bd2.js";var r="undefined"!=typeof window,l=r?window:global,u=Date.now();function i(e){var a=Date.now(),o=Math.max(0,16-(a-u)),n=setTimeout(e,o);return u=a+o,n}function s(e){return(l.requestAnimationFrame||i).call(l,e)}function v(u){var i,v,m,f,h=e(u.time),c=a((()=>{return{total:e=h.value,days:Math.floor(e/864e5),hours:Math.floor(e%864e5/36e5),minutes:Math.floor(e%36e5/6e4),seconds:Math.floor(e%6e4/1e3),milliseconds:Math.floor(e%1e3)};var e})),d=()=>{var e;m=!1,e=i,(l.cancelAnimationFrame||l.clearTimeout).call(l,e)},M=()=>Math.max(v-Date.now(),0),w=e=>{h.value=e,null==u.onChange||u.onChange(c.value),0===e&&(d(),null==u.onFinish||u.onFinish())},p=()=>{i=s((()=>{m&&(w(M()),h.value>0&&p())}))},D=()=>{i=s((()=>{if(m){var e=M();a=e,o=h.value,(Math.floor(a/1e3)!==Math.floor(o/1e3)||0===e)&&w(e),h.value>0&&D()}var a,o}))},F=()=>{r&&(u.millisecond?p():D())};return o(d),n((()=>{f&&(m=!0,f=!1,F())})),t((()=>{m&&(d(),f=!0)})),{start:()=>{m||(v=Date.now()+h.value,m=!0,F())},pause:d,reset:(e=u.time)=>{d(),h.value=e},current:c}}export{v as u};
