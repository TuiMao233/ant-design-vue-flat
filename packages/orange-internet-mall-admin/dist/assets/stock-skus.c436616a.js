import{_ as e}from"./EditCardItem.9ed044a9.js";import{_ as l}from"./ImageItem.b647d306.js";import{a as t,e as a,r as o,b as s,o as i,c as d,g as u,F as n,P as p,u as r,s as c,X as m,t as _,k as b,p as V,h as v}from"./vendor.71e19cde.js";import{n as g,l as k}from"./index.a53c91c6.js";const h=b();V("data-v-9b7d848a");const f={class:"stock-skus"},y={class:"sku-list"},w={class:"items-container oe-flex"},U=u("div",{class:"curve"},null,-1),j={class:"items-list oe-flex-1"},x=m(" 删除 "),C=m(" 新增规格值 "),I={class:"oe-flex"},z=u("div",{class:"add-button-box"},[u("i",{class:"ad-shapePlus"}),u("span",{class:"text"},"新增规格")],-1),E=u("div",{class:"tips"},"只可添加3个主规格 ,12个规格值",-1),q={class:"batch-container oe-flex"},A=u("div",{class:"title oe-m-r-14"},"批量设置",-1),O={class:"batch-list"},P=m("应用");v();var $=t({expose:[],props:{skus:{type:Array,required:!0},table:{type:Array,required:!0}},setup(t,{emit:b}){const V=t,v=a({get:()=>V.skus,set:e=>b("update:skus",e)}),$=a({get:()=>V.table,set:e=>b("update:table",e)}),F=o({price:{title:"售卖价/元",value:""},original_price:{title:"划线价/元",value:""},cost_price:{title:"成本价",value:""},stock:{title:"库存",value:""},stock_warning:{title:"库存预警",value:""},goods_code:{title:"商品编码",value:""},bar_code:{title:"商品条形码",value:""},weight:{title:"重量/g",value:""}}),X=()=>{const e={id:g(5),title:"",items:[{id:g(5),title:"",spec_id:"",parent_label:""}]};v.value.push(e),$.value=D()},B=e=>{const l={id:g(5),title:"",spec_id:"",parent_label:""};e.items.push(l);const t=D();$.value=t,G(t)},D=()=>{const e=[],l=(t=[],a,o)=>{for(let s=0;s<o[a].items.length;s++)o[a].items[s].parent_label=o[a].title,o[a].items[s].spec_id=o[a].id,a<o.length-1?(t[a]=o[a].items[s],l(t,a+1,o)):e.push([...t,o[a].items[s]])};l([],0,v.value);return e.map((e=>e.reduce(((e,l)=>(e.specs.push(l.id),l.parent_label&&(e.titles[l.parent_label]=l.title),e.title_jion=Object.keys(e.titles).map((l=>`${l}:${e.titles[l]}`)).join(" "),e.title=Object.values(e.titles).filter((e=>e)).join("+"),e)),{title:"",title_jion:"",specs:[],titles:{},thumb:"",price:"",cost_price:"",original_price:"",stock:"",stock_warning:"",sales:"",weight:"",goods_code:"",bar_code:""})))},G=e=>{const l=e||D();k.forEach($.value,((e,t)=>{e.titles=l[t].titles,e.title=l[t].title,e.title_jion=l[t].title_jion}))},H=()=>{k.forIn(F,((e,l)=>{""!==e.value&&(k.forEach($.value,(t=>{t[l]=e.value})),e.value="")}))};return v.value.length||X(),h(((t,a)=>{const o=s("el-input"),b=s("el-link"),V=s("el-button"),g=s("el-table-column"),k=s("el-table");return i(),d("div",f,[u("div",y,[(i(!0),d(n,null,p(r(v),((l,t)=>(i(),d(e,{key:l.id,onClose:e=>(e=>{v.value.splice(e,1),$.value=D()})(t),"show-close":r(v).length>1},{default:h((()=>[u(o,{modelValue:l.title,"onUpdate:modelValue":e=>l.title=e,placeholder:"请填写规格，如颜色、尺码、大小",onInput:a[1]||(a[1]=e=>G())},null,8,["modelValue","onUpdate:modelValue"]),u("div",w,[U,u("div",j,[(i(!0),d(n,null,p(l.items,((e,t)=>(i(),d("div",{class:"items-item",key:e.id},[u(o,{modelValue:e.title,"onUpdate:modelValue":l=>e.title=l,placeholder:"请填写规格，如颜色、尺码、大小",onInput:a[2]||(a[2]=e=>G())},null,8,["modelValue","onUpdate:modelValue"]),l.items.length>1?(i(),d(b,{key:0,href:"javascript:;",type:"primary",class:"del-sku",onClick:e=>((e,l)=>{$.value=$.value.filter((t=>{let a=[];return a="string"==typeof t.specs?t.specs.split(","):t.specs,a.some((t=>e.items[l].id!==t))})),e.items.splice(l,1),$.value=D()})(l,t)},{default:h((()=>[x])),_:2},1032,["onClick"])):c("",!0)])))),128))])]),l.items.length<12?(i(),d(V,{key:0,size:"mini",type:"primary",class:"add-sku",onClick:e=>B(l)},{default:h((()=>[C])),_:2},1032,["onClick"])):c("",!0)])),_:2},1032,["onClose","show-close"])))),128))]),u("div",I,[r(v).length<3?(i(),d(V,{key:0,class:"add-goods oe-m-r-14",type:"primary",size:"small",onClick:X},{default:h((()=>[z])),_:1})):c("",!0),E]),u("div",q,[A,u("div",O,[(i(!0),d(n,null,p(r(F),((e,l)=>(i(),d(o,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,placeholder:e.title,key:l},null,8,["modelValue","onUpdate:modelValue","placeholder"])))),128))]),u(V,{size:"mini",onClick:H},{default:h((()=>[P])),_:1})]),u(k,{data:r($),height:500},{default:h((()=>[r(v)[0]?(i(),d(g,{key:0,label:r(v)[0].title||"暂无规格名称"},{default:h((({row:e})=>[m(_(e.title.split("+")[0]||"暂无规格名称"),1)])),_:1},8,["label"])):c("",!0),r(v)[1]?(i(),d(g,{key:1,label:r(v)[1].title||"暂无规格名称"},{default:h((({row:e})=>[m(_(e.title.split("+")[1]||"暂无规格名称"),1)])),_:1},8,["label"])):c("",!0),r(v)[2]?(i(),d(g,{key:2,label:r(v)[2].title||"暂无规格名称"},{default:h((({row:e})=>[m(_(e.title.split("+")[2]||"暂无规格名称"),1)])),_:1},8,["label"])):c("",!0),u(g,{prop:"thumb",label:"商品图片"},{default:h((({row:e})=>[u(l,{modelValue:e.thumb,"onUpdate:modelValue":l=>e.thumb=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),u(g,{prop:"price",label:"售卖价/元"},{default:h((({row:e})=>[u(o,{type:"number",modelValue:e.price,"onUpdate:modelValue":l=>e.price=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),u(g,{prop:"original_price",label:"划线价/元"},{default:h((({row:e})=>[u(o,{type:"number",modelValue:e.original_price,"onUpdate:modelValue":l=>e.original_price=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),u(g,{prop:"cost_price",label:"成本价"},{default:h((({row:e})=>[u(o,{type:"number",modelValue:e.cost_price,"onUpdate:modelValue":l=>e.cost_price=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),u(g,{prop:"stock",label:"库存"},{default:h((({row:e})=>[u(o,{type:"number",modelValue:e.stock,"onUpdate:modelValue":l=>e.stock=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),u(g,{prop:"stock_warning",label:"库存预警"},{default:h((({row:e})=>[u(o,{type:"number",modelValue:e.stock_warning,"onUpdate:modelValue":l=>e.stock_warning=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),u(g,{prop:"goods_code",label:"商品编码"},{default:h((({row:e})=>[u(o,{type:"number",modelValue:e.goods_code,"onUpdate:modelValue":l=>e.goods_code=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),u(g,{prop:"goods_code",label:"商品条形码"},{default:h((({row:e})=>[u(o,{type:"number",modelValue:e.bar_code,"onUpdate:modelValue":l=>e.bar_code=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),u(g,{prop:"weight",label:"重量/g"},{default:h((({row:e})=>[u(o,{type:"number",modelValue:e.weight,"onUpdate:modelValue":l=>e.weight=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"])])}))}});$.__scopeId="data-v-9b7d848a";export{$ as _};
