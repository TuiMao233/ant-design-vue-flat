import{a as e,u as a,f as l,_ as t,ab as s,c as o,W as n}from"./index.a53c91c6.js";import{a as i,l as c,w as d,b as r,o as u,c as p,g as m,t as g,u as v,k as f,p as h,X as b,h as y}from"./vendor.71e19cde.js";const z=f();h("data-v-6ffbfcf4");const C={class:"header"},_={class:"header-left"},w=m("div",{class:"add-button-box"},[m("i",{class:"ad-shapePlus"}),m("span",{class:"text"},"新增分组")],-1),x={class:"header-right"},S=m("i",{class:"el-input__icon el-icon-search"},null,-1),k={class:"overflow-ellipsis"},V={class:"edit oe-flex"},P=b("编辑"),j=b("删除"),B={class:"goods-list-footer"},T={class:"select-all"},A=b(" 全选当前页 "),F=b(" 删除 "),U={class:"completePager"};y();var q=i({expose:[],setup(i){const{pagination:f,handleSizeChange:h,handleCurrentChange:b}=e(),y=a(),q=e=>{y.push({path:"/commodity/addGrouping",query:{id:e}})},E=c([]),G=c(""),I=c(),W=c([]),X=()=>{W.value.length?D.value=!0:D.value=!1},D=c(!1),H=e=>{var a,l;e&&W.value?1==e&&(null==(l=I.value)||l.toggleAllSelection()):null==(a=I.value)||a.clearSelection()},J=async()=>{const{data:e}=await n({page:f.currentPage,limit:f.pageSize,name:G.value});f.total=e.data.total,E.value=e.data.data,E.value=e.data.data};d([()=>f.currentPage,()=>f.pageSize,G],J,{immediate:!0});const K=()=>{t.confirm("此操作将永久删除选中分组, 是否继续?","删除分组",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=[];W.value.forEach((a=>{e.push(a.id)})),await s({id:e.join()}),o({type:"success",message:"删除成功!"}),J()}))},L=e=>{W.value=e};return d(W,(()=>{W.value.length==E.value.length?D.value=!0:D.value=!1})),z(((e,a)=>{const n=r("el-button"),i=r("el-input"),c=r("el-empty"),d=r("el-table-column"),y=r("custom-button"),M=r("el-table"),N=r("el-checkbox"),O=r("el-pagination"),Q=r("el-card");return u(),p(Q,{shadow:"never",class:"custom-crad-container"},{default:z((()=>[m("div",C,[m("div",_,[m(n,{class:"add-goods",type:"primary",size:"small",onClick:a[1]||(a[1]=e=>q())},{default:z((()=>[w])),_:1})]),m("div",x,[m(i,{placeholder:"请输入名称",size:"small",modelValue:G.value,"onUpdate:modelValue":a[2]||(a[2]=e=>G.value=e)},{suffix:z((()=>[S])),_:1},8,["modelValue"])])]),m(M,{border:!1,class:"goods-list",ref:I,data:E.value,"tooltip-effect":"dark",style:{width:"100%"},onSelectAll:X,onSelectionChange:L,"default-sort":{prop:["createtime","num","type"],order:"descending"}},{empty:z((()=>[m(c,{class:"oe-m-t-30",description:"暂无商品分组"})])),default:z((()=>[m(d,{type:"selection",width:"55"}),m(d,{label:"分组名称",prop:"name"}),m(d,{label:"描述",prop:"summarize"},{default:z((e=>[m("div",k,g(e.row.summarize),1)])),_:1}),m(d,{label:"商品数",prop:"num",sortable:""}),m(d,{label:"新增时间",prop:"createtime",sortable:""},{default:z((e=>[m("span",null,g(v(l)(e.row.createtime)),1)])),_:1}),m(d,{label:"操作",width:"180"},{default:z((e=>[m("div",V,[m(n,{class:"oe-m-l-0",type:"primary",onClick:a=>q(e.row.id),size:"mini",icon:"ad-edit"},{default:z((()=>[P])),_:2},1032,["onClick"]),m(y,{onClick:a=>{return l=e.row.id,void t.confirm("此操作将永久删除该分组, 是否继续?","删除分组",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await s({id:l}),o({type:"success",message:"删除成功!"}),J()}));var l},icon:"ad-delete",color:"#FF0000",class:"public-move-left"},{default:z((()=>[j])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),m("div",B,[m("div",T,[m(N,{class:"oe-m-r-14",modelValue:D.value,"onUpdate:modelValue":a[3]||(a[3]=e=>D.value=e),onChange:H},{default:z((()=>[A])),_:1},8,["modelValue"]),m(n,{disabled:!W.value.length,type:"text",onClick:K},{default:z((()=>[F])),_:1},8,["disabled"])]),m("div",U,[m(O,{background:"",onSizeChange:v(h),onCurrentChange:v(b),"current-page":v(f).currentPage,"page-sizes":v(f).pageSizes,"page-size":v(f).pageSize,layout:"total, sizes, prev, pager, next, jumper",total:v(f).total},null,8,["onSizeChange","onCurrentChange","current-page","page-sizes","page-size","total"])])])])),_:1})}))}});q.__scopeId="data-v-6ffbfcf4";export default q;
