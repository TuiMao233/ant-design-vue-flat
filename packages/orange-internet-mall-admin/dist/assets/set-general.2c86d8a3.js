import{aE as e,a4 as l,M as a,aC as t,c as s,B as u,aB as o}from"./index.a53c91c6.js";import{a as r,l as d,m as n,b as i,o as p,c,g as m,s as v,k as h,p as g,X as _,h as b,d as y}from"./vendor.71e19cde.js";const f=h();g("data-v-3cad08e0");const V={class:"set-general"},x=m("div",{class:"recharge-title"},"商城状态",-1),S=m("div",{class:"recharge-title"},"商城设置",-1),w=_("选择图片"),I=m("div",{class:"el-upload__tip text-style"}," 图片为正方形，建议尺寸800*800，用于商城首页分享的系统默认宣传图 ",-1),k={class:"oe-flex"},U=m("div",{class:"set-icon-text"},[m("i",{class:"el-icon-warning-outline"}),m("span",null,"示例")],-1),T=_("选择图片"),P=m("p",{class:"text-style"},"图片为正方形，建议尺寸200*200，用于网络较慢图片未加载出来的占位图",-1),H=m("p",{class:"text-style"}," 关闭时, 买家在手机端无法放大查看完整商品图片和商品情图片 ",-1),C=_("开启"),L=_("关闭"),N=m("div",{class:"recharge-title"},"注册设置",-1),q=m("p",{class:"text-style"},"注册会员时, 是否显示注册协议和隐私政策",-1),z={class:"oe-flex"},D=m("div",{class:"tips-box"}," 协议需公证才生效，使用前，请先公证 ",-1),B=m("div",{class:"recharge-title"},"授权/关注",-1),O=m("div",{class:"set-icon-text"},[m("i",{class:"el-icon-warning-outline"}),m("span",null,"示例")],-1),E=m("p",{class:"text-style"}," 开启后, 用户进入店铺时, 强制弹出授权登录弹窗引导登录成为会员 ",-1),j=_(" 不显示“暂不登录”按钮（不推荐） "),G=m("div",{class:"set-icon-text"},[m("i",{class:"el-icon-warning-outline"}),m("span",null,"示例")],-1),$={class:"set-footer"},F=_("取消"),M=_("保存");b();var X=r({expose:[],setup(r){const h=d(""),g=d({businessSet:"",homeData:"",businessHours:[],mallStatus:"",link:"",mallName:"",mallPictures:"",service_phone:"",mallIntroduction:"",loadIconType:"",loadIcon:"",picturePreview:"",copyright:{type:"1",value:""},agreement:"",agreementTilte:"",agreementContent:"",authorizedLogin:"",displayBtn:!1}),_=d(["",""]),b=d(""),X=d({businessSet:[{required:!0,message:"请选择营业设置",trigger:"blur"}],businessHours:[{required:!0,message:"请输入营业时间",trigger:"blur"}],mallName:[{required:!0,message:"请输入商城名称",trigger:"blur"}],mallPictures:[{required:!0,message:"请上传商品LOGO",trigger:"blur"}],mallIntroduction:[{required:!0,message:"请输入商城简介",trigger:"blur"}],service_phone:[{required:!0,validator:(e,l,a)=>{const t=/^(?:(?:\+|00)86)?1[3-9]\d{9}$/.test(l),s=/^(?:(?:\d{3}-)?\d{8}|^(?:\d{4}-)?\d{7,8})(?:-\d+)?$/.test(l);""==l?a(new Error("请输入客服电话")):t||s?a():a(new Error("格式不正确"))},trigger:"blur"}]}),A=e=>{a({multiple:!1}).then((l=>{0==e?g.value.mallPictures=l[0].path.url:g.value.loadIcon=l[0].path.url}))},J=()=>{h.value.validate((e=>{e&&K()}))},K=async()=>{"自定义"==g.value.businessSet&&(_.value[0]=y(g.value.businessHours[0]).unix().toString(),_.value[1]=y(g.value.businessHours[1]).unix().toString());const e={run_status:{type:"休息"==g.value.mallStatus?"1":"0",value:g.value.link},business_hours:{type:"全天"==g.value.businessSet?"0":"1",value:_.value},index_data:"今日数据"==g.value.homeData?"today":"昨日数据"==g.value.homeData?"yester":"hebdomad",shop_name:g.value.mallName,logo:g.value.mallPictures,service_phone:g.value.service_phone,introduce:g.value.mallIntroduction,load_image:{type:"系统默认"==g.value.loadIconType?"0":"1",value:"系统默认"==g.value.loadIconType?"http://cdn.weitshop.cn/uploads/shop/id_1/group_47/202104/2756_img.png":g.value.loadIcon},image_preview:"开启"==g.value.picturePreview?"1":"0",agreement:"开启"==g.value.agreement?"1":"0",title:g.value.agreementTilte,content:g.value.agreementContent,auth_login:"开启"==g.value.authorizedLogin?"1":"0",copyright:g.value.copyright};await t("ShopSet",e),s.success("操作成功"),Q()},Q=async()=>{await u.dispatch("generalSettings",{key:"ShopSet"});const{data:e}=await o({key:"ShopSet"}),l=e.data;g.value.service_phone=l.shopSet.service_phone,g.value.copyright=l.shopSet.copyright,g.value.mallStatus="0"==l.shopStatus.run_status.type?"营业":"休息",g.value.link=l.shopStatus.run_status.value,g.value.businessSet="0"==l.shopStatus.business_hours.type?"全天":"自定义",g.value.businessHours[0]=1e3*l.shopStatus.business_hours.value[0],g.value.businessHours[1]=1e3*l.shopStatus.business_hours.value[1],g.value.homeData="today"==l.shopStatus.index_data?"今日数据":"yester"==l.shopStatus.index_data?"昨日数据":"7天数据",g.value.mallName=l.shopSet.shop_name,g.value.mallPictures=l.shopSet.logo,g.value.mallIntroduction=l.shopSet.introduce,g.value.loadIconType="1"==l.shopSet.load_image.type?"自定义":"系统默认",g.value.loadIcon=l.shopSet.load_image.value,g.value.picturePreview="1"==l.shopSet.image_preview?"开启":"关闭",g.value.agreement="1"==l.registerSet.agreement?"开启":"关闭",g.value.agreementTilte=l.registerSet.title,g.value.agreementContent=l.registerSet.content,g.value.authorizedLogin="1"==l.auth.auth_login?"开启":"关闭"};return n((async()=>{Q();const{data:l}=await e();b.value=l.data})),f(((e,a)=>{const t=i("el-radio"),s=i("el-radio-group"),u=i("el-form-item"),o=i("el-input"),r=i("el-time-picker"),d=i("el-card"),n=i("el-image"),_=i("el-button"),y=i("el-popover"),K=i("el-checkbox"),R=i("el-form");return p(),c("div",V,[m(R,{model:g.value,rules:X.value,ref:h,"label-width":"130px",class:"demo-ruleForms"},{default:f((()=>[m(d,{shadow:"never",class:"box-card"},{default:f((()=>[x,m(u,{label:"商城状态",prop:"region"},{default:f((()=>[m(s,{modelValue:g.value.mallStatus,"onUpdate:modelValue":a[1]||(a[1]=e=>g.value.mallStatus=e)},{default:f((()=>[m(t,{label:"营业"}),m(t,{label:"休息"})])),_:1},8,["modelValue"])])),_:1}),"休息"==g.value.mallStatus?(p(),c(u,{key:0,label:"关闭后进入跳转至"},{default:f((()=>[m(o,{style:{width:"320px"},type:"text",placeholder:"输入跳转链接",modelValue:g.value.link,"onUpdate:modelValue":a[2]||(a[2]=e=>g.value.link=e)},null,8,["modelValue"])])),_:1})):v("",!0),m(u,{label:"营业时间",prop:"businessSet"},{default:f((()=>[m("div",null,[m(s,{modelValue:g.value.businessSet,"onUpdate:modelValue":a[3]||(a[3]=e=>g.value.businessSet=e)},{default:f((()=>[m(t,{label:"全天"}),m(t,{label:"自定义"})])),_:1},8,["modelValue"])])])),_:1}),"自定义"==g.value.businessSet?(p(),c(u,{key:1,prop:"businessHours"},{default:f((()=>[m(r,{"arrow-control":"","is-range":"",modelValue:g.value.businessHours,"onUpdate:modelValue":a[4]||(a[4]=e=>g.value.businessHours=e),"range-separator":"至",format:"HH:mm","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},null,8,["modelValue"])])),_:1})):v("",!0),m(u,{label:"首页数据",prop:"region"},{default:f((()=>[m(s,{modelValue:g.value.homeData,"onUpdate:modelValue":a[5]||(a[5]=e=>g.value.homeData=e)},{default:f((()=>[m(t,{label:"昨日数据"}),m(t,{label:"今日数据"}),m(t,{label:"7天数据"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),m(d,{shadow:"never",class:"box-card"},{default:f((()=>[S,m(u,{label:"商城名称",prop:"mallName",class:"set-shop-name"},{default:f((()=>[m(o,{type:"text",placeholder:"请输入商城名字",modelValue:g.value.mallName,"onUpdate:modelValue":a[6]||(a[6]=e=>g.value.mallName=e),maxlength:"15","show-word-limit":""},null,8,["modelValue"])])),_:1}),m(u,{label:"商城LOGO",prop:"mallPictures"},{default:f((()=>[m(n,{class:"el-upload-list__item-thumbnail",src:g.value.mallPictures,fit:"cover",alt:""},null,8,["src"]),m("div",null,[m(_,{type:"text",onClick:a[7]||(a[7]=e=>A(0))},{default:f((()=>[w])),_:1}),I])])),_:1}),m(u,{label:"客服电话",prop:"service_phone",class:"set-shop-introduce"},{default:f((()=>[m(o,{style:{width:"320px"},type:"number",placeholder:"请输入联系电话",modelValue:g.value.service_phone,"onUpdate:modelValue":a[8]||(a[8]=e=>g.value.service_phone=e)},null,8,["modelValue"])])),_:1}),m(u,{label:"商城简介",prop:"mallIntroduction",class:"set-shop-introduce"},{default:f((()=>[m(o,{type:"textarea",rows:6,placeholder:"请输入内容",modelValue:g.value.mallIntroduction,"onUpdate:modelValue":a[9]||(a[9]=e=>g.value.mallIntroduction=e)},null,8,["modelValue"])])),_:1}),m(u,{label:"加载图标"},{default:f((()=>[m("div",k,[m(s,{modelValue:g.value.loadIconType,"onUpdate:modelValue":a[10]||(a[10]=e=>g.value.loadIconType=e)},{default:f((()=>[m(t,{label:"系统默认"}),m(t,{label:"自定义"})])),_:1},8,["modelValue"]),m(y,{placement:"right",width:360,trigger:"hover"},{reference:f((()=>[U])),default:f((()=>[m(n,{src:"/addons/weitshop_shop/weshop/public/home/backend/images/system/product-loading.png",class:"examples-img",style:{width:"351px",height:"250px"},fit:"cover"})])),_:1})])])),_:1}),m(u,null,{default:f((()=>["系统默认"==g.value.loadIconType?(p(),c(n,{key:0,fit:"cover",src:"http://cdn.weitshop.cn/uploads/shop/id_1/group_47/202104/2756_img.png"})):v("",!0),"系统默认"!=g.value.loadIconType?(p(),c(n,{key:1,fit:"cover",src:g.value.loadIcon},null,8,["src"])):v("",!0),m("div",null,["系统默认"!=g.value.loadIconType?(p(),c(_,{key:0,type:"text",onClick:a[11]||(a[11]=e=>A(1))},{default:f((()=>[T])),_:1})):v("",!0),P])])),_:1}),m(u,{label:"商城图片预览",prop:"region",class:"set-shop-introduce"},{default:f((()=>[m(s,{modelValue:g.value.picturePreview,"onUpdate:modelValue":a[12]||(a[12]=e=>g.value.picturePreview=e)},{default:f((()=>[m(t,{label:"开启"}),m(t,{label:"关闭"})])),_:1},8,["modelValue"]),H])),_:1}),m(u,{label:"版权显示设置",prop:"region",class:"set-shop-introduce"},{default:f((()=>[m(s,{modelValue:g.value.copyright.type,"onUpdate:modelValue":a[13]||(a[13]=e=>g.value.copyright.type=e)},{default:f((()=>[m(t,{label:"1"},{default:f((()=>[C])),_:1}),m(t,{label:"0"},{default:f((()=>[L])),_:1})])),_:1},8,["modelValue"])])),_:1}),"1"==g.value.copyright.type?(p(),c(u,{key:0,label:"版权显示内容",class:"set-shop-introduce"},{default:f((()=>[m(o,{style:{width:"320px"},placeholder:"请输入版权内容",modelValue:g.value.copyright.value,"onUpdate:modelValue":a[14]||(a[14]=e=>g.value.copyright.value=e)},null,8,["modelValue"])])),_:1})):v("",!0)])),_:1}),m(d,{shadow:"never",class:"box-card"},{default:f((()=>[N,m(u,{label:"协议/政策",prop:"region"},{default:f((()=>[m(s,{modelValue:g.value.agreement,"onUpdate:modelValue":a[15]||(a[15]=e=>g.value.agreement=e)},{default:f((()=>[m(t,{label:"开启"}),m(t,{label:"关闭"})])),_:1},8,["modelValue"]),q])),_:1}),m(u,{label:"协议标题",prop:"name",class:"set-shop-name"},{default:f((()=>[m("div",z,[m(o,{type:"text",placeholder:"请输入协议标题",modelValue:g.value.agreementTilte,"onUpdate:modelValue":a[16]||(a[16]=e=>g.value.agreementTilte=e),maxlength:"10","show-word-limit":""},null,8,["modelValue"]),m("a",{href:b.value,class:"download-text"},"下载协议模板",8,["href"])]),D])),_:1}),m(u,{label:"协议内容",prop:"region",class:"text-line-height"},{default:f((()=>[m(l,{class:"rich-text",modelValue:g.value.agreementContent,"onUpdate:modelValue":a[17]||(a[17]=e=>g.value.agreementContent=e),width:"100%"},null,8,["modelValue"])])),_:1})])),_:1}),m(d,{shadow:"never",class:"box-card"},{default:f((()=>[B,m(u,{label:"授权登录",prop:"region"},{default:f((()=>[m(s,{modelValue:g.value.authorizedLogin,"onUpdate:modelValue":a[18]||(a[18]=e=>g.value.authorizedLogin=e)},{default:f((()=>[m(t,{label:"开启"}),m(t,{label:"关闭"})])),_:1},8,["modelValue"]),m(y,{placement:"top",width:200,trigger:"hover"},{reference:f((()=>[O])),default:f((()=>[m(n,{src:"/addons/weitshop_shop/weshop/public/home/backend/images/system/open-configure.png",class:"examples-img",style:{width:"193px",height:"230px"}})])),_:1}),E])),_:1}),"开启"==g.value.authorizedLogin?(p(),c(u,{key:0},{default:f((()=>[m(K,{modelValue:g.value.displayBtn,"onUpdate:modelValue":a[19]||(a[19]=e=>g.value.displayBtn=e)},null,8,["modelValue"]),j,m(y,{placement:"top",width:200,trigger:"hover"},{reference:f((()=>[G])),default:f((()=>[m(n,{src:"/addons/weitshop_shop/weshop/public/home/backend/images/system/login-configuration.png",class:"examples-img",style:{width:"193px",height:"230px"}})])),_:1})])),_:1})):v("",!0)])),_:1})])),_:1},8,["model","rules"]),m(d,{shadow:"never"},{default:f((()=>[m("div",$,[m(_,{onClick:Q},{default:f((()=>[F])),_:1}),m(_,{type:"primary",onClick:J},{default:f((()=>[M])),_:1})])])),_:1})])}))}});X.__scopeId="data-v-3cad08e0";export default X;
