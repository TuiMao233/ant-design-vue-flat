import{b as e,h as l,i as a}from"./marketing.64a7433e.js";import{a as t,l as u,b as o,o as n,c as d,g as s,X as i,t as r,s as p,F as m,P as c,u as v,k as _,p as b,h as f,d as g}from"./vendor.71e19cde.js";import{u as y,L as V,c as h}from"./index.a53c91c6.js";const k=_();b("data-v-752b7930");const x=i("折扣券"),w=i("满减券"),U=i("不限制"),j=i("指定可用商品"),C=i("指定商品分组"),q=i("指定商品分类"),T={class:"oe-flex Member-name"},S={key:0,class:"Member-name-text"},D=i("实体"),M={key:1,class:"Member-name-text"},z=i("虚拟"),I=s("div",{class:"is-color"},"¥192.00",-1),P={class:"column-width"},E=i("删除"),F=i("替换"),L=s("i",{class:"el-icon-plus el-icon--left"},null,-1),X=i("添加"),A=s("span",{class:"inSpace"},"消费券",-1),B=i("元"),G={key:0,class:"inSpace"},H=i("折"),J={key:2,class:"inSpace"},K=i("折"),N=i("张"),O=i("张"),Q={class:"date-picker"},R={class:"date-picker"},W=i("全部会员"),Y=i("指定会员等级"),Z={class:"set-footer"},$=i("取消"),ee=i("保存");f();var le=t({expose:[],setup(t){const _=y(),b=async()=>{const e=await V({option:{commodity:!0}});_e.value.every((l=>l.id!=e.id))?_e.value.push(e):h("列表已有该商品")},f=u([]);e().then((e=>{f.value=e.data.data.data}));const le={multiple:!0,expandTrigger:"hover",value:"id",label:"name",checkStrictly:!0,emitPath:!1},ae=u([]);l().then((e=>{ae.value=e.data.data.data}));const te=u(3),ue=u({name:[{required:!0,message:"请填写优惠券名称",trigger:"blur"}],to_obj:[{required:!0,message:"请选择可使用范围",trigger:"blur"}],condition_order_amount:[{required:!0,message:"请填写优惠券面额",trigger:"blur"}],stock:[{required:!0,message:"请填写优惠券总限制数",trigger:"blur"}],start_time:[{required:!0,message:"请填写开始/结束发放时间",trigger:"blur"}],use_start_time:[{required:!0,message:"请填写使用时间限制",trigger:"blur"}],user_limit:[{required:!0,message:"请填写领取会员限制",trigger:"blur"}],explain:[{required:!0,message:"请填写优惠券说明",trigger:"blur"}]}),oe=()=>{ne.value=!ne.value},ne=u(!0),de=u(1);u(1);const se=u(null),ie=u(null),re=u([{text:"最近一周",value:(()=>{const e=new Date,l=new Date;return l.setTime(l.getTime()-6048e5),[l,e]})()},{text:"最近一个月",value:(()=>{const e=new Date,l=new Date;return l.setTime(l.getTime()-2592e6),[l,e]})()},{text:"最近三个月",value:(()=>{const e=new Date,l=new Date;return l.setTime(l.getTime()-7776e6),[l,e]})()}]),pe=u(1),me=e=>{null!=se.value&&(ve.value.start_time=g(se.value[0]).unix(),ve.value.end_time=g(se.value[1]).unix())},ce=e=>{null!=ie.value&&(ve.value.use_start_time=g(ie.value[0]).unix(),ve.value.use_end_time=g(ie.value[1]).unix())},ve=u({name:"",type:2,to_obj:1,condition_order_amount:"",money:"",stock:"",get_max_one_person:"",start_time:"",end_time:"",use_start_time:"",use_end_time:"",is_open:1,user_limit:1,user_limit_level:[],explain:"",appoint_content:[]}),_e=u([]);u([{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}]),u("");const be=u([{name:"普通等级",value:0},{name:"一级",value:1},{name:"二级",value:2},{name:"三级",value:3},{name:"四级",value:4},{name:"五级",value:5},{name:"六级",value:6},{name:"七级",value:7},{name:"八级",value:8}]),fe=async()=>{if(1==ve.value.to_obj&&(ve.value.appoint_content=[]),2==ve.value.to_obj){const e=[];_e.value.forEach((l=>{e.push(l.id)})),ve.value.appoint_content=e}if(3==ve.value.to_obj)if(""==ve.value.appoint_content)ve.value.appoint_content=[];else{const e=[ve.value.appoint_content];ve.value.appoint_content=e,e.push()}4==ve.value.to_obj&&""==ve.value.appoint_content&&(ve.value.appoint_content=[]),2==de.value&&(ve.value.stock=-1),2==pe.value&&(ve.value.get_max_one_person=-1),await a(ve.value),_.push("allCoupon")};return k(((e,l)=>{const a=o("el-input"),t=o("el-form-item"),u=o("el-tag"),g=o("el-radio"),y=o("el-radio-group"),ne=o("el-radio-button"),ge=o("el-image"),ye=o("el-table-column"),Ve=o("el-button"),he=o("el-table"),ke=o("el-option"),xe=o("el-select"),we=o("el-cascader"),Ue=o("el-switch"),je=o("el-date-picker"),Ce=o("el-checkbox"),qe=o("el-checkbox-group"),Te=o("el-card"),Se=o("el-col"),De=o("el-row"),Me=o("el-form");return n(),d(m,null,[s(Me,{class:"coupon-from",rules:ue.value,model:ve.value,"label-width":"150px"},{default:k((()=>[s(De,{gutter:20},{default:k((()=>[s(Se,null,{default:k((()=>[s(Te,{shadow:"never"},{default:k((()=>[s(t,{label:"优惠券名称",prop:"name"},{default:k((()=>[s(a,{class:"tips-inp",placeholder:"输入优惠券名称",modelValue:ve.value.name,"onUpdate:modelValue":l[1]||(l[1]=e=>ve.value.name=e)},null,8,["modelValue"])])),_:1}),s(t,{label:"优惠券类型"},{default:k((()=>[s("div",null,[s(y,{modelValue:ve.value.type,"onUpdate:modelValue":l[2]||(l[2]=e=>ve.value.type=e)},{default:k((()=>[s(g,{label:2},{default:k((()=>[s(u,{type:"success"},{default:k((()=>[x])),_:1})])),_:1}),s(g,{label:1},{default:k((()=>[s(u,{type:"danger"},{default:k((()=>[w])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1}),s(t,{label:"使用范围",prop:"to_obj"},{default:k((()=>[s(y,{class:"grade-radio-consumption",modelValue:ve.value.to_obj,"onUpdate:modelValue":l[7]||(l[7]=e=>ve.value.to_obj=e)},{default:k((()=>[s(ne,{onClick:l[3]||(l[3]=e=>oe()),border:"",label:1},{default:k((()=>[U])),_:1}),s(ne,{onClick:l[4]||(l[4]=e=>{}),border:"",label:2},{default:k((()=>[j])),_:1}),s(ne,{onClick:l[5]||(l[5]=e=>oe()),border:"",label:3},{default:k((()=>[C])),_:1}),s(ne,{onClick:l[6]||(l[6]=e=>oe()),border:"",label:4},{default:k((()=>[q])),_:1})])),_:1},8,["modelValue"])])),_:1}),2==ve.value.to_obj?(n(),d(t,{key:0,label:"产品名称"},{default:k((()=>[s(he,{class:"table-box","cell-style":{background:"#fff"},data:_e.value,style:{width:"660px"}},{default:k((()=>[s(ye,{label:"产品名称","min-width":"160",prop:"name"},{default:k((e=>[s("div",T,[s(ge,{style:{width:"32px",height:"32px"},src:e.row.main_picture,class:"Member-name-img"},null,8,["src"]),1==e.row.goods_type?(n(),d("div",S,[s(u,{type:"success",size:"mini"},{default:k((()=>[D])),_:1}),i(" "+r(e.row.name),1)])):p("",!0),2==e.row.goods_type?(n(),d("div",M,[s(u,{type:"danger",size:"mini"},{default:k((()=>[z])),_:1}),i(" "+r(e.row.name),1)])):p("",!0)])])),_:1}),s(ye,{prop:"address","min-width":"100",label:"产品价格"},{default:k((()=>[I])),_:1}),s(ye,{prop:"address",label:"操作","min-width":"150"},{default:k((e=>[s("div",P,[s(Ve,{type:"text",onClick:l=>(e=>{const l=_e.value.findIndex((l=>l.id==e));_e.value.splice(l,1)})(e.row.id)},{default:k((()=>[E])),_:2},1032,["onClick"]),s(Ve,{type:"text",onClick:l=>(async e=>{const l=await V({option:{commodity:!0}});if(_e.value.every((e=>e.id!=l.id))){const a=_e.value.findIndex((l=>l.id==e));_e.value.splice(a,1,l)}else h("列表已有该商品")})(e.row.id)},{default:k((()=>[F])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),s("div",{class:"btn-add",onClick:b},[s(Ve,null,{default:k((()=>[L,X])),_:1})])])),_:1})):p("",!0),3==ve.value.to_obj?(n(),d(t,{key:1,label:"分组选择"},{default:k((()=>[s(xe,{modelValue:ve.value.appoint_content,"onUpdate:modelValue":l[8]||(l[8]=e=>ve.value.appoint_content=e),placeholder:"分组选择"},{default:k((()=>[(n(!0),d(m,null,c(f.value,(e=>(n(),d(ke,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):p("",!0),4==ve.value.to_obj?(n(),d(t,{key:2,label:"分类选择"},{default:k((()=>[s(we,{placeholder:"选择分类",modelValue:ve.value.appoint_content,"onUpdate:modelValue":l[9]||(l[9]=e=>ve.value.appoint_content=e),size:"small",options:ae.value,props:le,clearable:"","collapse-tags":""},null,8,["modelValue","options"])])),_:1})):p("",!0),3==te.value?(n(),d(t,{key:3,label:"优惠券面额",prop:"condition_order_amount"},{default:k((()=>[A,s(a,{type:"number",class:"tips-inp",placeholder:"请输入金额",modelValue:ve.value.condition_order_amount,"onUpdate:modelValue":l[10]||(l[10]=e=>ve.value.condition_order_amount=e)},{append:k((()=>[B])),_:1},8,["modelValue"]),2==ve.value.type?(n(),d("span",G,"享")):p("",!0),2==ve.value.type?(n(),d(a,{key:1,type:"number",class:"tips-inp",placeholder:"请输入0.1-9.9",modelValue:ve.value.money,"onUpdate:modelValue":l[11]||(l[11]=e=>ve.value.money=e)},{append:k((()=>[H])),_:1},8,["modelValue"])):p("",!0),1==ve.value.type?(n(),d("span",J,"减")):p("",!0),1==ve.value.type?(n(),d(a,{key:3,type:"number",class:"tips-inp",placeholder:"请输入金额",modelValue:ve.value.money,"onUpdate:modelValue":l[12]||(l[12]=e=>ve.value.money=e)},{append:k((()=>[K])),_:1},8,["modelValue"])):p("",!0)])),_:1})):p("",!0),s(t,{label:"优惠券总数限制",prop:"stock"},{default:k((()=>[s(Ue,{class:"inSpace",modelValue:de.value,"onUpdate:modelValue":l[13]||(l[13]=e=>de.value=e),"active-value":1,"inactive-value":2},null,8,["modelValue"])])),_:1}),1==de.value?(n(),d(t,{key:4,prop:"stock"},{default:k((()=>[s(a,{class:"tips-inp",placeholder:"请输入数量",modelValue:ve.value.stock,"onUpdate:modelValue":l[14]||(l[14]=e=>ve.value.stock=e),modelModifiers:{number:!0},type:"number"},{append:k((()=>[N])),_:1},8,["modelValue"])])),_:1})):p("",!0),s(t,{label:"限制单人可领取"},{default:k((()=>[s(Ue,{class:"inSpace","active-value":1,"inactive-value":2,modelValue:pe.value,"onUpdate:modelValue":l[15]||(l[15]=e=>pe.value=e)},null,8,["modelValue"])])),_:1}),1==pe.value?(n(),d(t,{key:5},{default:k((()=>[s(a,{class:"tips-inp",placeholder:"请输入数量",modelValue:ve.value.get_max_one_person,"onUpdate:modelValue":l[16]||(l[16]=e=>ve.value.get_max_one_person=e),type:"number"},{append:k((()=>[O])),_:1},8,["modelValue"])])),_:1})):p("",!0),s(t,{label:"开始/结束发放时间",prop:"start_time"},{default:k((()=>[s("div",Q,[s(je,{"prefix-icon":"el-icon-date",onChange:me,modelValue:se.value,"onUpdate:modelValue":l[17]||(l[17]=e=>se.value=e),type:"datetimerange",shortcuts:re.value,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},null,8,["modelValue","shortcuts"])])])),_:1}),s(t,{label:"使用时间限制",prop:"use_start_time"},{default:k((()=>[s("div",R,[s(je,{"prefix-icon":"el-icon-date",onChange:ce,modelValue:ie.value,"onUpdate:modelValue":l[18]||(l[18]=e=>ie.value=e),type:"datetimerange",shortcuts:re.value,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},null,8,["modelValue","shortcuts"])])])),_:1}),s(t,{label:"是否公开"},{default:k((()=>[s(Ue,{class:"inSpace","active-value":1,"inactive-value":2,modelValue:ve.value.is_open,"onUpdate:modelValue":l[19]||(l[19]=e=>ve.value.is_open=e)},null,8,["modelValue"])])),_:1}),s(t,{label:"领取会员限制",prop:"user_limit"},{default:k((()=>[s(y,{modelValue:ve.value.user_limit,"onUpdate:modelValue":l[20]||(l[20]=e=>ve.value.user_limit=e)},{default:k((()=>[s(g,{label:1},{default:k((()=>[W])),_:1}),s(g,{label:2},{default:k((()=>[Y])),_:1})])),_:1},8,["modelValue"])])),_:1}),2===ve.value.user_limit?(n(),d(t,{key:6,label:"会员等级"},{default:k((()=>[s(qe,{modelValue:ve.value.user_limit_level,"onUpdate:modelValue":l[21]||(l[21]=e=>ve.value.user_limit_level=e)},{default:k((()=>[(n(!0),d(m,null,c(be.value,(e=>(n(),d(Ce,{label:e.value,key:e.value},{default:k((()=>[i(r(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})):p("",!0),s(t,{label:"优惠券说明",prop:"explain"},{default:k((()=>[s(a,{type:"textarea",class:"couponTextarea",rows:12,placeholder:"请输入备注",modelValue:ve.value.explain,"onUpdate:modelValue":l[22]||(l[22]=e=>ve.value.explain=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["rules","model"]),s(Te,{shadow:"never",class:"set-footer-btn"},{default:k((()=>[s("div",Z,[s(Ve,{onClick:l[23]||(l[23]=e=>v(_).push("allCoupon"))},{default:k((()=>[$])),_:1}),s(Ve,{onClick:fe,type:"primary"},{default:k((()=>[ee])),_:1})])])),_:1})],64)}))}});le.__scopeId="data-v-752b7930";export default le;
