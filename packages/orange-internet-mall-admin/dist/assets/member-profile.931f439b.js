var e=Object.defineProperty,a=Object.prototype.hasOwnProperty,t=Object.getOwnPropertySymbols,l=Object.prototype.propertyIsEnumerable,r=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,s=(e,s)=>{for(var o in s||(s={}))a.call(s,o)&&r(e,o,s[o]);if(t)for(var o of t(s))l.call(s,o)&&r(e,o,s[o]);return e};import{a as o,b as n,c as u}from"./member.c7d788b5.js";import"./index.6832bbdf.js";import{c}from"./index.a53c91c6.js";import{a as i,l as d,af as p,m as v,b as m,o as f,c as b,g as _,t as y,X as g,s as h,u as x,F as w,k as U,p as V,h as A}from"./vendor.71e19cde.js";const P=U();V("data-v-3e8def16");const j=g(" 对比昨日增加 "),I={style:{color:"var(--color-primary)"}},O=g(" 人 "),k=g("调整间隔"),B=_("div",{class:"card-header"},[_("span",{class:"container-title"},"近16日新增会员数")],-1),F=_("div",{class:"card-header"},[_("span",{class:"container-title"},"会员等级")],-1),L=_("div",{class:"card-header"},[_("span",{class:"container-title"},"会员注册渠道")],-1),M=g("天"),N=g("天"),S={class:"dialog-footer"},z=g("取 消"),C=g("确 定");A();var E=i({expose:[],setup(e){const a=d(!1),t=d({productInterval:"",notPurchased:""}),l=d(),r=d({productInterval:[{required:!0,message:"请输入购买产品间隔",trigger:"blur"}],notPurchased:[{required:!0,message:"请输入未购买产品间隔",trigger:"blur"}]}),i=d({}),U={tooltip:{trigger:"axis"},axisPointer:{show:!0},yAxis:{type:"value"}},V=d(s(s({},U),{tooltip:{trigger:"axis",formatter:"{b}<br/>新增会员数 {c}"},grid:{top:"8%",left:"0%",right:"2%",bottom:"0%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},series:[{data:[],type:"line",showSymbol:!0,smooth:!0}]})),A=d(s(s({},U),{tooltip:{trigger:"axis",formatter:"{b}<br/>等级人数 {c}"},grid:{top:"8%",left:"0%",right:"0%",bottom:"0%",containLabel:!0},xAxis:{type:"category",data:[],axisLabel:{interval:0}},yAxis:{type:"value"},series:[{data:[],type:"bar",barWidth:"20",itemStyle:{color:new p(0,0,0,1,[{offset:0,color:"#5B8FF9"},{offset:1,color:"rgba(91, 143, 249, 0)"}])}}]})),E=d(s(s({},U),{tooltip:{trigger:"axis",formatter:"{b}<br/>来源数 {c}"},grid:{top:"8%",left:"0%",right:"0%",bottom:"0%",containLabel:!0},xAxis:{type:"category",data:[]},yAxis:{type:"value"},series:[{data:[],type:"bar",barWidth:"20",itemStyle:{color:new p(0,0,0,1,[{offset:0,color:"#5B8FF9"},{offset:1,color:"rgba(91, 143, 249, 0)"}])}}]})),q=()=>{l.value.validate((async e=>{e&&(await n({activeValue:t.value.productInterval,silenceValue:t.value.notPurchased}),a.value=!1,c.success("修改成功"),W())}))},W=async()=>{const{data:e}=await u();t.value.productInterval=e.data.activeValue,t.value.notPurchased=e.data.silenceValue};return v((()=>{(async()=>{const{data:e}=await o();i.value=e.data,V.value.xAxis.data=Object.keys(i.value.newUser),V.value.series[0].data=Object.values(i.value.newUser);const a=[],t=[];i.value.userLevel.forEach((e=>{a.push(e.level_name),t.push(e.shop_user_num)})),A.value.xAxis.data=a,A.value.series[0].data=t,i.value.channelUser.forEach((e=>{E.value.xAxis.data.push(e.name),E.value.series[0].data.push(e.num)}))})(),W()})),P(((e,s)=>{const o=m("count-item"),n=m("el-card"),u=m("el-col"),c=m("el-button"),d=m("el-row"),p=m("v-charts"),v=m("el-input"),U=m("el-form-item"),W=m("el-form"),G=m("el-dialog");return f(),b(w,null,[_(d,{gutter:24},{default:P((()=>[_(u,{lg:24},{default:P((()=>[i.value.newMembers?(f(),b(d,{key:0,gutter:24},{default:P((()=>[_(u,{xl:{span:"4_8"},sm:{span:"4_8"}},{default:P((()=>[_(n,{shadow:"never",class:"e-grid count-container"},{default:P((()=>[_(o,{center:"center",icon:"total-membership",title:"总会员数/人",count:i.value.userNum.totleUser},null,8,["count"])])),_:1})])),_:1}),_(u,{xl:{span:"4_8"},sm:{span:"4_8"}},{default:P((()=>[_(n,{shadow:"never",class:"e-grid count-container"},{default:P((()=>[_(o,{center:"center",icon:"newly-member",title:"今日新增会员",count:i.value.newMembers.totleUser},{tips:P((()=>[j,_("span",I,y(i.value.newMembers.yesterdayUser),1),O])),_:1},8,["count"])])),_:1})])),_:1}),_(u,{xl:{span:"4_8"},sm:{span:"4_8"}},{default:P((()=>[_(n,{shadow:"never",class:"e-grid count-container active-box"},{default:P((()=>[_(o,{center:"center",icon:"active1",title:"活跃会员数",count:i.value.numberActiveMembers.activeUserNum},{tips:P((()=>[g("沉默会员数："+y(i.value.numberActiveMembers.silenceUserNum),1)])),_:1},8,["count"]),_(c,{type:"text",class:"adjustment",onClick:s[1]||(s[1]=e=>a.value=!0)},{default:P((()=>[k])),_:1})])),_:1})])),_:1}),_(u,{xl:{span:"4_8"},sm:{span:"4_8"}},{default:P((()=>[_(n,{shadow:"never",class:"e-grid count-container"},{default:P((()=>[_(o,{center:"center",icon:"paying-member",title:"付款会员数",count:i.value.paymentUser.payuserNum},{tips:P((()=>[g("无交易会员数："+y(i.value.paymentUser.noPayuserNum),1)])),_:1},8,["count"])])),_:1})])),_:1}),_(u,{xl:{span:"4_8"},sm:{span:"4_8"}},{default:P((()=>[_(n,{shadow:"never",class:"e-grid count-container"},{default:P((()=>[_(o,{center:"center",icon:"balance-member",title:"有余额会员数",count:i.value.haveBalance.haveBalance},{tips:P((()=>[g("无余额会员数："+y(i.value.haveBalance.noBalance),1)])),_:1},8,["count"])])),_:1})])),_:1})])),_:1})):h("",!0)])),_:1})])),_:1}),_(d,null,{default:P((()=>[_(u,{xl:24},{default:P((()=>[_(n,{shadow:"never",class:"e-grid deal-container"},{default:P((()=>[B,_(p,{class:"oe-flex-1",autoresize:"",option:x(V)},null,8,["option"])])),_:1})])),_:1})])),_:1}),_(d,{gutter:24},{default:P((()=>[_(u,{lg:12,sm:24},{default:P((()=>[_(n,{shadow:"never",class:"e-grid deal-container"},{default:P((()=>[F,_(p,{class:"oe-flex-1",autoresize:"",option:x(A)},null,8,["option"])])),_:1})])),_:1}),_(u,{lg:12,sm:24},{default:P((()=>[_(n,{shadow:"never",class:"e-grid deal-container"},{default:P((()=>[L,_(p,{class:"oe-flex-1",autoresize:"",option:x(E)},null,8,["option"])])),_:1})])),_:1})])),_:1}),_(G,{title:"活跃沉默设置",modelValue:a.value,"onUpdate:modelValue":s[5]||(s[5]=e=>a.value=e),width:"486px"},{footer:P((()=>[_("span",S,[_(c,{onClick:s[4]||(s[4]=e=>a.value=!1)},{default:P((()=>[z])),_:1}),_(c,{type:"primary",onClick:q},{default:P((()=>[C])),_:1})])])),default:P((()=>[_(W,{class:"silent-box",model:t.value,ref:l,"label-width":"135px",rules:r.value},{default:P((()=>[_(U,{label:"购买产品间隔",prop:"productInterval"},{default:P((()=>[_(v,{modelValue:t.value.productInterval,"onUpdate:modelValue":s[2]||(s[2]=e=>t.value.productInterval=e)},{append:P((()=>[M])),_:1},8,["modelValue"])])),_:1}),_(U,{label:"未购买产品间隔",prop:"notPurchased"},{default:P((()=>[_(v,{modelValue:t.value.notPurchased,"onUpdate:modelValue":s[3]||(s[3]=e=>t.value.notPurchased=e)},{append:P((()=>[N])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])],64)}))}});E.__scopeId="data-v-3e8def16";export default E;
